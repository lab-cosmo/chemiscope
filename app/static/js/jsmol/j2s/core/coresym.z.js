(function(ia,ja,ka,la,v,ma,x,y,K,A,M,q,na,F,oa,O,N,G,t,pa,T,qa,ra,ca,da,ea,sa,Y,fa,ga,D,ta,ua,$,va,wa,xa,ya,aa,ha,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,d,g){x("J.adapter.smarter");K(["JU.P3"],"J.adapter.smarter.XtalSymmetry","java.lang.Boolean $.Float java.util.Hashtable JU.BS $.Lst $.M3 $.M4 $.P3i $.PT $.SB $.V3 J.adapter.smarter.Atom JS.Symmetry $.SymmetryOperation JU.BSUtil $.SimpleUnitCell".split(" "),function(){c$=M(function(){this.baseUnitCell=this.unitCellParams=this.symmetry=
this.acr=this.asc=null;this.symmetryRange=0;this.centroidPacked=this.doCentroidUnitCell=!1;this.packingError=0;this.filterSymop=null;this.applySymmetryToBonds=!1;this.trajectoryUnitCells=this.latticeCells=null;this.doNormalize=!0;this.doPackUnitCell=!1;this.sym2=this.baseSymmetry=null;this.rmaxz=this.rmaxy=this.rmaxx=this.rminz=this.rminy=this.rminx=0;this.maxXYZ0=this.minXYZ0=this.maxXYZ=this.minXYZ=this.ptOffset=null;this.checkAll=!1;this.bondCount0=0;this.dtype=3;this.unitCellTranslations=null;
this.latticeOp=0;this.latticeOnly=!1;this.firstAtom=this.noSymmetryCount=0;this.mTemp=this.ptTemp=null;this.nVib=0;A(this,arguments)},J.adapter.smarter,"XtalSymmetry");T(c$,function(){this.unitCellParams=t(6,0);this.ptOffset=new JU.P3});F(c$,function(){});d(c$,"set",function(a){this.acr=a;this.asc=a.asc;this.getSymmetry();return this},"J.adapter.smarter.AtomSetCollectionReader");d(c$,"getSymmetry",function(){return null==this.symmetry?this.symmetry=this.acr.getInterface("JS.Symmetry"):this.symmetry});
d(c$,"setSymmetry",function(a){return this.symmetry=a},"J.api.SymmetryInterface");d(c$,"setSymmetryRange",function(a){this.symmetryRange=a;this.asc.setInfo("symmetryRange",Float.$valueOf(a))},"~N");d(c$,"setLatticeCells",function(){this.latticeCells=this.acr.latticeCells;var a=555>=this.latticeCells[0]&&555<=this.latticeCells[1]&&(0==this.latticeCells[2]||1==this.latticeCells[2]||-1==this.latticeCells[2]);this.doNormalize=0!=this.latticeCells[0]&&(!a||1==this.latticeCells[2]);this.applySymmetryToBonds=
this.acr.applySymmetryToBonds;this.doPackUnitCell=this.acr.doPackUnitCell;this.doCentroidUnitCell=this.acr.doCentroidUnitCell;this.centroidPacked=this.acr.centroidPacked;this.filterSymop=this.acr.filterSymop});d(c$,"setUnitCell",function(a,b,c){this.unitCellParams=t(a.length,0);for(var e=0;e<a.length;e++)this.unitCellParams[e]=a[e];this.asc.haveUnitCell=!0;this.asc.setCurrentModelInfo("unitCellParams",this.unitCellParams);this.asc.isTrajectory&&(null==this.trajectoryUnitCells&&(this.trajectoryUnitCells=
new JU.Lst,this.asc.setInfo("unitCells",this.trajectoryUnitCells)),this.trajectoryUnitCells.addLast(this.unitCellParams));this.asc.setGlobalBoolean(2);this.getSymmetry().setUnitCell(this.unitCellParams,!1);null!=c&&(this.symmetry.setOffsetPt(c),this.asc.setCurrentModelInfo("unitCellOffset",c));null!=b&&(this.symmetry.initializeOrientation(b),this.asc.setCurrentModelInfo("matUnitCellOrientation",b))},"~A,JU.M3,JU.P3");d(c$,"addSpaceGroupOperation",function(a,b){b&&this.setLatticeCells();this.symmetry.setSpaceGroup(this.doNormalize);
return this.symmetry.addSpaceGroupOperation(a,0)},"~S,~B");d(c$,"setLatticeParameter",function(a){this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.setLattice(a)},"~N");d(c$,"applySymmetryFromReader",function(a){this.asc.setCoordinatesAreFractional(this.acr.iHaveFractionalCoordinates);this.setUnitCell(this.acr.unitCellParams,this.acr.matUnitCellOrientation,this.acr.unitCellOffset);this.setAtomSetSpaceGroupName(this.acr.sgName);this.setSymmetryRange(this.acr.symmetryRange);if(this.acr.doConvertToFractional||
this.acr.fileCoordinatesAreFractional){this.setLatticeCells();var b=!0;if(this.acr.ignoreFileSpaceGroupName||!this.acr.iHaveSymmetryOperators){if(!this.acr.merging||null==a)a=this.acr.getNewSymmetry();b=a.createSpaceGroup(this.acr.desiredSpaceGroupIndex,0<=this.acr.sgName.indexOf("!")?"P1":this.acr.sgName,this.acr.unitCellParams,this.acr.modDim)}else this.acr.doPreSymmetry(),a=null;this.packingError=this.acr.packingError;b&&(null!=a&&this.setSpaceGroupFrom(a),this.applySymmetryLattice(),null!=a&&
null==this.filterSymop&&this.setAtomSetSpaceGroupName(a.getSpaceGroupName()))}if(this.acr.iHaveFractionalCoordinates&&this.acr.merging&&null!=a){for(var b=this.asc.atoms,c=this.asc.getLastAtomSetAtomIndex(),e=this.asc.ac;c<e;c++)a.toCartesian(b[c],!0);this.asc.setCoordinatesAreFractional(!1);this.acr.addVibrations=!1}return this.symmetry},"J.api.SymmetryInterface");d(c$,"setSpaceGroupFrom",function(a){this.getSymmetry().setSpaceGroupFrom(a)},"J.api.SymmetryInterface");d(c$,"setAtomSetSpaceGroupName",
function(a){this.symmetry.setSpaceGroupName(a);this.asc.setCurrentModelInfo("spaceGroup",a+"")},"~S");d(c$,"applySymmetryLattice",function(){if(this.asc.coordinatesAreFractional&&null!=this.symmetry.getSpaceGroup()){this.sym2=null;var a=this.latticeCells[0],b=this.latticeCells[1],c=Math.abs(this.latticeCells[2]),e=this.latticeCells[3],h=q(this.symmetry.getUnitCellInfoType(6));this.firstAtom=this.asc.getLastAtomSetAtomIndex();var f=this.asc.bsAtoms;null!=f&&(this.updateBSAtoms(),this.firstAtom=f.nextSetBit(this.firstAtom));
this.rminx=this.rminy=this.rminz=3.4028235E38;this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38;var w=null;null==this.acr.latticeType&&(this.acr.latticeType=this.symmetry.getLatticeType());this.acr.isPrimitive&&(this.asc.setCurrentModelInfo("isprimitive",Boolean.TRUE),(!"P".equals(this.acr.latticeType)||null!=this.acr.primitiveToCrystal)&&this.asc.setCurrentModelInfo("unitcell_conventional",this.symmetry.getConventionalUnitCell(this.acr.latticeType,this.acr.primitiveToCrystal)));if(null!=this.acr.latticeType&&
(this.asc.setCurrentModelInfo("latticeType",this.acr.latticeType),y(this.acr.fillRange,String))){var d=this.acr.fillRange;d.equals("conventional")?this.acr.fillRange=this.symmetry.getConventionalUnitCell(this.acr.latticeType,this.acr.primitiveToCrystal):d.equals("primitive")?(this.acr.fillRange=this.symmetry.getUnitCellVectors(),this.symmetry.toFromPrimitive(!0,this.acr.latticeType.charAt(0),this.acr.fillRange,this.acr.primitiveToCrystal)):this.acr.fillRange=null;null!=this.acr.fillRange&&this.acr.addJmolScript("unitcell "+
d)}if(null!=this.acr.fillRange){f=this.updateBSAtoms();this.acr.forcePacked=!0;this.doPackUnitCell=!1;this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(1,1,1);for(var j=Array(4),k=0;4>k;k++)j[k]=JU.P3.newP(this.acr.fillRange[k]);this.adjustRangeMinMax(j);null==this.sym2&&(this.sym2=new JS.Symmetry,this.sym2.getUnitCell(this.acr.fillRange,!1,null));this.applyAllSymmetry(this.acr.ms,f);for(var w=new JU.P3,n=this.asc.atoms,k=this.asc.ac;--k>=this.firstAtom;)w.setT(n[k]),this.symmetry.toCartesian(w,!1),
this.sym2.toFractional(w,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(w,1E5),this.isWithinCell(this.dtype,w,0,1,0,1,0,1,this.packingError)||f.clear(k)}else{this.nVib=0;var l=null,m=null,g=null;this.baseSymmetry=this.symmetry;var s=this.acr.strSupercell,j=null;null!=s&&0<=s.indexOf(",")&&(j=this.symmetry.getV0abc(s),null!=j&&(this.minXYZ=new JU.P3i,this.maxXYZ=JU.P3i.new3(a,b,c),JU.SimpleUnitCell.setMinMaxLatticeParameters(h,this.minXYZ,this.maxXYZ,e),w=JU.P3.newP(j[0]),l=JU.P3.newP(j[1]),m=JU.P3.newP(j[2]),
g=JU.P3.newP(j[3]),this.adjustRangeMinMax(j)));d=this.asc.getLastAtomSetAtomIndex();null!=f&&(d=f.nextSetBit(d));if(3.4028235E38==this.rminx)j=null;else{this.doPackUnitCell=k=this.doPackUnitCell;f=this.updateBSAtoms();this.applyAllSymmetry(this.acr.ms,null);this.doPackUnitCell=k;for(var n=this.asc.atoms,u=this.asc.ac,k=d;k<u;k++)this.symmetry.toCartesian(n[k],!0),f.set(k);this.symmetry=null;this.symmetry=this.getSymmetry();this.setUnitCell(t(-1,[0,0,0,0,0,0,l.x,l.y,l.z,m.x,m.y,m.z,g.x,g.y,g.z]),null,
null);this.setAtomSetSpaceGroupName(null==j||null==s?"P1":"cell="+s);this.symmetry.setSpaceGroup(this.doNormalize);this.symmetry.addSpaceGroupOperation("x,y,z",0);null!=w&&this.symmetry.toFractional(w,!0);for(k=d;k<u;k++)this.symmetry.toFractional(n[k],!0),null!=w&&n[k].sub(w);this.asc.haveAnisou=!1;this.asc.setCurrentModelInfo("matUnitCellOrientation",null)}this.minXYZ=new JU.P3i;this.maxXYZ=JU.P3i.new3(a,b,c);JU.SimpleUnitCell.setMinMaxLatticeParameters(h,this.minXYZ,this.maxXYZ,e);if(null==j)this.applyAllSymmetry(this.acr.ms,
f);else if(this.acr.forcePacked||this.doPackUnitCell){n=this.asc.atoms;a=this.updateBSAtoms();for(k=a.nextSetBit(d);0<=k;k=a.nextSetBit(k+1))this.isWithinCell(this.dtype,n[k],this.minXYZ.x,this.maxXYZ.x,this.minXYZ.y,this.maxXYZ.y,this.minXYZ.z,this.maxXYZ.z,this.packingError)||a.clear(k)}}}});d(c$,"updateBSAtoms",function(){var a=this.asc.bsAtoms;null==a&&(a=this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac));0>a.nextSetBit(this.firstAtom)&&a.setBits(this.firstAtom,this.asc.ac);return a});d(c$,
"adjustRangeMinMax",function(a){var b=new JU.P3,c=new JU.P3,e=new JU.P3;this.acr.forcePacked&&(b.setT(a[1]),c.setT(a[2]),e.setT(a[3]),b.scale(this.packingError),c.scale(this.packingError),e.scale(this.packingError));a[0].scaleAdd2(this.minXYZ.x,a[1],a[0]);a[0].scaleAdd2(this.minXYZ.y,a[2],a[0]);a[0].scaleAdd2(this.minXYZ.z,a[3],a[0]);a[0].sub(b);a[0].sub(c);a[0].sub(e);var h=JU.P3.newP(a[0]);this.symmetry.toFractional(h,!0);this.setSymmetryMinMax(h);a[1].scale(this.maxXYZ.x-this.minXYZ.x);a[2].scale(this.maxXYZ.y-
this.minXYZ.y);a[3].scale(this.maxXYZ.z-this.minXYZ.z);a[1].scaleAdd2(2,b,a[1]);a[2].scaleAdd2(2,c,a[2]);a[3].scaleAdd2(2,e,a[3]);for(b=0;3>b;b++)for(c=b+1;4>c;c++)h.add2(a[b],a[c]),0!=b&&h.add(a[0]),this.symmetry.toFractional(h,!1),this.setSymmetryMinMax(h);this.symmetry.toCartesian(h,!1);h.add(a[1]);this.symmetry.toFractional(h,!1);this.setSymmetryMinMax(h);this.minXYZ=JU.P3i.new3(v(Math.min(0,Math.floor(this.rminx+0.001))),v(Math.min(0,Math.floor(this.rminy+0.001))),v(Math.min(0,Math.floor(this.rminz+
0.001))));this.maxXYZ=JU.P3i.new3(v(Math.max(1,Math.ceil(this.rmaxx-0.001))),v(Math.max(1,Math.ceil(this.rmaxy-0.001))),v(Math.max(1,Math.ceil(this.rmaxz-0.001))))},"~A");d(c$,"setSymmetryMinMax",function(a){this.rminx>a.x&&(this.rminx=a.x);this.rminy>a.y&&(this.rminy=a.y);this.rminz>a.z&&(this.rminz=a.z);this.rmaxx<a.x&&(this.rmaxx=a.x);this.rmaxy<a.y&&(this.rmaxy=a.y);this.rmaxz<a.z&&(this.rmaxz=a.z)},"JU.P3");d(c$,"isWithinCell",function(a,b,c,e,h,f,w,d,j){return b.x>c-j&&b.x<e+j&&(2>a||b.y>h-
j&&b.y<f+j)&&(3>a||b.z>w-j&&b.z<d+j)},"~N,JU.P3,~N,~N,~N,~N,~N,~N,~N");d(c$,"applyAllSymmetry",function(a,b){if(!(0==this.asc.ac||null!=b&&b.isEmpty())){var c=this.noSymmetryCount=0<this.asc.baseSymmetryAtomCount?this.asc.baseSymmetryAtomCount:null==b?this.asc.getLastAtomSetAtomCount():this.asc.ac-b.nextSetBit(this.asc.getLastAtomSetAtomIndex());this.asc.setTensors();this.bondCount0=this.asc.bondCount;this.finalizeSymmetry(this.symmetry);var e=this.symmetry.getSpaceGroupOperationCount(),h=null==this.acr.thisBiomolecule?
null:new JU.BS;null!=h&&(this.asc.checkSpecial=!0);this.dtype=q(this.symmetry.getUnitCellInfoType(6));JU.SimpleUnitCell.setMinMaxLatticeParameters(this.dtype,this.minXYZ,this.maxXYZ,0);this.latticeOp=this.symmetry.getLatticeOp();this.latticeOnly=this.asc.checkLatticeOnly&&0<=this.latticeOp;this.doCentroidUnitCell&&this.asc.setInfo("centroidMinMax",N(-1,[this.minXYZ.x,this.minXYZ.y,this.minXYZ.z,this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z,this.centroidPacked?1:0]));if(this.doCentroidUnitCell||this.doPackUnitCell||
0!=this.symmetryRange&&1==this.maxXYZ.x-this.minXYZ.x&&1==this.maxXYZ.y-this.minXYZ.y&&1==this.maxXYZ.z-this.minXYZ.z)switch(this.minXYZ0=JU.P3.new3(this.minXYZ.x,this.minXYZ.y,this.minXYZ.z),this.maxXYZ0=JU.P3.new3(this.maxXYZ.x,this.maxXYZ.y,this.maxXYZ.z),null!=a&&(a.setMinMax0(this.minXYZ0,this.maxXYZ0),this.minXYZ.set(q(this.minXYZ0.x),q(this.minXYZ0.y),q(this.minXYZ0.z)),this.maxXYZ.set(q(this.maxXYZ0.x),q(this.maxXYZ0.y),q(this.maxXYZ0.z))),this.dtype){case 3:this.minXYZ.z--,this.maxXYZ.z++;
case 2:this.minXYZ.y--,this.maxXYZ.y++;case 1:this.minXYZ.x--,this.maxXYZ.x++}for(var f=(this.maxXYZ.x-this.minXYZ.x)*(this.maxXYZ.y-this.minXYZ.y)*(this.maxXYZ.z-this.minXYZ.z),w=c*(this.latticeOnly?4:e),w=this.asc.checkSpecial||null!=this.acr.thisBiomolecule?w*f:0<this.symmetryRange?w:1,d=Array(w),j=this.asc.atoms,k=0;k<c;k++)j[this.firstAtom+k].bsSymmetry=JU.BS.newN(e*(f+1));var n=0,l=N(f,0);this.unitCellTranslations=Array(f);var m=f=0,g=Math.abs(this.symmetryRange),s=0!=this.symmetryRange,u=0>
this.symmetryRange,U=0<this.symmetryRange;s&&(this.rminx=this.rminy=this.rminz=3.4028235E38,this.rmaxx=this.rmaxy=this.rmaxz=-3.4028235E38);var r=this.symmetry,v=r;this.checkAll=this.latticeOnly||1==this.asc.atomSetCount&&this.asc.checkSpecial&&0<=this.latticeOp;var y=null,ba=r.getSpaceGroupOperation(0);this.doPackUnitCell&&(y=new JU.P3,this.ptOffset.set(0,0,0));var D=this.bondCount0>this.asc.bondIndex0&&this.applySymmetryToBonds?N(c,0):null,z=this.acr.lstNCS;if(null!=z&&0==z.get(0).m33){for(var B=
r.getSpaceGroupOperationCount(),x=z.size(),k=x;0<=--k;){var H=z.get(k);H.m33=1;r.toFractionalM(H)}for(k=1;k<B;k++)for(var L=r.getSpaceGroupOperation(k),Q=0;Q<x;Q++)H=JU.M4.newM4(z.get(Q)),H.mul2(L,H),this.doNormalize&&JS.SymmetryOperation.setOffset(H,j,this.firstAtom,this.noSymmetryCount),z.addLast(H)}for(k=this.minXYZ.x;k<this.maxXYZ.x;k++)for(z=this.minXYZ.y;z<this.maxXYZ.y;z++)for(B=this.minXYZ.z;B<this.maxXYZ.z;B++)if(this.unitCellTranslations[f]=JU.V3.new3(k,z,B),l[f++]=555+100*k+10*z+B,!(0!=
k||0!=z||0!=B||0==d.length)){for(n=0;n<c;n++){m=j[this.firstAtom+n];null!=a&&(r=a.getAtomSymmetry(m,this.symmetry),r!==v&&(0==r.getSpaceGroupOperationCount()&&this.finalizeSymmetry(v=r),ba=r.getSpaceGroupOperation(0)));x=JU.P3.newP(m);ba.rotTrans(x);r.toCartesian(x,!1);if(this.doPackUnitCell)if(r.toUnitCell(x,this.ptOffset),y.setT(x),r.toFractional(y,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(y,1E5),null==b)m.setT(y);else if(1E-4>m.distance(y))b.set(m.index);else{b.clear(m.index);continue}null!=
b&&m.bsSymmetry.clearAll();m.bsSymmetry.set(f*e);m.bsSymmetry.set(0);s&&this.setSymmetryMinMax(x);n<w&&(d[n]=x)}u&&(this.rminx-=g,this.rminy-=g,this.rminz-=g,this.rmaxx+=g,this.rmaxy+=g,this.rmaxz+=g);m=n=this.symmetryAddAtoms(0,0,0,0,n,f*e,d,a,h,D)}U&&(this.rminx-=g,this.rminy-=g,this.rminz-=g,this.rmaxx+=g,this.rmaxy+=g,this.rmaxz+=g);f=0;for(k=this.minXYZ.x;k<this.maxXYZ.x;k++)for(z=this.minXYZ.y;z<this.maxXYZ.y;z++)for(B=this.minXYZ.z;B<this.maxXYZ.z;B++)if(f++,0!=k||0!=z||0!=B)n=this.symmetryAddAtoms(k,
z,B,m,n,f*e,d,a,h,D);f*c==this.asc.ac-this.firstAtom&&this.duplicateAtomProperties(f);this.setSymmetryOps();this.asc.setCurrentModelInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstAtom));this.asc.setCurrentModelInfo("presymmetryAtomCount",Integer.$valueOf(c));this.asc.setCurrentModelInfo("latticeDesignation",r.getLatticeDesignation());this.asc.setCurrentModelInfo("unitCellRange",l);this.asc.setCurrentModelInfo("unitCellTranslations",this.unitCellTranslations);this.baseUnitCell=this.unitCellParams;
this.unitCellParams=t(6,0);this.reset()}},"J.adapter.smarter.MSInterface,JU.BS");d(c$,"symmetryAddAtoms",function(a,b,c,e,h,f,w,d,j,k){var g=0==e,l=null!=k;this.doPackUnitCell&&this.ptOffset.set(a,b,c);var m=this.symmetryRange*this.symmetryRange,P=0>this.symmetryRange,s=0<this.symmetryRange,u=g&&s,s=(new Boolean(s&!g)).valueOf(),U=this.symmetry.getSpaceGroupOperationCount(),r=this.acr.lstNCS,q=null==r?0:r.size(),x=U+q,q=v(q/U),t=1==x&&!this.doPackUnitCell?!1:this.asc.checkSpecial,y=P||s,z=t||y,B=
null!=j,D=t||u,H=this.acr.isMolecular?null:this.asc.bsAtoms,L=this.symmetry;P&&(e=this.noSymmetryCount);var P=this.firstAtom+this.noSymmetryCount,Q=new JU.P3,A=null,M=B?0.01:1E-4,F="\x00",N=null==H?this.firstAtom:H.nextSetBit(this.firstAtom),E=0;a:for(;E<x;E++)if(!(g&&0==E||this.latticeOnly&&0<E&&0!=E%this.latticeOp||null!=j&&j.get(E))){for(var K=this.firstAtom+(t||null!=j?h:s?e:0),G=E>=U?0:0==this.asc.vibScale?L.getSpinOp(E):this.asc.vibScale,W=Math.max(this.firstAtom,null==H?0:H.nextSetBit(0)),
O=z,X=E>=U?v((E-U)/q):E,V=X+f;W<P;W++){var R=this.asc.atoms[W];if(!(R.ignoreSymmetry||null!=H&&!H.get(W))){null==d?L.newSpaceGroupPoint(E,R,Q,a,b,c,E>=U?r.get(E-U):null):(L=d.getAtomSymmetry(R,this.symmetry),L.newSpaceGroupPoint(E,R,Q,a,b,c,null),A=L.getSpaceGroupOperationCode(E),null!=A&&(F=A.charAt(0),L=d.getSymmetryFromCode(A),0==L.getSpaceGroupOperationCount()&&this.finalizeSymmetry(L)));this.acr.fixJavaFloat&&JU.PT.fixPtFloats(Q,1E5);var I=JU.P3.newP(Q);L.toCartesian(I,!1);if(this.doPackUnitCell&&
(L.toUnitCell(I,this.ptOffset),Q.setT(I),L.toFractional(Q,!1),this.acr.fixJavaFloat&&JU.PT.fixPtFloats(Q,1E5),!this.isWithinCell(this.dtype,Q,this.minXYZ0.x,this.maxXYZ0.x,this.minXYZ0.y,this.maxXYZ0.y,this.minXYZ0.z,this.maxXYZ0.z,this.packingError)))continue;u&&this.setSymmetryMinMax(I);var C=null;if(O){if(y&&(I.x<this.rminx||I.y<this.rminy||I.z<this.rminz||I.x>this.rmaxx||I.y>this.rmaxy||I.z>this.rmaxz))continue;for(var T=3.4028235E38,Y=this.checkAll?this.asc.ac:K,$=R.atomName,aa=null==A?R.altLoc:
F,S=N;S<Y;S++)if(null==H||H.get(S)){var Z=w[S-this.firstAtom];if(null!=Z){Z=I.distanceSquared(Z);if(t&&Z<M){if(B){j.set(E);continue a}C=this.asc.atoms[S];if((null==C.atomName||C.atomName.equals($))&&C.altLoc==aa)break;C=null}s&&(S<e&&Z<T)&&(T=Z)}}if(s&&T>m)continue}B&&(O=!1);S=R.atomSite;if(null!=C)l&&(k[S]=C.index),C.bsSymmetry.set(V),C.bsSymmetry.set(X);else if(l&&(k[S]=this.asc.ac),C=this.asc.newCloneAtom(R),C.setT(Q),null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(C.index),0!=G&&null!=C.vib&&(L.getSpaceGroupOperation(E).rotate(C.vib),
C.vib.scale(G)),C.atomSite=S,null!=A&&(C.altLoc=F),C.bsSymmetry=JU.BSUtil.newAndSetBit(V),C.bsSymmetry.set(X),D&&(w[h++]=I),R=R.tensors,null!=R){C.tensors=null;for(S=R.size();0<=--S;)I=R.get(S),null!=I&&(1==U?C.addTensor(I.copyTensor(),null,!1):this.addRotatedTensor(C,I,E,!1,L))}}}if(l){K=this.asc.bonds;G=this.asc.atoms;for(O=this.asc.bondIndex0;O<this.bondCount0;O++)X=K[O],C=G[X.atomIndex1],V=G[X.atomIndex2],null==C||null==V||(W=k[C.atomSite],V=k[V.atomSite],(W>=P||V>=P)&&this.asc.addNewBondWithOrder(W,
V,X.order))}}return h},"~N,~N,~N,~N,~N,~N,~A,J.adapter.smarter.MSInterface,JU.BS,~A");d(c$,"duplicateAtomProperties",function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"atomProperties");if(null!=b)for(var c,e=b.entrySet().iterator();e.hasNext()&&((c=e.next())||1);){var h=c.getKey(),f=c.getValue();if(y(f,String)){for(var w=f,d=new JU.SB,f=a;0<=--f;)d.append(w);b.put(h,d.toString())}else{h=f;w=t(h.length*a,0);for(f=a;0<=--f;)System.arraycopy(h,0,w,f*h.length,h.length)}}},"~N");d(c$,"finalizeSymmetry",
function(a){var b=this.asc.getAtomSetAuxiliaryInfoValue(-1,"spaceGroup");a.setFinalOperations(b,this.asc.atoms,this.firstAtom,this.noSymmetryCount,this.doNormalize,this.filterSymop);(null!=this.filterSymop||null==b||b.equals("unspecified!"))&&this.setAtomSetSpaceGroupName(a.getSpaceGroupName())},"J.api.SymmetryInterface");d(c$,"setSymmetryOps",function(){var a=this.symmetry.getSpaceGroupOperationCount();if(0<a){for(var b=Array(a),c=0;c<a;c++)b[c]=""+this.symmetry.getSpaceGroupXyz(c,this.doNormalize);
this.asc.setCurrentModelInfo("symmetryOperations",b);this.asc.setCurrentModelInfo("symmetryOps",this.symmetry.getSymmetryOperations())}this.asc.setCurrentModelInfo("symmetryCount",Integer.$valueOf(a));this.asc.setCurrentModelInfo("latticeType",null==this.acr.latticeType?"P":this.acr.latticeType);this.asc.setCurrentModelInfo("intlTableNo",this.symmetry.getIntTableNumber());if(null==this.acr.sgName||0<=this.acr.sgName.indexOf("?")||0<=this.acr.sgName.indexOf("!"))this.setAtomSetSpaceGroupName(this.acr.sgName=
this.symmetry.getSpaceGroupName())});d(c$,"getOverallSpan",function(){return null==this.maxXYZ0?JU.V3.new3(this.maxXYZ.x-this.minXYZ.x,this.maxXYZ.y-this.minXYZ.y,this.maxXYZ.z-this.minXYZ.z):JU.V3.newVsub(this.maxXYZ0,this.minXYZ0)});d(c$,"applySymmetryBio",function(a,b,c){var e=a.get("biomts");if(!(2>e.size())){this.acr.lstNCS=null;this.setLatticeCells();var h=null!=this.latticeCells&&0!=this.latticeCells[0]?N(3,0):null;if(null!=h)for(var f=0;3>f;f++)h[f]=this.latticeCells[f];this.latticeCells=
null;f=0<=c.indexOf("BYCHAIN")?1:0<=c.indexOf("BYSYMOP")?2:0;this.doNormalize=!1;h=a.get("chains");h.get(0).equals(h.get(1))&&(h=null);this.symmetry=null;this.getSymmetry().setSpaceGroup(this.doNormalize);this.addSpaceGroupOperation("x,y,z",!1);var w=a.get("name");this.setAtomSetSpaceGroupName(this.acr.sgName=w);w=e.size();this.applySymmetryToBonds=b;this.bondCount0=this.asc.bondCount;this.firstAtom=this.asc.getLastAtomSetAtomIndex();var d=this.asc.ac,j=new java.util.Hashtable,k=0,g=this.asc.atoms;
b=this.bondCount0>this.asc.bondIndex0&&b;switch(f){case 1:for(f=d;--f>=this.firstAtom;){var l=Integer.$valueOf(g[f].chainID);b=j.get(l);null==b&&(k++,j.put(l,b=new JU.BS));b.set(f)}this.asc.bsAtoms=new JU.BS;for(f=0;f<k;f++)this.asc.bsAtoms.set(d+f),l=new J.adapter.smarter.Atom,l.set(0,0,0),l.radius=16,this.asc.addAtom(l);for(var m=0,P,j=j.entrySet().iterator();j.hasNext()&&((P=j.next())||1);){l=g[d+m++];b=P.getValue();for(f=b.nextSetBit(0);0<=f;f=b.nextSetBit(f+1))l.add(g[f]);l.scale(1/b.cardinality());
l.atomName="Pt"+m;l.chainID=P.getKey().intValue()}this.firstAtom=d;d+=k;b=!1;break;case 2:this.asc.bsAtoms=new JU.BS;this.asc.bsAtoms.set(d);l=g[d]=new J.adapter.smarter.Atom;l.set(0,0,0);for(f=d;--f>=this.firstAtom;)l.add(g[f]);l.scale(1/(d-this.firstAtom));l.atomName="Pt";l.radius=16;this.asc.addAtom(l);this.firstAtom=d++;b=!1}a=a.get("asemblyIdAtoms");0<=c.indexOf("#<")&&(w=Math.min(w,JU.PT.parseInt(c.substring(c.indexOf("#<")+2))-1),c=JU.PT.rep(c,"#<","_<"));for(j=this.firstAtom;j<d;j++)g[j].bsSymmetry=
JU.BSUtil.newAndSetBit(0);k=this.asc.bsAtoms;l=b?N(this.asc.ac,0):null;for(f=null==h?1:0;f<w;f++){if(0<=c.indexOf("!#")){if(0<=c.indexOf("!#"+(f+1)+";"))continue}else if(0<=c.indexOf("#")&&0>c.indexOf("#"+(f+1)+";"))continue;var m=e.get(f),s=null==h?null:h.get(f);if(null!=s&&null!=a){k=new JU.BS;for(j=a.entrySet().iterator();j.hasNext()&&((P=j.next())||1);)0<=s.indexOf(":"+P.getKey()+";")&&k.or(P.getValue());null!=this.asc.bsAtoms&&k.and(this.asc.bsAtoms);s=null}for(j=this.firstAtom;j<d;j++)if(!(null!=
k&&!k.get(j)||null!=s&&0>s.indexOf(":"+this.acr.vwr.getChainIDStr(g[j].chainID)+";")))try{var u=g[j].atomSite,q;b&&(l[u]=this.asc.ac);q=this.asc.newCloneAtom(g[j]);null!=this.asc.bsAtoms&&this.asc.bsAtoms.set(q.index);q.atomSite=u;m.rotTrans(q);q.bsSymmetry=JU.BSUtil.newAndSetBit(f)}catch(r){if(O(r,Exception))this.asc.errorMessage="appendAtomCollection error: "+r;else throw r;}if(0<f&&(this.symmetry.addBioMoleculeOperation(m,!1),b))for(j=this.asc.bondIndex0;j<this.bondCount0;j++)m=this.asc.bonds[j],
this.asc.addNewBondWithOrder(l[g[m.atomIndex1].atomSite],l[g[m.atomIndex2].atomSite],m.order)}null!=h&&(null==this.asc.bsAtoms&&(this.asc.bsAtoms=JU.BSUtil.newBitSet2(0,this.asc.ac)),this.asc.bsAtoms.clearBits(this.firstAtom,d));this.noSymmetryCount=d-this.firstAtom;this.asc.setCurrentModelInfo("presymmetryAtomIndex",Integer.$valueOf(this.firstAtom));this.asc.setCurrentModelInfo("presymmetryAtomCount",Integer.$valueOf(this.noSymmetryCount));this.asc.setCurrentModelInfo("biosymmetryCount",Integer.$valueOf(w));
this.asc.setCurrentModelInfo("biosymmetry",this.symmetry);this.finalizeSymmetry(this.symmetry);this.setSymmetryOps();this.reset()}},"java.util.Map,~B,~S");d(c$,"reset",function(){this.asc.coordinatesAreFractional=!1;this.asc.setCurrentModelInfo("hasSymmetry",Boolean.TRUE);this.asc.setGlobalBoolean(1)});d(c$,"addRotatedTensor",function(a,b,c,e,h){null==this.ptTemp&&(this.ptTemp=new JU.P3,this.mTemp=new JU.M3);return a.addTensor(this.acr.getInterface("JU.Tensor").setFromEigenVectors(h.rotateAxes(c,
b.eigenVectors,this.ptTemp,this.mTemp),b.eigenValues,b.isIsotropic?"iso":b.type,b.id,b),null,e)},"J.adapter.smarter.Atom,JU.Tensor,~N,~B,J.api.SymmetryInterface");d(c$,"setTensors",function(){for(var a=this.asc.ac,b=this.asc.getLastAtomSetAtomIndex();b<a;b++){var c=this.asc.atoms[b];null!=c.anisoBorU&&(c.addTensor(this.symmetry.getTensor(this.acr.vwr,c.anisoBorU),null,!1),Float.isNaN(c.bfactor)&&(c.bfactor=100*c.anisoBorU[7]),c.anisoBorU=null)}});d(c$,"setTimeReversal",function(a,b){this.symmetry.setTimeReversal(a,
b)},"~N,~N");d(c$,"setSpinVectors",function(){if(0<this.nVib||0>this.asc.iSet||!this.acr.vibsFractional)return this.nVib;for(var a=this.asc.getAtomSetAtomIndex(this.asc.iSet),b=this.getBaseSymmetry(),c=this.asc.ac;--c>=a;){var e=this.asc.atoms[c].vib;null!=e&&(0<e.modDim?e.setMoment():(e=e.clone(),b.toCartesian(e,!0),this.asc.atoms[c].vib=e),this.nVib++)}return this.nVib});d(c$,"scaleFractionalVibs",function(){for(var a=this.getBaseSymmetry().getUnitCellParams(),a=JU.P3.new3(1/a[0],1/a[1],1/a[2]),
b=this.asc.getAtomSetAtomIndex(this.asc.iSet),c=this.asc.ac;--c>=b;){var e=this.asc.atoms[c].vib;null!=e&&e.scaleT(a)}});d(c$,"getBaseSymmetry",function(){return null==this.baseSymmetry?this.symmetry:this.baseSymmetry});d(c$,"finalizeUnitCell",function(a){null!=a&&null!=this.baseUnitCell&&(this.baseUnitCell[22]=Math.max(1,q(a.x)),this.baseUnitCell[23]=Math.max(1,q(a.y)),this.baseUnitCell[24]=Math.max(1,q(a.z)))},"JU.P3");G(c$,"PARTICLE_NONE",0,"PARTICLE_CHAIN",1,"PARTICLE_SYMOP",2)});x("J.api");ca(J.api,
"SymmetryInterface");x("JS");K(["J.api.SymmetryInterface"],"JS.Symmetry","JU.BS $.Lst $.P3 J.api.Interface J.bspt.Bspt JS.PointGroup $.SpaceGroup $.SymmetryInfo $.SymmetryOperation $.UnitCell JU.Escape $.Logger $.SimpleUnitCell".split(" "),function(){c$=M(function(){this.unitCell=this.symmetryInfo=this.spaceGroup=this.pointGroup=null;this.$isBio=!1;this.cip=this.desc=null;A(this,arguments)},JS,"Symmetry",null,J.api.SymmetryInterface);g(c$,"isBio",function(){return this.$isBio});F(c$,function(){});
g(c$,"setPointGroup",function(a,b,c,e,h,f,d,p){this.pointGroup=JS.PointGroup.getPointGroup(null==a?null:a.pointGroup,b,c,e,h,f,d,p);return this},"J.api.SymmetryInterface,JU.T3,~A,JU.BS,~B,~N,~N,~B");g(c$,"getPointGroupName",function(){return this.pointGroup.getName()});g(c$,"getPointGroupInfo",function(a,b,c,e,h,f){return null==b&&!c&&null!=this.pointGroup.textInfo?this.pointGroup.textInfo:null==b&&this.pointGroup.isDrawType(e,h,f)?this.pointGroup.drawInfo:c&&null!=this.pointGroup.info?this.pointGroup.info:
this.pointGroup.getInfo(a,b,c,e,h,f)},"~N,~S,~B,~S,~N,~N");g(c$,"setSpaceGroup",function(a){null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,a,!1))},"~B");g(c$,"addSpaceGroupOperation",function(a,b){return this.spaceGroup.addSymmetry(a,b,!1)},"~S,~N");g(c$,"addBioMoleculeOperation",function(a,b){this.$isBio=this.spaceGroup.isBio=!0;return this.spaceGroup.addSymmetry((b?"!":"")+"[[bio"+a,0,!1)},"JU.M4,~B");g(c$,"setLattice",function(a){this.spaceGroup.setLatticeParam(a)},"~N");d(c$,
"getSpaceGroup",function(){return this.spaceGroup});g(c$,"setSpaceGroupFrom",function(a){this.spaceGroup=a.getSpaceGroup()},"J.api.SymmetryInterface");g(c$,"createSpaceGroup",function(a,b,c,e){this.spaceGroup=JS.SpaceGroup.createSpaceGroup(a,b,c,e);null!=this.spaceGroup&&JU.Logger.debugging&&JU.Logger.debug("using generated space group "+this.spaceGroup.dumpInfo());return null!=this.spaceGroup},"~N,~S,~O,~N");g(c$,"getSpaceGroupInfoObj",function(a,b,c){return JS.SpaceGroup.getInfo(this.spaceGroup,
a,b,c)},"~S,J.api.SymmetryInterface,~B");g(c$,"getLatticeDesignation",function(){return this.spaceGroup.getLatticeDesignation()});g(c$,"setFinalOperations",function(a,b,c,e,h,f){if(null!=a&&(a.startsWith("bio")||0<=a.indexOf(" *(")))this.spaceGroup.name=a;if(null!=f){var d=new JU.Lst;d.addLast(this.spaceGroup.operations[0]);for(var p=1;p<this.spaceGroup.operationCount;p++)f.contains(" "+(p+1)+" ")&&d.addLast(this.spaceGroup.operations[p]);this.spaceGroup=JS.SpaceGroup.createSpaceGroup(-1,a+" *("+
f.trim()+")",d,-1)}this.spaceGroup.setFinalOperations(b,c,e,h)},"~S,~A,~N,~N,~B,~S");g(c$,"getSpaceGroupOperation",function(a){return null==this.spaceGroup||null==this.spaceGroup.operations||a>=this.spaceGroup.operations.length?null:null==this.spaceGroup.finalOperations?this.spaceGroup.operations[a]:this.spaceGroup.finalOperations[a]},"~N");g(c$,"getSpaceGroupXyz",function(a,b){return this.spaceGroup.getXyz(a,b)},"~N,~B");g(c$,"newSpaceGroupPoint",function(a,b,c,e,h,f,d){null==d&&null==this.spaceGroup.finalOperations?
(a=this.spaceGroup.operations[a],a.isFinalized||a.doFinalize(),JS.SymmetryOperation.newPoint(a,b,c,e,h,f)):JS.SymmetryOperation.newPoint(null==d?this.spaceGroup.finalOperations[a]:d,b,c,e,h,f)},"~N,JU.P3,JU.P3,~N,~N,~N,JU.M4");g(c$,"rotateAxes",function(a,b,c,e){return 0==a?b:this.spaceGroup.finalOperations[a].rotateAxes(b,this.unitCell,c,e)},"~N,~A,JU.P3,JU.M3");g(c$,"getSpaceGroupOperationCode",function(a){return this.spaceGroup.operations[a].subsystemCode},"~N");g(c$,"setTimeReversal",function(a,
b){this.spaceGroup.operations[a].setTimeReversal(b)},"~N,~N");g(c$,"getSpinOp",function(a){return this.spaceGroup.operations[a].getMagneticOp()},"~N");g(c$,"addLatticeVectors",function(a){return this.spaceGroup.addLatticeVectors(a)},"JU.Lst");g(c$,"getLatticeOp",function(){return this.spaceGroup.latticeOp});g(c$,"getOperationRsVs",function(a){return(null==this.spaceGroup.finalOperations?this.spaceGroup.operations:this.spaceGroup.finalOperations)[a].rsvs},"~N");g(c$,"getSiteMultiplicity",function(a){return this.spaceGroup.getSiteMultiplicity(a,
this.unitCell)},"JU.P3");g(c$,"addOp",function(a,b,c,e){this.spaceGroup.isSSG=!0;b=JS.SymmetryOperation.getXYZFromRsVs(b,c,!1);c=this.spaceGroup.addSymmetry(b,-1,!0);this.spaceGroup.operations[c].setSigma(a,e);return b},"~S,JU.Matrix,JU.Matrix,JU.Matrix");g(c$,"getMatrixFromString",function(a,b,c){return JS.SymmetryOperation.getMatrixFromString(null,a,b,c)},"~S,~A,~B,~N");g(c$,"getSpaceGroupName",function(){return null!=this.symmetryInfo?this.symmetryInfo.sgName:null!=this.spaceGroup?this.spaceGroup.getName():
null!=this.unitCell&&0<this.unitCell.name.length?"cell="+this.unitCell.name:""});g(c$,"setSpaceGroupName",function(a){null!=this.spaceGroup&&this.spaceGroup.setName(a)},"~S");g(c$,"getSpaceGroupOperationCount",function(){return null!=this.symmetryInfo?this.symmetryInfo.symmetryOperations.length:null!=this.spaceGroup&&null!=this.spaceGroup.finalOperations?this.spaceGroup.finalOperations.length:0});g(c$,"getLatticeType",function(){return null!=this.symmetryInfo?this.symmetryInfo.latticeType:null==this.spaceGroup?
"P":this.spaceGroup.latticeType});g(c$,"setLatticeType",function(a){null!=this.spaceGroup&&(this.spaceGroup.latticeType=a)},"~S");g(c$,"getIntTableNumber",function(){return null!=this.symmetryInfo?this.symmetryInfo.intlTableNo:null==this.spaceGroup?null:this.spaceGroup.intlTableNumber});g(c$,"getCoordinatesAreFractional",function(){return null==this.symmetryInfo||this.symmetryInfo.coordinatesAreFractional});g(c$,"getCellRange",function(){return null==this.symmetryInfo?null:this.symmetryInfo.cellRange});
g(c$,"getSymmetryInfoStr",function(){return null==this.symmetryInfo?"":this.symmetryInfo.infoStr});g(c$,"getSymmetryOperations",function(){if(null!=this.symmetryInfo)return this.symmetryInfo.symmetryOperations;null==this.spaceGroup&&(this.spaceGroup=JS.SpaceGroup.getNull(!0,!1,!0));return this.spaceGroup.finalOperations});g(c$,"isSimple",function(){return null==this.symmetryInfo||null==this.symmetryInfo.symmetryOperations});g(c$,"setSymmetryInfo",function(a,b,c){this.symmetryInfo=new JS.SymmetryInfo;
c=this.symmetryInfo.setSymmetryInfo(b,c);null!=c&&(this.setUnitCell(c,b.containsKey("jmolData")),this.unitCell.moreInfo=b.get("moreUnitCellInfo"),b.put("infoUnitCell",this.getUnitCellAsArray(!1)),this.setOffsetPt(b.get("unitCellOffset")),b=b.get("matUnitCellOrientation"),null!=b&&this.initializeOrientation(b),JU.Logger.debugging&&JU.Logger.debug("symmetryInfos["+a+"]:\n"+this.unitCell.dumpInfo(!0)));return this},"~N,java.util.Map,~A");g(c$,"haveUnitCell",function(){return null!=this.unitCell});g(c$,
"checkUnitCell",function(a,b,c,e){a.toFractional(c,e);return c.x>=b.x-1-0.02&&c.x<=b.x+0.02&&c.y>=b.y-1-0.02&&c.y<=b.y+0.02&&c.z>=b.z-1-0.02&&c.z<=b.z+0.02},"J.api.SymmetryInterface,JU.P3,JU.P3,~B");d(c$,"setUnitCell",function(a,b){this.unitCell=JS.UnitCell.fromParams(a,b)},"~A,~B");g(c$,"unitCellEquals",function(a){return a.unitCell.isSameAs(this.unitCell)},"J.api.SymmetryInterface");g(c$,"getUnitCellState",function(){return null==this.unitCell?"":this.unitCell.getState()});g(c$,"getMoreInfo",function(){return this.unitCell.moreInfo});
d(c$,"getUnitsymmetryInfo",function(){return this.unitCell.dumpInfo(!1)});g(c$,"initializeOrientation",function(a){this.unitCell.initOrientation(a)},"JU.M3");g(c$,"unitize",function(a){this.unitCell.unitize(a)},"JU.T3");g(c$,"toUnitCell",function(a,b){this.unitCell.toUnitCell(a,b)},"JU.T3,JU.T3");g(c$,"toSupercell",function(a){return this.unitCell.toSupercell(a)},"JU.P3");d(c$,"toFractional",function(a,b){this.$isBio||this.unitCell.toFractional(a,b)},"JU.T3,~B");g(c$,"toFractionalM",function(a){this.$isBio||
this.unitCell.toFractionalM(a)},"JU.M4");g(c$,"toCartesian",function(a,b){this.$isBio||this.unitCell.toCartesian(a,b)},"JU.T3,~B");g(c$,"getUnitCellParams",function(){return this.unitCell.getUnitCellParams()});g(c$,"getUnitCellAsArray",function(a){return this.unitCell.getUnitCellAsArray(a)},"~B");g(c$,"getTensor",function(a,b){if(null==b)return null;null==this.unitCell&&(this.unitCell=JS.UnitCell.fromParams(t(-1,[1,1,1,90,90,90]),!0));return this.unitCell.getTensor(a,b)},"JV.Viewer,~A");g(c$,"getUnitCellVerticesNoOffset",
function(){return this.unitCell.getVertices()});g(c$,"getCartesianOffset",function(){return this.unitCell.getCartesianOffset()});g(c$,"getFractionalOffset",function(){return this.unitCell.getFractionalOffset()});g(c$,"setOffsetPt",function(a){this.unitCell.setOffset(a)},"JU.T3");g(c$,"setOffset",function(a){var b=new JU.P3;JU.SimpleUnitCell.ijkToPoint3f(a,b,0,0);this.unitCell.setOffset(b)},"~N");g(c$,"getUnitCellMultiplier",function(){return this.unitCell.getUnitCellMultiplier()});g(c$,"getCanonicalCopy",
function(a,b){return this.unitCell.getCanonicalCopy(a,b)},"~N,~B");g(c$,"getUnitCellInfoType",function(a){return this.unitCell.getInfo(a)},"~N");g(c$,"getUnitCellInfo",function(){return this.unitCell.dumpInfo(!1)});g(c$,"isSlab",function(){return this.unitCell.isSlab()});g(c$,"isPolymer",function(){return this.unitCell.isPolymer()});g(c$,"checkDistance",function(a,b,c,e,h,f,d,p){return this.unitCell.checkDistance(a,b,c,e,h,f,d,p)},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");g(c$,"getUnitCellVectors",function(){return this.unitCell.getUnitCellVectors()});
g(c$,"getUnitCell",function(a,b,c){if(null==a)return null;this.unitCell=JS.UnitCell.fromOABC(a,b);null!=c&&(this.unitCell.name=c);return this},"~A,~B,~S");g(c$,"isSupercell",function(){return this.unitCell.isSupercell()});g(c$,"notInCentroid",function(a,b,c){try{var e=new JU.BS,h=b.nextSetBit(0),f=a.getMolecules(),d=f.length,p=a.at,j=f[d-1].firstAtomIndex==a.am[p[h].mi].firstAtomIndex,k=new JU.P3,g=1==c[6];a=d;a:for(;0<=--a&&b.get(f[a].firstAtomIndex);){var l=f[a].atomList;k.set(0,0,0);for(var h=
0,m=l.nextSetBit(0);0<=m;m=l.nextSetBit(m+1))if(j||g)if(k.setT(p[m]),this.isNotCentroid(k,1,c,g))j&&e.set(m);else{if(!j)continue a}else k.add(p[m]),h++;(g||0<h&&this.isNotCentroid(k,h,c,!1))&&e.or(l)}return e}catch(q){if(O(q,Exception))return null;throw q;}},"JM.ModelSet,JU.BS,~A");d(c$,"isNotCentroid",function(a,b,c,e){a.scale(1/b);this.toFractional(a,!1);return e?a.x+5E-6<=c[0]||a.x-5E-6>c[3]||a.y+5E-6<=c[1]||a.y-5E-6>c[4]||a.z+5E-6<=c[2]||a.z-5E-6>c[5]:a.x+5E-6<=c[0]||a.x+5E-5>c[3]||a.y+5E-6<=
c[1]||a.y+5E-5>c[4]||a.z+5E-6<=c[2]||a.z+5E-5>c[5]},"JU.P3,~N,~A,~B");d(c$,"getDesc",function(a){return(null==this.desc?this.desc=J.api.Interface.getInterface("JS.SymmetryDesc",a.vwr,"eval"):this.desc).set(a)},"JM.ModelSet");g(c$,"getSymmetryInfoAtom",function(a,b,c,e,h,f,d,g,j,k,n){return this.getDesc(a).getSymopInfo(b,c,e,h,f,d,g,j,k,n)},"JM.ModelSet,~N,~S,~N,JU.P3,JU.P3,~S,~N,~N,~N,~N");g(c$,"getSpaceGroupInfo",function(a,b,c,e){var h=null==b;if(null==b){var f=a.getModelAuxiliaryInfo(a.vwr.am.cmi);
null!=f&&(b=f.get("spaceGroup"))}return this.getDesc(a).getSpaceGroupInfo(this,c,b,0,null,null,null,0,-1,e,h,0)},"JM.ModelSet,~S,~N,~B");g(c$,"fcoord",function(a){return JS.SymmetryOperation.fcoord(a)},"JU.T3");g(c$,"getV0abc",function(a){return null==this.unitCell?null:this.unitCell.getV0abc(a)},"~O");g(c$,"getQuaternionRotation",function(a){return null==this.unitCell?null:this.unitCell.getQuaternionRotation(a)},"~S");g(c$,"getFractionalOrigin",function(){return this.unitCell.getFractionalOrigin()});
g(c$,"getState",function(a){var b=this.getFractionalOffset(),c=!1;if(null!=b&&(0!=b.x||0!=b.y||0!=b.z))a.append("; set unitcell ").append(JU.Escape.eP(b)),c=!0;b=this.getUnitCellMultiplier();null!=b&&(a.append("; set unitcell ").append(JU.SimpleUnitCell.escapeMultiplier(b)),c=!0);return c},"JU.SB");g(c$,"getIterator",function(a,b,c,e,h){return J.api.Interface.getInterface("JS.UnitCellIterator",a,"script").set(this,b,c,e,h)},"JV.Viewer,JM.Atom,~A,JU.BS,~N");g(c$,"toFromPrimitive",function(a,b,c,e){null==
this.unitCell&&(this.unitCell=JS.UnitCell.fromOABC(c,!1));return this.unitCell.toFromPrimitive(a,b,c,e)},"~B,~S,~A,JU.M3");g(c$,"generateCrystalClass",function(a){var b=this.getSymmetryOperations(),c=new JU.Lst,e=null==a,h=0,f=0,d=0;e?(h=2.718281828459045,f=3.141592653589793,d=Math.log10(2E3),a=JU.P3.new3(h+1,f+2,d+3)):a=JU.P3.newP(a);if(null==b||null==this.unitCell)c.addLast(a);else{this.unitCell.toFractional(a,!0);var g=null,j=null,k=null;e&&(g=JU.P3.new3(f+4,d+5,h+6),this.unitCell.toFractional(g,
!0),j=JU.P3.new3(d+7,h+8,f+9),this.unitCell.toFractional(j,!0));var h=new J.bspt.Bspt(3,0),f=h.allocateCubeIterator(),d=new JU.P3,n=b.length;a:for(;0<=--n;){b[n].rotate2(a,d);f.initialize(d,0.001,!1);if(f.hasMoreElements())continue a;k=JU.P3.newP(d);c.addLast(k);h.addTuple(k);e&&(null!=j&&(k=new JU.P3,b[n].rotate2(j,k),c.addLast(k)),null!=g&&(k=new JU.P3,b[n].rotate2(g,k),c.addLast(k)))}for(a=c.size();0<=--a;)this.unitCell.toCartesian(c.get(a),!0)}return c},"JU.P3");g(c$,"calculateCIPChiralityForAtoms",
function(a,b){a.setCursor(3);var c=this.getCIPChirality(a),e=a.getBoolean(603979960)?"CIPData":"CIPDataTracker",e=J.api.Interface.getInterface("JS."+e,a,"script").set(a,b);e.setRule6Full(a.getBoolean(603979823));c.getChiralityForAtoms(e);a.setCursor(0)},"JV.Viewer,JU.BS");g(c$,"calculateCIPChiralityForSmiles",function(a,b){a.setCursor(3);var c=this.getCIPChirality(a),e=J.api.Interface.getInterface("JS.CIPDataSmiles",a,"script").setAtomsForSmiles(a,b);c.getChiralityForAtoms(e);a.setCursor(0);return e.getSmilesChiralityArray()},
"JV.Viewer,~S");d(c$,"getCIPChirality",function(a){return null==this.cip?this.cip=J.api.Interface.getInterface("JS.CIPChirality",a,"script"):this.cip},"JV.Viewer");g(c$,"getConventionalUnitCell",function(a,b){return null==this.unitCell||null==a?null:this.unitCell.getConventionalUnitCell(a,b)},"~S,JU.M3");g(c$,"getUnitCellInfoMap",function(){return null==this.unitCell?null:this.unitCell.getInfo()});d(c$,"setUnitCell",function(a){this.unitCell=JS.UnitCell.cloneUnitCell(a.unitCell)},"JS.Symmetry")});
x("JS");K(["JU.V3"],"JS.PointGroup","java.lang.Float java.util.Hashtable JU.Lst $.P3 $.PT $.Quat $.SB J.bspt.Bspt JU.BSUtil $.Escape $.Logger $.Node $.Point3fi".split(" "),function(){c$=M(function(){this.isAtoms=!1;this.iter=this.textInfo=this.info=this.drawInfo=null;this.drawType="";this.drawIndex=0;this.scale=NaN;this.axes=this.nAxes=null;this.radius=this.nAtoms=0;this.distanceTolerance=0.25;this.distanceTolerance2=0;this.linearTolerance=8;this.cosTolerance=0.99;this.name="C_1?";this.vTemp=this.principalPlane=
this.principalAxis=null;this.centerAtomIndex=-1;this.haveInversionCenter=!1;this.bsAtoms=this.atomMap=this.elements=this.points=this.center=null;this.localEnvOnly=this.haveVibration=!1;this.maxElement=0;this.eCounts=null;this.nOps=0;fa("JS.PointGroup.Operation")||JS.PointGroup.$PointGroup$Operation$();A(this,arguments)},JS,"PointGroup");T(c$,function(){this.nAxes=N(JS.PointGroup.maxAxis,0);this.axes=Array(JS.PointGroup.maxAxis);this.vTemp=new JU.V3});d(c$,"getName",function(){return this.name});c$.getPointGroup=
d(c$,"getPointGroup",function(a,b,c,e,h,f,d,g){var j=new JS.PointGroup;0==f&&(f=0.01,d=0.5);j.distanceTolerance=f;j.distanceTolerance2=f*f;j.linearTolerance=d;j.isAtoms=null!=e;j.bsAtoms=j.isAtoms?e:JU.BSUtil.newBitSet2(0,c.length);j.haveVibration=h;j.center=b;j.localEnvOnly=g;return j.set(a,c)?j:a},"JS.PointGroup,JU.T3,~A,JU.BS,~B,~N,~N,~B");F(c$,function(){});d(c$,"isEqual",function(a){if(null==a||(this.linearTolerance!=a.linearTolerance||this.distanceTolerance!=a.distanceTolerance||this.nAtoms!=
a.nAtoms||this.localEnvOnly!=a.localEnvOnly||this.haveVibration!=a.haveVibration||null==this.bsAtoms?null!=a.bsAtoms:!this.bsAtoms.equals(a.bsAtoms)))return!1;for(var b=0;b<this.nAtoms;b++)if(this.elements[b]!=a.elements[b]||!this.points[b].equals(a.points[b]))return!1;return!0},"JS.PointGroup");d(c$,"set",function(a,b){this.cosTolerance=Math.cos(3.141592653589793*(this.linearTolerance/180));if(!this.getPointsAndElements(b))return JU.Logger.error("Too many atoms for point group calculation"),this.name=
"point group not determined -- ac > 100 -- select fewer atoms and try again.",!0;this.getElementCounts();if(this.haveVibration){for(var c=Array(this.points.length),e=this.points.length;0<=--e;){c[e]=JU.P3.newP(this.points[e]);var h=this.points[e].getVibrationVector();null!=h&&c[e].add(h)}this.points=c}if(this.isEqual(a))return!1;this.findInversionCenter();if(this.isLinear(this.points))return this.name=this.haveInversionCenter?"D(infinity)h":"C(infinity)v",this.vTemp.sub2(this.points[1],this.points[0]),
this.addAxis(16,this.vTemp),this.principalAxis=this.axes[16][0],this.haveInversionCenter&&(this.axes[0]=Array(1),this.principalPlane=this.axes[0][this.nAxes[0]++]=Y(JS.PointGroup.Operation,this,null,this.vTemp)),!0;this.axes[0]=Array(15);c=0;this.findCAxes();c=this.findPlanes();this.findAdditionalAxes(c);try{var f=this.getHighestOrder();if(1<this.nAxes[17])this.name=1<this.nAxes[19]?this.haveInversionCenter?"Ih":"I":1<this.nAxes[18]?this.haveInversionCenter?"Oh":"O":0<c?this.haveInversionCenter?"Th":
"Td":"T";else if(2>f){if(1==c)return this.name="Cs",!0;if(this.haveInversionCenter)return this.name="Ci",!0;this.name="C1"}else 1==f%2&&0<this.nAxes[16]||0==f%2&&1<this.nAxes[16]?(this.principalAxis=this.setPrincipalAxis(f,c),0==c?this.name=14>f?"S"+f:"D"+(f-14):(f=14>f?v(f/2):f-14,this.name=c==f?"D"+f+"d":"D"+f+"h")):0==c?(this.principalAxis=this.axes[f][0],this.name=14>f?"S"+f:"C"+(f-14)):c==f-14?(this.principalAxis=this.axes[f][0],this.name="C"+c+"v"):(this.principalAxis=this.axes[14>f?f+14:f][0],
this.principalPlane=this.axes[0][0],this.name="C"+(14>f?f/2:f-14)+"h")}catch(d){if(O(d,Exception))this.name="??";else throw d;}JU.Logger.info("Point group found: "+this.name);return!0},"JS.PointGroup,~A");d(c$,"setPrincipalAxis",function(a,b){var c=this.setPrincipalPlane(a,b);if(0==b&&14>a||1==this.nAxes[a])return 0<b&&14>a&&(a=14+v(a/2)),this.axes[a][0];if(null==c)return null;for(var e=0;e<this.nAxes[16];e++)if(this.isParallel(c.normalOrAxis,this.axes[16][e].normalOrAxis))return 0!=e&&(c=this.axes[16][0],
this.axes[16][0]=this.axes[16][e],this.axes[16][e]=c),this.axes[16][0];return null},"~N,~N");d(c$,"setPrincipalPlane",function(a,b){if(1==b)return this.principalPlane=this.axes[0][0];if(0==b||b==a-14)return null;for(var c=0;c<b;c++)for(var e=0,h=0;e<b;e++)if(this.isPerpendicular(this.axes[0][c].normalOrAxis,this.axes[0][e].normalOrAxis)&&2<++h)return 0!=c&&(e=this.axes[0][0],this.axes[0][0]=this.axes[0][c],this.axes[0][c]=e),this.principalPlane=this.axes[0][0];return null},"~N,~N");d(c$,"getPointsAndElements",
function(a){var b=this.bsAtoms.cardinality();if(this.isAtoms&&100<b)return!1;this.points=Array(b);this.elements=N(b,0);if(0==b)return!0;for(var c=0,b=this.bsAtoms.nextSetBit(0);0<=b;b=this.bsAtoms.nextSetBit(b+1)){var e=a[b];y(e,JU.Node)&&(c=Math.max(c,e.i))}this.atomMap=N(c+1,0);this.nAtoms=0;if(c=null==this.center)this.center=new JU.P3;for(var h=new J.bspt.Bspt(3,0),b=this.bsAtoms.nextSetBit(0);0<=b;b=this.bsAtoms.nextSetBit(b+1),this.nAtoms++){e=this.points[this.nAtoms]=a[b];if(y(e,JU.Node)){var f=
this.localEnvOnly?1:1+Math.max(3,e.getCovalentBondCount());this.elements[this.nAtoms]=e.getElementNumber()*f;this.atomMap[e.i]=this.nAtoms+1}else y(e,JU.Point3fi)?this.elements[this.nAtoms]=Math.max(0,e.sD):(f=new JU.Point3fi,f.setT(e),f.i=this.nAtoms,e=f);h.addTuple(e);c&&this.center.add(this.points[this.nAtoms])}this.iter=h.allocateCubeIterator();c&&this.center.scale(1/this.nAtoms);for(b=this.nAtoms;0<=--b;)a=this.center.distanceSquared(this.points[b]),this.isAtoms&&a<this.distanceTolerance2&&(this.centerAtomIndex=
b),this.radius=Math.max(this.radius,a);this.radius=Math.sqrt(this.radius);1.5>this.radius&&0.15<this.distanceTolerance&&(this.distanceTolerance=this.radius/10,this.distanceTolerance2=this.distanceTolerance*this.distanceTolerance,System.out.println("PointGroup calculation adjusting distanceTolerance to "+this.distanceTolerance));return!0},"~A");d(c$,"findInversionCenter",function(){if(this.haveInversionCenter=this.checkOperation(null,this.center,-1))this.axes[1]=Array(1),this.axes[1][0]=Y(JS.PointGroup.Operation,
this,null)});d(c$,"checkOperation",function(a,b,c){var e=new JU.P3,h=0;c=14>c;var f=this.points.length;a:for(;0<=--f&&h<this.points.length;)if(f!=this.centerAtomIndex){var d=this.points[f],g=this.elements[f];null!=a?(e.sub2(d,b),a.transform2(e,e).add(b)):e.setT(d);c&&(this.vTemp.sub2(b,e),e.scaleAdd2(2,this.vTemp,e));if((null!=a||c)&&e.distanceSquared(d)<this.distanceTolerance2)h++;else{for(this.iter.initialize(e,this.distanceTolerance,!1);this.iter.hasMoreElements();){var j=this.iter.nextElement();
if(j!==d){var k=this.getPointIndex(j.i);if(!(0<=this.centerAtomIndex&&k==this.centerAtomIndex||this.elements[k]!=g)&&e.distanceSquared(j)<this.distanceTolerance2){h++;continue a}}}return!1}}return!0},"JU.Quat,JU.T3,~N");d(c$,"getPointIndex",function(a){return a<this.atomMap.length&&0<this.atomMap[a]?this.atomMap[a]-1:a},"~N");d(c$,"isLinear",function(a){var b=null;if(2>a.length)return!1;for(var c=a.length;0<=--c;)if(c!=this.centerAtomIndex)if(null==b)b=new JU.V3,b.sub2(a[c],this.center),b.normalize(),
this.vTemp.setT(b);else if(this.vTemp.sub2(a[c],this.center),this.vTemp.normalize(),!this.isParallel(b,this.vTemp))return!1;return!0},"~A");d(c$,"isParallel",function(a,b){return Math.abs(a.dot(b))>=this.cosTolerance},"JU.V3,JU.V3");d(c$,"isPerpendicular",function(a,b){return Math.abs(a.dot(b))<=1-this.cosTolerance},"JU.V3,JU.V3");d(c$,"getElementCounts",function(){for(var a=this.points.length;0<=--a;){var b=this.elements[a];b>this.maxElement&&(this.maxElement=b)}this.eCounts=N(++this.maxElement,
0);for(a=this.points.length;0<=--a;)this.eCounts[this.elements[a]]++});d(c$,"findCAxes",function(){for(var a=new JU.V3,b=new JU.V3,c=new JU.V3,e=this.points.length;0<=--e;)if(e!=this.centerAtomIndex)for(var h=this.points[e],f=this.elements[e],d=this.points.length;--d>e;){var g=this.points[d];if(this.elements[d]==f)if(a.sub2(h,this.center),b.sub2(g,this.center),a.normalize(),b.normalize(),this.isParallel(a,b))this.getAllAxes(a);else{this.nAxes[16]<JS.PointGroup.axesMaxN[16]&&(c.ave(h,g),c.sub(this.center),
this.getAllAxes(c));var g=6.283185307179586/a.angle(b),j=v(Math.floor(g+0.01));if(0.02>=g-j&&!((j+=14)>=JS.PointGroup.maxAxis)&&this.nAxes[j]<JS.PointGroup.axesMaxN[j])c.cross(a,b),this.checkAxisOrder(j,c,this.center)}}h=Array(2*this.nAxes[16]);for(e=0;e<h.length;e++)h[e]=new JU.V3;for(e=d=0;e<this.nAxes[16];e++)h[d++].setT(this.axes[16][e].normalOrAxis),h[d].setT(this.axes[16][e].normalOrAxis),h[d++].scale(-1);for(e=h.length;2<=--e;)for(d=e;1<=--d;)for(f=d;0<=--f;)c.add2(h[e],h[d]),c.add(h[f]),1>
c.length()||this.checkAxisOrder(17,c,this.center);d=2147483647;h=-1;for(e=0;e<this.maxElement;e++)this.eCounts[e]<d&&2<this.eCounts[e]&&(d=this.eCounts[e],h=e);e=0;a:for(;e<this.points.length-2;e++)if(this.elements[e]==h)for(d=e+1;d<this.points.length-1;d++)if(this.elements[d]==h)for(f=d+1;f<this.points.length;f++)if(this.elements[f]==h&&(a.sub2(this.points[e],this.points[d]),b.sub2(this.points[e],this.points[f]),a.normalize(),b.normalize(),c.cross(a,b),this.getAllAxes(c),a.add2(this.points[e],this.points[d]),
a.add(this.points[f]),a.normalize(),this.isParallel(a,c)||this.getAllAxes(a),this.nAxes[19]==JS.PointGroup.axesMaxN[19]))break a;h=Array(this.maxElement);for(e=this.points.length;0<=--e;){f=this.elements[e];if(null==h[f])h[f]=new JU.V3;else if(this.haveInversionCenter)continue;h[f].add(this.points[e])}if(!this.haveInversionCenter)for(e=0;e<this.maxElement;e++)null!=h[e]&&h[e].scale(1/this.eCounts[e]);for(e=0;e<this.maxElement;e++)if(null!=h[e])for(d=0;d<this.maxElement;d++)e==d||null==h[d]||(this.haveInversionCenter?
a.cross(h[e],h[d]):a.sub2(h[e],h[d]),this.checkAxisOrder(16,a,this.center));return this.getHighestOrder()});d(c$,"getAllAxes",function(a){for(var b=16;b<JS.PointGroup.maxAxis;b++)this.nAxes[b]<JS.PointGroup.axesMaxN[b]&&this.checkAxisOrder(b,a,this.center)},"JU.V3");d(c$,"getHighestOrder",function(){for(var a=0,a=14;1<--a&&0==this.nAxes[a];);if(1<a)return a+14<JS.PointGroup.maxAxis&&0<this.nAxes[a+14]?a+14:a;for(a=JS.PointGroup.maxAxis;1<--a&&0==this.nAxes[a];);return a});d(c$,"checkAxisOrder",function(a,
b,c){switch(a){case 22:if(0<this.nAxes[17])return!1;case 20:case 18:if(0<this.nAxes[19])return!1;break;case 17:if(0<this.nAxes[22])return!1;break;case 19:if(0<this.nAxes[18]||0<this.nAxes[20]||0<this.nAxes[22])return!1}b.normalize();if(this.haveAxis(a,b))return!1;var e=JU.Quat.newVA(b,(14>a?180:0)+v(360/(a%14)));if(!this.checkOperation(e,c,a))return!1;this.addAxis(a,b);switch(a){case 16:this.checkAxisOrder(4,b,c);break;case 17:this.checkAxisOrder(3,b,c);this.haveInversionCenter&&this.addAxis(6,b);
break;case 18:this.addAxis(16,b);this.checkAxisOrder(4,b,c);this.checkAxisOrder(8,b,c);break;case 19:this.checkAxisOrder(5,b,c);this.haveInversionCenter&&this.addAxis(10,b);break;case 20:this.addAxis(16,b);this.addAxis(17,b);this.checkAxisOrder(3,b,c);this.checkAxisOrder(6,b,c);this.checkAxisOrder(12,b,c);break;case 22:this.addAxis(16,b),this.addAxis(18,b)}return!0},"~N,JU.V3,JU.T3");d(c$,"addAxis",function(a,b){this.haveAxis(a,b)||(null==this.axes[a]&&(this.axes[a]=Array(JS.PointGroup.axesMaxN[a])),
this.axes[a][this.nAxes[a]++]=Y(JS.PointGroup.Operation,this,null,b,a))},"~N,JU.V3");d(c$,"haveAxis",function(a,b){if(this.nAxes[a]==JS.PointGroup.axesMaxN[a])return!0;if(0<this.nAxes[a])for(var c=this.nAxes[a];0<=--c;)if(this.isParallel(b,this.axes[a][c].normalOrAxis))return!0;return!1},"~N,JU.V3");d(c$,"findPlanes",function(){for(var a=new JU.P3,b=new JU.V3,c=new JU.V3,e=new JU.V3,h=0,f=1<this.getHighestOrder(),d=this.points.length;0<=--d;)if(d!=this.centerAtomIndex)for(var g=this.points[d],j=this.elements[d],
k=this.points.length;--k>d;)if(!(f&&this.elements[k]!=j)&&(h=this.points[k],a.add2(g,h),a.scale(0.5),b.sub2(g,this.center),c.sub2(h,this.center),this.isParallel(b,c)||(e.cross(b,c),e.normalize(),this.getPlane(e)),e.sub2(h,g),e.normalize(),h=this.getPlane(e),h==JS.PointGroup.axesMaxN[0]))return h;if(f)for(d=16;d<JS.PointGroup.maxAxis;d++)for(k=0;k<this.nAxes[d];k++)h=this.getPlane(this.axes[d][k].normalOrAxis);return h});d(c$,"getPlane",function(a){!this.haveAxis(0,a)&&this.checkOperation(JU.Quat.newVA(a,
180),this.center,-1)&&(this.axes[0][this.nAxes[0]++]=Y(JS.PointGroup.Operation,this,null,a));return this.nAxes[0]},"JU.V3");d(c$,"findAdditionalAxes",function(a){var b=this.axes[0],c=0;if(1<a&&(c=a+14)<JS.PointGroup.maxAxis&&0==this.nAxes[c])this.vTemp.cross(b[0].normalOrAxis,b[1].normalOrAxis),!this.checkAxisOrder(c,this.vTemp,this.center)&&2<a&&(this.vTemp.cross(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(c-1,this.vTemp,this.center));if(0==this.nAxes[16]&&2<a)for(c=0;c<a-1;c++)for(var e=
c+1;e<a;e++)this.vTemp.add2(b[1].normalOrAxis,b[2].normalOrAxis),this.checkAxisOrder(16,this.vTemp,this.center)},"~N");d(c$,"getInfo",function(a,b,c,e,h,f){var d=null!=b;this.info=c?new java.util.Hashtable:null;var g=new JU.V3,j;0==f&&(f=1);this.scale=f;for(var k=N(4,2,0),n=1;n<JS.PointGroup.maxAxis;n++)for(var l=this.nAxes[n];0<=--l;)k[this.axes[n][l].type][0]++;var m=(new JU.SB).append("# ").appendI(this.nAtoms).append(" atoms\n");if(d){b="draw "+b;this.drawType=e=(c=null!=e&&0<e.length)?e:"";this.drawIndex=
h;var d=e.equalsIgnoreCase("Cn"),q=e.equalsIgnoreCase("Sn");m.append("set perspectivedepth off;\n");var s="_"+a+"_";c||m.append(b+"pg0").append(s).append("* delete;draw pgva").append(s).append("* delete;draw pgvp").append(s).append("* delete;");if(!c||e.equalsIgnoreCase("Ci"))m.append(b+"pg0").append(s).append(this.haveInversionCenter?"inv ":" ").append(JU.Escape.eP(this.center)).append(this.haveInversionCenter?'"i";\n':";\n");for(var u=0.1,n=2;n<JS.PointGroup.maxAxis;n++)if(14==n&&(u=0.1),0!=this.nAxes[n]){a=
this.axes[n][0].getLabel();var u=u+0.25,t=f*this.radius+u;if(!c||e.equalsIgnoreCase(a)||d&&14<=n||q&&14>n)for(l=0;l<this.nAxes[n];l++)if(!(0<h&&l+1!=h)){j=this.axes[n][l];g.add2(j.normalOrAxis,this.center);2==j.type&&(t=-t);m.append(b+"pgva").append(s).append(a).append("_").appendI(l+1).append(" width 0.05 scale ").appendF(t).append(" ").append(JU.Escape.eP(g));g.scaleAdd2(-2,j.normalOrAxis,g);var r=null!=this.principalAxis&&j.index==this.principalAxis.index;m.append(JU.Escape.eP(g)).append('"').append(a).append(r?
"*":"").append('" color ').append(r?"red":2==j.type?"blue":"orange").append(";\n")}}if(!c||e.equalsIgnoreCase("Cs"))for(l=0;l<this.nAxes[0];l++)0<h&&l+1!=h||(j=this.axes[0][l],m.append(b+"pgvp").append(s).appendI(l+1).append("disk scale ").appendF(2*f*this.radius).append(" CIRCLE PLANE ").append(JU.Escape.eP(this.center)),g.add2(j.normalOrAxis,this.center),m.append(JU.Escape.eP(g)).append(" color translucent yellow;\n"),g.add2(j.normalOrAxis,this.center),m.append(b+"pgvp").append(s).appendI(l+1).append("ring width 0.05 scale ").appendF(2*
f*this.radius).append(" arc ").append(JU.Escape.eP(g)),g.scaleAdd2(-2,j.normalOrAxis,g),m.append(JU.Escape.eP(g)),g.add3(0.011,0.012,0.013),m.append(JU.Escape.eP(g)).append("{0 360 0.5} color ").append(null!=this.principalPlane&&j.index==this.principalPlane.index?"red":"blue").append(";\n"));m.append("# name=").append(this.name);m.append(", nCi=").appendI(this.haveInversionCenter?1:0);m.append(", nCs=").appendI(this.nAxes[0]);m.append(", nCn=").appendI(k[1][0]);m.append(", nSn=").appendI(k[2][0]);
m.append(": ");for(n=JS.PointGroup.maxAxis;2<=--n;)0<this.nAxes[n]&&(m.append(" n").append(14>n?"S":"C").appendI(n%14),m.append("=").appendI(this.nAxes[n]));m.append(";\n");m.append("print '"+this.name+"';\n");this.drawInfo=m.toString();JU.Logger.debugging&&JU.Logger.info(this.drawInfo);return this.drawInfo}l=0;b=1;n=this.haveInversionCenter?"Ci":"center";this.haveInversionCenter&&b++;c?this.info.put(n,this.center):m.append("\n\n").append(this.name).append("\t").append(n).append("\t").append(JU.Escape.eP(this.center));
for(n=JS.PointGroup.maxAxis;0<=--n;)if(0<this.nAxes[n]){l=JS.PointGroup.nUnique[n];a=this.axes[n][0].getLabel();c?this.info.put("n"+a,Integer.$valueOf(this.nAxes[n])):m.append("\n\n").append(this.name).append("\tn").append(a).append("\t").appendI(this.nAxes[n]).append("\t").appendI(l);l*=this.nAxes[n];b+=l;k[this.axes[n][0].type][1]+=l;e=c?new JU.Lst:null;for(l=0;l<this.nAxes[n];l++)c?e.addLast(this.axes[n][l].normalOrAxis):m.append("\n").append(this.name).append("\t").append(a).append("_").appendI(l+
1).append("\t").appendO(this.axes[n][l].normalOrAxis);c&&this.info.put(a,e)}if(!c)return m.append("\n"),m.append("\n").append(this.name).append("\ttype\tnType\tnUnique"),m.append("\n").append(this.name).append("\tE\t  1\t  1"),l=this.haveInversionCenter?1:0,m.append("\n").append(this.name).append("\tCi\t  ").appendI(l).append("\t  ").appendI(l),m.append("\n").append(this.name).append("\tCs\t"),JU.PT.rightJustify(m,"    ",this.nAxes[0]+"\t"),JU.PT.rightJustify(m,"    ",this.nAxes[0]+"\n"),m.append(this.name).append("\tCn\t"),
JU.PT.rightJustify(m,"    ",k[1][0]+"\t"),JU.PT.rightJustify(m,"    ",k[1][1]+"\n"),m.append(this.name).append("\tSn\t"),JU.PT.rightJustify(m,"    ",k[2][0]+"\t"),JU.PT.rightJustify(m,"    ",k[2][1]+"\n"),m.append(this.name).append("\t\tTOTAL\t"),JU.PT.rightJustify(m,"    ",b+"\n"),this.textInfo=m.toString();this.info.put("name",this.name);this.info.put("nAtoms",Integer.$valueOf(this.nAtoms));this.info.put("nTotal",Integer.$valueOf(b));this.info.put("nCi",Integer.$valueOf(this.haveInversionCenter?
1:0));this.info.put("nCs",Integer.$valueOf(this.nAxes[0]));this.info.put("nCn",Integer.$valueOf(k[1][0]));this.info.put("nSn",Integer.$valueOf(k[2][0]));this.info.put("distanceTolerance",Float.$valueOf(this.distanceTolerance));this.info.put("linearTolerance",Float.$valueOf(this.linearTolerance));this.info.put("points",this.points);this.info.put("detail",m.toString().$replace("\n",";"));null!=this.principalAxis&&0<this.principalAxis.index&&this.info.put("principalAxis",this.principalAxis.normalOrAxis);
null!=this.principalPlane&&0<this.principalPlane.index&&this.info.put("principalPlane",this.principalPlane.normalOrAxis);return this.info},"~N,~S,~B,~S,~N,~N");d(c$,"isDrawType",function(a,b,c){return null!=this.drawInfo&&this.drawType.equals(null==a?"":a)&&this.drawIndex==b&&this.scale==c},"~S,~N,~N");c$.$PointGroup$Operation$=function(){ea(self.c$);c$=M(function(){ga(this,arguments);this.index=this.order=this.type=0;this.normalOrAxis=null;A(this,arguments)},JS.PointGroup,"Operation");F(c$,function(){this.index=
++this.b$["JS.PointGroup"].nOps;this.type=3;this.order=1;JU.Logger.debugging&&JU.Logger.debug("new operation -- "+JS.PointGroup.typeNames[this.type])});F(c$,function(a,b){this.index=++this.b$["JS.PointGroup"].nOps;this.type=14>b?2:1;this.order=b%14;this.normalOrAxis=JU.Quat.newVA(a,180).getNormal();JU.Logger.debugging&&JU.Logger.debug("new operation -- "+(this.order==b?"S":"C")+this.order+" "+this.normalOrAxis)},"JU.V3,~N");F(c$,function(a){null!=a&&(this.index=++this.b$["JS.PointGroup"].nOps,this.type=
0,this.normalOrAxis=JU.Quat.newVA(a,180).getNormal(),JU.Logger.debugging&&JU.Logger.debug("new operation -- plane "+this.normalOrAxis))},"JU.V3");d(c$,"getLabel",function(){switch(this.type){case 0:return"Cs";case 2:return"S"+this.order;default:return"C"+this.order}});c$=da()};G(c$,"axesMaxN",N(-1,[15,0,0,1,3,1,10,0,1,0,6,0,1,0,0,0,15,10,6,6,10,0,1]),"nUnique",N(-1,[1,0,0,2,2,4,2,0,4,0,4,0,4,0,0,0,1,2,2,4,2,0,4]),"s3",3,"s4",4,"s5",5,"s6",6,"s8",8,"s10",10,"s12",12,"firstProper",14,"c2",16,"c3",17,
"c4",18,"c5",19,"c6",20,"c8",22);c$.maxAxis=c$.prototype.maxAxis=JS.PointGroup.axesMaxN.length;G(c$,"ATOM_COUNT_MAX",100,"OPERATION_PLANE",0,"OPERATION_PROPER_AXIS",1,"OPERATION_IMPROPER_AXIS",2,"OPERATION_INVERSION_CENTER",3,"typeNames",D(-1,["plane","proper axis","improper axis","center of inversion"]))});x("JS");K(["java.util.Hashtable"],"JS.SpaceGroup","java.util.Arrays JU.AU $.Lst $.M4 $.P3 $.PT $.SB JS.HallInfo $.HallTranslation $.SymmetryOperation JU.Logger".split(" "),function(){c$=M(function(){this.index=
0;this.isSSG=!1;this.name="unknown!";this.hmSymbolAbbrShort=this.hmSymbolAlternative=this.hmSymbolAbbr=this.hmSymbolExt=this.hmSymbolFull=this.hmSymbol=this.crystalClass=this.hallSymbol=null;this.axisChoice=this.uniqueAxis=this.ambiguityType="\x00";this.hallInfo=this.intlTableNumberExt=this.intlTableNumberFull=this.intlTableNumber=null;this.latticeParameter=0;this.finalOperations=this.operations=null;this.operationCount=0;this.latticeOp=-1;this.xyzList=null;this.modDim=0;this.doNormalize=!0;this.isBilbao=
this.isBio=!1;this.latticeType="P";this.info=this.nHallOperators=null;A(this,arguments)},JS,"SpaceGroup");c$.getNull=d(c$,"getNull",function(a,b,c){JS.SpaceGroup.getSpaceGroups();a=new JS.SpaceGroup(-1,null,a);a.doNormalize=b;c&&a.setFinalOperations(null,0,0,!1);return a},"~B,~B,~B");F(c$,function(a,b,c){++JS.SpaceGroup.sgIndex;0>a&&(a=JS.SpaceGroup.sgIndex);this.index=a;this.init(c&&null==b);c&&null!=b&&this.buildSpaceGroup(b)},"~N,~S,~B");d(c$,"init",function(a){this.xyzList=new java.util.Hashtable;
this.operationCount=0;a&&this.addSymmetry("x,y,z",0,!1)},"~B");c$.createSpaceGroup=d(c$,"createSpaceGroup",function(a,b,c,e){var h=null;0<=a?h=JS.SpaceGroup.getSpaceGroups()[a]:(h=y(c,JU.Lst)?JS.SpaceGroup.createSGFromList(b,c):JS.SpaceGroup.determineSpaceGroupNA(b,c),null==h&&(h=JS.SpaceGroup.createSpaceGroupN(0>=e?b:"x1,x2,x3,x4,x5,x6,x7,x8,x9".substring(0,3*e+8))));null!=h&&h.generateAllOperators(null);return h},"~N,~S,~O,~N");c$.createSGFromList=d(c$,"createSGFromList",function(a,b){var c=new JS.SpaceGroup(-1,
"0;0;--;--;--",!0);c.doNormalize=!1;c.name=a;for(var e=b.size(),h=0;h<e;h++){var f=b.get(h);if(y(f,JS.SymmetryOperation)){var d=c.addOp(f,f.xyz,!1);c.operations[d].setTimeReversal(f.timeReversal)}else c.addSymmetrySM("xyz matrix:"+f,f)}e=c.getDerivedSpaceGroup();null!=e&&(c=e);return c},"~S,JU.Lst");d(c$,"addSymmetry",function(a,b,c){a=a.toLowerCase();return 0>a.indexOf("[[")&&0>a.indexOf("x4")&&0>a.indexOf(";")&&(0>a.indexOf("x")||0>a.indexOf("y")||0>a.indexOf("z"))?-1:this.addOperation(a,b,c)},
"~S,~N,~B");d(c$,"setFinalOperations",function(a,b,c,e){if(null==this.hallInfo&&0!=this.latticeParameter){var h=new JS.HallInfo(JS.HallTranslation.getHallLatticeEquivalent(this.latticeParameter));this.generateAllOperators(h)}this.finalOperations=null;this.isBio=0<=this.name.indexOf("bio");this.index>=JS.SpaceGroup.getSpaceGroups().length&&(!this.isBio&&0>this.name.indexOf("SSG:")&&0>this.name.indexOf("[subsystem"))&&(h=this.getDerivedSpaceGroup(),null!=h&&(this.name=h.getName(),this.latticeType=h.latticeType,
this.intlTableNumber=h.intlTableNumber));this.finalOperations=Array(this.operationCount);if(e&&0<c&&null!=a){this.finalOperations[0]=new JS.SymmetryOperation(this.operations[0],a,b,c,!0);var h=a[b],f=JU.P3.newP(h);this.finalOperations[0].rotTrans(f);if(1E-4<f.distance(h))for(var d=0;d<c;d++)h=a[b+d],f.setT(h),this.finalOperations[0].rotTrans(f),h.setT(f)}for(d=0;d<this.operationCount;d++)this.finalOperations[d]=new JS.SymmetryOperation(this.operations[d],a,b,c,e),this.finalOperations[d].getCentering()},
"~A,~N,~N,~B");d(c$,"getOperationCount",function(){return this.finalOperations.length});d(c$,"getOperation",function(a){return this.finalOperations[a]},"~N");d(c$,"getXyz",function(a,b){return null==this.finalOperations?this.operations[a].getXyz(b):this.finalOperations[a].getXyz(b)},"~N,~B");d(c$,"newPoint",function(a,b,c,e,h,f){JS.SymmetryOperation.newPoint(this.finalOperations[a],b,c,e,h,f)},"~N,JU.P3,JU.P3,~N,~N,~N");c$.getInfo=d(c$,"getInfo",function(a,b,c,e){if(null!=c){if(null==a){0<=b.indexOf("[")&&
(b=b.substring(0,b.indexOf("[")).trim());if(b.equals("unspecified!"))return"no space group identified in file";a=JS.SpaceGroup.determineSpaceGroupNA(b,c.getUnitCellParams())}}else{if(b.equalsIgnoreCase("ALL"))return JS.SpaceGroup.dumpAll();if(b.equalsIgnoreCase("ALLSEITZ"))return JS.SpaceGroup.dumpAllSeitz();a=JS.SpaceGroup.determineSpaceGroupN(b);if(null==a)a=JS.SpaceGroup.createSpaceGroupN(b);else{for(c=new JU.SB;null!=a;)c.append(a.dumpInfo()),a=JS.SpaceGroup.determineSpaceGroupNS(b,a);return c.toString()}}var h;
try{h=e?null==a?null:a.getInfo(c):null==a?"?":a.dumpInfo()}catch(f){if(O(f,Exception))h=null;else throw f;}return h},"JS.SpaceGroup,~S,J.api.SymmetryInterface,~B");d(c$,"getInfo",function(a){if(null==this.info){if(null==this.hmSymbol||null==this.hmSymbolExt)this.info=new java.util.Hashtable,this.info.put("HMSymbol","??");else{var b=this.dumpCanonicalSeitzList();this.info.put("SeitzList",null==b?"":b);this.info.put("HMSymbol",0<this.hmSymbolExt.length?":"+this.hmSymbolExt:"");this.info.put("ITSNumber",
Integer.$valueOf(this.intlTableNumber));this.info.put("ITSNumberFull",this.intlTableNumberFull);this.info.put("crystalClass",this.crystalClass);this.info.put("HallSymbol",this.hallInfo.hallSymbol.equals("--")?"":this.hallInfo.hallSymbol)}this.info.put("operationCount",Integer.$valueOf(this.operationCount));b=new JU.Lst;this.info.put("operationInfo",b);for(var c=0;c<this.operationCount;c++)b.addLast(this.operations[c].getInfo())}a=null==a?null:a.getUnitCellInfoMap();null!=a&&this.info.put("unitCell",
a);return this.info},"J.api.SymmetryInterface");d(c$,"dumpInfo",function(){var a=this.dumpCanonicalSeitzList();if(y(a,JS.SpaceGroup))return a.dumpInfo();var b=(new JU.SB).append("\nHermann-Mauguin symbol: ");null==this.hmSymbol||null==this.hmSymbolExt?b.append("?"):b.append(this.hmSymbol).append(0<this.hmSymbolExt.length?":"+this.hmSymbolExt:"");null!=this.intlTableNumber&&b.append("\ninternational table number: ").append(this.intlTableNumber).append(0<this.intlTableNumberExt.length?":"+this.intlTableNumberExt:
"").append("\ncrystal class: "+this.crystalClass).append("\n\n").appendI(this.operationCount).append(" operators").append(!this.hallInfo.hallSymbol.equals("--")?" from Hall symbol "+this.hallInfo.hallSymbol+"  #"+this.intlTableNumberFull:"").append(": ");for(var c=0;c<this.operationCount;c++)b.append("\n").append(this.operations[c].xyz);b.append("\n\n").append(null==this.hallInfo?"Hall symbol unknown":this.hallInfo.dumpInfo());b.append("\n\ncanonical Seitz: ").append(a).append("\n----------------------------------------------------\n");
return b.toString()});d(c$,"getName",function(){return this.name});d(c$,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation(this.latticeParameter)});d(c$,"setLatticeParam",function(a){this.latticeParameter=a;10<a&&(this.latticeParameter=-JS.HallTranslation.getLatticeIndex(JS.HallTranslation.getLatticeCode(a)))},"~N");d(c$,"dumpCanonicalSeitzList",function(){null!=this.nHallOperators&&(null==this.hallInfo&&(this.hallInfo=new JS.HallInfo(this.hallSymbol)),this.generateAllOperators(null));
var a=this.getCanonicalSeitzList();if(this.index>=JS.SpaceGroup.SG.length){var b=JS.SpaceGroup.findSpaceGroup(this.operationCount,a);if(null!=b)return b}return(0<=this.index&&this.index<JS.SpaceGroup.SG.length?this.hallSymbol+" = ":"")+a});d(c$,"getDerivedSpaceGroup",function(){if(0<=this.index&&this.index<JS.SpaceGroup.SG.length||0<this.modDim||null==this.operations||0==this.operations.length||0!=this.operations[0].timeReversal)return this;null!=this.finalOperations&&this.setFinalOperations(null,
0,0,!1);var a=this.getCanonicalSeitzList();return null==a?null:JS.SpaceGroup.findSpaceGroup(this.operationCount,a)});d(c$,"getCanonicalSeitzList",function(){for(var a=Array(this.operationCount),b=0;b<this.operationCount;b++)a[b]=JS.SymmetryOperation.dumpSeitz(this.operations[b],!0);java.util.Arrays.sort(a,0,this.operationCount);for(var c=(new JU.SB).append("\n["),b=0;b<this.operationCount;b++)c.append(a[b].$replace("\t"," ").$replace("\n"," ")).append("; ");c.append("]");return c.toString()});c$.findSpaceGroup=
d(c$,"findSpaceGroup",function(a,b){JS.SpaceGroup.getSpaceGroups();var c=JS.SpaceGroup.htByOpCount.get(Integer.$valueOf(a));if(null!=c)for(var e=0,h=c.size();e<h;e++){var f=c.get(e);if(0<=JS.SpaceGroup.getCanonicalSeitz(f.index).indexOf(b))return JS.SpaceGroup.SG[f.index]}return null},"~N,~S");c$.dumpAll=d(c$,"dumpAll",function(){var a=new JU.SB;JS.SpaceGroup.getSpaceGroups();for(var b=0;b<JS.SpaceGroup.SG.length;b++)a.append("\n----------------------\n"+JS.SpaceGroup.SG[b].dumpInfo());return a.toString()});
c$.dumpAllSeitz=d(c$,"dumpAllSeitz",function(){JS.SpaceGroup.getSpaceGroups();for(var a=new JU.SB,b=0;b<JS.SpaceGroup.SG.length;b++)a.append("\n").appendO(JS.SpaceGroup.getCanonicalSeitz(b));return a.toString()});c$.getCanonicalSeitz=d(c$,"getCanonicalSeitz",function(a){null==JS.SpaceGroup.canonicalSeitzList&&(JS.SpaceGroup.canonicalSeitzList=Array(JS.SpaceGroup.SG.length));var b=JS.SpaceGroup.canonicalSeitzList[a];return null==b?JS.SpaceGroup.canonicalSeitzList[a]=JS.SpaceGroup.SG[a].dumpCanonicalSeitzList().toString():
b},"~N");d(c$,"setLattice",function(a,b){this.latticeParameter=JS.HallTranslation.getLatticeIndex(a);b||(this.latticeParameter=-this.latticeParameter)},"~S,~B");c$.createSpaceGroupN=d(c$,"createSpaceGroupN",function(a){JS.SpaceGroup.getSpaceGroups();a=a.trim();var b=JS.SpaceGroup.determineSpaceGroupN(a),c;null==b&&(c=new JS.HallInfo(a),0<c.nRotations?(b=new JS.SpaceGroup(-1,"0;0;--;--;"+a,!0),b.hallInfo=c):0<=a.indexOf(",")&&(b=new JS.SpaceGroup(-1,"0;0;--;--;--",!0),b.doNormalize=!1,b.generateOperatorsFromXyzInfo(a)));
null!=b&&b.generateAllOperators(null);return b},"~S");d(c$,"addOperation",function(a,b,c){if(null==a||3>a.length)return this.init(!1),-1;var e="="==a.charAt(0);e&&(a=a.substring(1));var h=this.checkXYZlist(a);if(0<=h)return h;if(a.startsWith("x1,x2,x3,x4")&&0==this.modDim)this.xyzList.clear(),this.operationCount=0,this.modDim=JU.PT.parseInt(a.substring(a.lastIndexOf("x")+1))-3;else if(0<=a.indexOf("m")&&(a=JU.PT.rep(a,"+m","m"),a.equals("x,y,z,m")||a.equals("x,y,z(mx,my,mz)")))this.xyzList.clear(),
this.operationCount=0;b=new JS.SymmetryOperation(null,null,0,b,this.doNormalize);return!b.setMatrixFromXYZ(a,this.modDim,c)?(JU.Logger.error("couldn't interpret symmetry operation: "+a),-1):this.addOp(b,a,e)},"~S,~N,~B");d(c$,"checkXYZlist",function(a){return this.xyzList.containsKey(a)?this.xyzList.get(a).intValue():-1},"~S");d(c$,"addOp",function(a,b,c){var e=a.xyz;if(!c){c=this.checkXYZlist(e);if(0<=c)return c;0>this.latticeOp&&(c=JU.PT.replaceAllCharacters(0<this.modDim?JS.SymmetryOperation.replaceXn(e,
this.modDim+3):e,"+123/",""),this.xyzList.containsKey(c+"!")?this.latticeOp=this.operationCount:this.xyzList.put(c+"!",Integer.$valueOf(this.operationCount)));this.xyzList.put(e,Integer.$valueOf(this.operationCount))}e.equals(b)||this.xyzList.put(b,Integer.$valueOf(this.operationCount));null==this.operations&&(this.operations=Array(4));this.operationCount==this.operations.length&&(this.operations=JU.AU.arrayCopyObject(this.operations,2*this.operationCount));this.operations[this.operationCount++]=
a;a.index=this.operationCount;0!=a.timeReversal&&(this.operations[0].timeReversal=1);JU.Logger.debugging&&JU.Logger.debug("\naddOperation "+this.operationCount+a.dumpInfo());return this.operationCount-1},"JS.SymmetryOperation,~S,~B");d(c$,"generateOperatorsFromXyzInfo",function(a){this.init(!0);a=JU.PT.split(a.toLowerCase(),";");for(var b=0;b<a.length;b++)this.addSymmetry(a[b],0,!1)},"~S");d(c$,"generateAllOperators",function(a){if(null==a){if(0<this.operationCount)return;a=this.hallInfo;this.operations=
Array(4);if(null==this.hallInfo||0==this.hallInfo.nRotations)a=this.hallInfo=new JS.HallInfo(this.hallSymbol);this.setLattice(this.hallInfo.latticeCode,this.hallInfo.isCentrosymmetric);this.init(!0)}switch(a.latticeCode){case "\x00":case "S":case "T":case "P":this.latticeType="P";break;default:this.latticeType=""+a.latticeCode}for(var b=new JU.M4,c=new JU.M4,e=Array(7),h=0;7>h;h++)e[h]=new JU.M4;for(h=0;h<a.nRotations;h++){var f=a.rotationTerms[h];b.setM4(f.seitzMatrix12ths);f=f.order;e[0].setIdentity();
for(var d=this.operationCount,g=1;g<=f;g++){var j=e[g];j.mul2(b,e[0]);e[0].setM4(j);for(var k=0;k<d;k++){c.mul2(j,this.operations[k]);c.m03=(q(c.m03)+12)%12;c.m13=(q(c.m13)+12)%12;c.m23=(q(c.m23)+12)%12;var n=JS.SymmetryOperation.getXYZFromMatrix(c,!0,!0,!0);this.addSymmetrySM(n,c)}}}null!=this.nHallOperators&&this.operationCount!=this.nHallOperators.intValue()&&JU.Logger.error("Operator mismatch "+this.operationCount+" for "+this)},"JS.HallInfo");d(c$,"addSymmetrySM",function(a,b){var c=this.addOperation(a,
0,!1);0<=c&&this.operations[c].setM4(b);return c},"~S,JU.M4");c$.determineSpaceGroupN=d(c$,"determineSpaceGroupN",function(a){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1)},"~S");c$.determineSpaceGroupNS=d(c$,"determineSpaceGroupNS",function(a,b){return JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,b.index)},"~S,JS.SpaceGroup");c$.determineSpaceGroupNA=d(c$,"determineSpaceGroupNA",function(a,b){return null==b?JS.SpaceGroup.determineSpaceGroup(a,0,0,0,0,0,0,-1):JS.SpaceGroup.determineSpaceGroup(a,
b[0],b[1],b[2],b[3],b[4],b[5],-1)},"~S,~A");c$.determineSpaceGroup=d(c$,"determineSpaceGroup",function(a,b,c,e,h,f,d,g){a=JS.SpaceGroup.determineSpaceGroupIndex(a,b,c,e,h,f,d,g);return 0<=a?JS.SpaceGroup.SG[a]:null},"~S,~N,~N,~N,~N,~N,~N,~N");c$.determineSpaceGroupIndex=d(c$,"determineSpaceGroupIndex",function(a,b,c,e,d,f,g,p){JS.SpaceGroup.getSpaceGroups();0>p&&(p=JS.SpaceGroup.SG.length);a=a.trim().toLowerCase();var j=!1;a.startsWith("bilbao:")&&(j=!0,a=a.substring(7));var k=a.startsWith("hall:")?
5:a.startsWith("hm:")?3:0;switch(k){case 3:case 5:a=a.substring(k);break;case 0:a.contains("[")&&(k=5,a=a.substring(0,a.indexOf("[")).trim())}var n=a,l,m=!1;a=a.$replace("_"," ");2<=a.length&&(l=0==a.indexOf("-")?2:1,l<a.length&&" "!=a.charAt(l)&&(a=a.substring(0,l)+" "+a.substring(l)),a=JS.SpaceGroup.toCap(a,2));var q="";if(0<(l=a.indexOf(":")))q=a.substring(l+1),a=a.substring(0,l).trim(),m=!0;5!=k&&(!m&&JU.PT.isOneOf(a,JS.SpaceGroup.ambiguousNames))&&(q="?",m=!0);var s=JU.PT.replaceAllCharacters(a,
" ()",""),u;if(3!=k&&!m)for(l=p;0<=--l;)if(JS.SpaceGroup.SG[l].hallSymbol.equalsIgnoreCase(a))return l;if(5!=k){if(3!=k)for(l=p;0<=--l;)if(JS.SpaceGroup.SG[l].intlTableNumberFull.equalsIgnoreCase(n))return l;for(l=p;0<=--l;)if(JS.SpaceGroup.SG[l].hmSymbolFull.equalsIgnoreCase(n))return l;for(l=p;0<=--l;)if(null!=(u=JS.SpaceGroup.SG[l]).hmSymbolAlternative&&u.hmSymbolAlternative.equalsIgnoreCase(n))return l;if(m){for(l=p;0<=--l;)if((u=JS.SpaceGroup.SG[l]).hmSymbolAbbr.equalsIgnoreCase(s)&&u.intlTableNumberExt.equalsIgnoreCase(q))return l;
for(l=p;0<=--l;)if((u=JS.SpaceGroup.SG[l]).hmSymbolAbbrShort.equalsIgnoreCase(s)&&u.intlTableNumberExt.equalsIgnoreCase(q))return l}a=JS.SpaceGroup.determineUniqueAxis(b,c,e,d,f,g);if(!m||"?"==q.charAt(0))for(l=0;l<p;l++)if(((u=JS.SpaceGroup.SG[l]).hmSymbolAbbr.equalsIgnoreCase(s)||u.hmSymbolAbbrShort.equalsIgnoreCase(s))&&(!j||u.isBilbao))switch(u.ambiguityType){case "\x00":return l;case "a":if(u.uniqueAxis==a||"\x00"==a)return l;break;case "o":if(0==q.length){if(u.hmSymbolExt.equals("2"))return l}else if(u.hmSymbolExt.equalsIgnoreCase(q))return l;
break;case "t":if(0==q.length){if("h"==u.axisChoice)return l}else if((u.axisChoice+"").equalsIgnoreCase(q))return l}}if(0==q.length)for(l=0;l<p;l++)if((u=JS.SpaceGroup.SG[l]).intlTableNumber.equals(n)&&(!j||u.isBilbao))return l;return-1},"~S,~N,~N,~N,~N,~N,~N,~N");c$.determineUniqueAxis=d(c$,"determineUniqueAxis",function(a,b,c,e,d,f){return a==b?b==c?"\x00":"c":b==c?"a":c==a?"b":e==d?d==f?"\x00":"c":d==f?"a":f==e?"b":"\x00"},"~N,~N,~N,~N,~N,~N");d(c$,"buildSpaceGroup",function(a){a=JU.PT.split(a.toLowerCase(),
";");this.intlTableNumberFull=a[0].trim();this.isBilbao=6>a.length&&!this.intlTableNumberFull.equals("0");var b=JU.PT.split(this.intlTableNumberFull,":");this.intlTableNumber=b[0];this.intlTableNumberExt=1==b.length?"":b[1];this.ambiguityType="\x00";0<this.intlTableNumberExt.length&&(this.intlTableNumberExt.equals("h")||this.intlTableNumberExt.equals("r")?(this.ambiguityType="t",this.axisChoice=this.intlTableNumberExt.charAt(0)):this.intlTableNumberExt.startsWith("1")||this.intlTableNumberExt.startsWith("2")?
this.ambiguityType="o":2>=this.intlTableNumberExt.length?(this.ambiguityType="a",this.uniqueAxis=this.intlTableNumberExt.charAt(0)):this.intlTableNumberExt.contains("-")&&(this.ambiguityType="-"));a[1].equals("0")||(this.nHallOperators=Integer.$valueOf(a[1]),b=JS.SpaceGroup.htByOpCount.get(this.nHallOperators),null==b&&JS.SpaceGroup.htByOpCount.put(this.nHallOperators,b=new JU.Lst),b.addLast(this));this.crystalClass=JS.SpaceGroup.toCap(JU.PT.split(a[2],"^")[0],1);this.setHMSymbol(a[3]);this.hallSymbol=
a[4];1<this.hallSymbol.length&&(this.hallSymbol=JS.SpaceGroup.toCap(this.hallSymbol,2));a=this.intlTableNumber+this.hallSymbol;"0"!=this.intlTableNumber.charAt(0)&&JS.SpaceGroup.lastInfo.equals(a)&&(JS.SpaceGroup.ambiguousNames+=this.hmSymbol+";");JS.SpaceGroup.lastInfo=a;this.name=this.hallSymbol+" ["+this.hmSymbolFull+"] #"+this.intlTableNumber},"~S");d(c$,"setHMSymbol",function(a){this.hmSymbolFull=JS.SpaceGroup.toCap(a,1);this.latticeType=this.hmSymbolFull.substring(0,1);a=JU.PT.split(this.hmSymbolFull,
":");this.hmSymbol=a[0];this.hmSymbolExt=1==a.length?"":a[1];a=this.hmSymbol.indexOf(" -3");1<=a&&0<="admn".indexOf(this.hmSymbol.charAt(a-1))&&(this.hmSymbolAlternative=(this.hmSymbol.substring(0,a)+" 3"+this.hmSymbol.substring(a+3)).toLowerCase());this.hmSymbolAbbr=JU.PT.rep(this.hmSymbol," ","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbol," 1","");this.hmSymbolAbbrShort=JU.PT.rep(this.hmSymbolAbbrShort," ","")},"~S");c$.toCap=d(c$,"toCap",function(a,b){return a.substring(0,b).toUpperCase()+
a.substring(b)},"~S,~N");d(c$,"toString",function(){return""+this.intlTableNumberFull+"["+this.index+","+this.nHallOperators+"] "+this.hmSymbolFull+" "+this.hallSymbol});c$.getSpaceGroups=d(c$,"getSpaceGroups",function(){return null==JS.SpaceGroup.SG?JS.SpaceGroup.SG=JS.SpaceGroup.createSpaceGroups():JS.SpaceGroup.SG});c$.createSpaceGroups=d(c$,"createSpaceGroups",function(){for(var a=JS.SpaceGroup.STR_SG.length,b=Array(a),c=0;c<a;c++)b[c]=new JS.SpaceGroup(c,JS.SpaceGroup.STR_SG[c],!0);JS.SpaceGroup.STR_SG=
null;return b});d(c$,"addLatticeVectors",function(a){if(0<=this.latticeOp||0==a.size())return!1;for(var b=this.latticeOp=this.operationCount,c=a.get(0).length==this.modDim+4,e=-2,d=0;d<a.size();d++){var f=a.get(d);c&&(e=q(f[this.modDim+3]),f=JU.AU.arrayCopyF(f,this.modDim+3));if(f.length>this.modDim+3)return!1;for(var g=0;g<b;g++){var p=new JS.SymmetryOperation(null,null,0,0,!0);p.modDim=this.modDim;var j=this.operations[g];p.linearRotTrans=JU.AU.arrayCopyF(j.linearRotTrans,-1);p.setFromMatrix(f,
!1);-2!=e&&p.setTimeReversal(j.timeReversal*e);p.xyzOriginal=p.xyz;this.addOp(p,p.xyz,!0)}}return!0},"JU.Lst");d(c$,"getSiteMultiplicity",function(a,b){for(var c=this.finalOperations.length,e=new JU.Lst,d=c;0<=--d;){var f=JU.P3.newP(a);this.finalOperations[d].rotTrans(f);b.unitize(f);for(var g=e.size();0<=--g;){var p=e.get(g);if(1E-6>f.distanceSquared(p)){f=null;break}}null!=f&&e.addLast(f)}return v(c/e.size())},"JU.P3,JS.UnitCell");d(c$,"setName",function(a){this.name=a;null!=a&&a.startsWith("HM:")&&
this.setHMSymbol(a.substring(3))},"~S");G(c$,"canonicalSeitzList",null,"NAME_UNK",0,"NAME_HM",3,"NAME_HALL",5,"sgIndex",-1,"ambiguousNames","","lastInfo","","SG",null);c$.htByOpCount=c$.prototype.htByOpCount=new java.util.Hashtable;G(c$,"STR_SG",D(-1,'1;1;c1^1;p 1;p 1,2;2;ci^1;p -1;-p 1,3:b;2;c2^1;p 1 2 1;p 2y,3:b;2;c2^1;p 2;p 2y,3:c;2;c2^1;p 1 1 2;p 2,3:a;2;c2^1;p 2 1 1;p 2x,4:b;2;c2^2;p 1 21 1;p 2yb,4:b;2;c2^2;p 21;p 2yb,4:b*;2;c2^2;p 1 21 1*;p 2y1,4:c;2;c2^2;p 1 1 21;p 2c,4:c*;2;c2^2;p 1 1 21*;p 21,4:a;2;c2^2;p 21 1 1;p 2xa,4:a*;2;c2^2;p 21 1 1*;p 2x1,5:b1;4;c2^3;c 1 2 1;c 2y,5:b1;4;c2^3;c 2;c 2y,5:b2;4;c2^3;a 1 2 1;a 2y,5:b3;4;c2^3;i 1 2 1;i 2y,5:c1;4;c2^3;a 1 1 2;a 2,5:c2;4;c2^3;b 1 1 2;b 2,5:c3;4;c2^3;i 1 1 2;i 2,5:a1;4;c2^3;b 2 1 1;b 2x,5:a2;4;c2^3;c 2 1 1;c 2x,5:a3;4;c2^3;i 2 1 1;i 2x,6:b;2;cs^1;p 1 m 1;p -2y,6:b;2;cs^1;p m;p -2y,6:c;2;cs^1;p 1 1 m;p -2,6:a;2;cs^1;p m 1 1;p -2x,7:b1;2;cs^2;p 1 c 1;p -2yc,7:b1;2;cs^2;p c;p -2yc,7:b2;2;cs^2;p 1 n 1;p -2yac,7:b2;2;cs^2;p n;p -2yac,7:b3;2;cs^2;p 1 a 1;p -2ya,7:b3;2;cs^2;p a;p -2ya,7:c1;2;cs^2;p 1 1 a;p -2a,7:c2;2;cs^2;p 1 1 n;p -2ab,7:c3;2;cs^2;p 1 1 b;p -2b,7:a1;2;cs^2;p b 1 1;p -2xb,7:a2;2;cs^2;p n 1 1;p -2xbc,7:a3;2;cs^2;p c 1 1;p -2xc,8:b1;4;cs^3;c 1 m 1;c -2y,8:b1;4;cs^3;c m;c -2y,8:b2;4;cs^3;a 1 m 1;a -2y,8:b3;4;cs^3;i 1 m 1;i -2y,8:b3;4;cs^3;i m;i -2y,8:c1;4;cs^3;a 1 1 m;a -2,8:c2;4;cs^3;b 1 1 m;b -2,8:c3;4;cs^3;i 1 1 m;i -2,8:a1;4;cs^3;b m 1 1;b -2x,8:a2;4;cs^3;c m 1 1;c -2x,8:a3;4;cs^3;i m 1 1;i -2x,9:b1;4;cs^4;c 1 c 1;c -2yc,9:b1;4;cs^4;c c;c -2yc,9:b2;4;cs^4;a 1 n 1;a -2yab,9:b3;4;cs^4;i 1 a 1;i -2ya,9:-b1;4;cs^4;a 1 a 1;a -2ya,9:-b2;4;cs^4;c 1 n 1;c -2yac,9:-b3;4;cs^4;i 1 c 1;i -2yc,9:c1;4;cs^4;a 1 1 a;a -2a,9:c2;4;cs^4;b 1 1 n;b -2ab,9:c3;4;cs^4;i 1 1 b;i -2b,9:-c1;4;cs^4;b 1 1 b;b -2b,9:-c2;4;cs^4;a 1 1 n;a -2ab,9:-c3;4;cs^4;i 1 1 a;i -2a,9:a1;4;cs^4;b b 1 1;b -2xb,9:a2;4;cs^4;c n 1 1;c -2xac,9:a3;4;cs^4;i c 1 1;i -2xc,9:-a1;4;cs^4;c c 1 1;c -2xc,9:-a2;4;cs^4;b n 1 1;b -2xab,9:-a3;4;cs^4;i b 1 1;i -2xb,10:b;4;c2h^1;p 1 2/m 1;-p 2y,10:b;4;c2h^1;p 2/m;-p 2y,10:c;4;c2h^1;p 1 1 2/m;-p 2,10:a;4;c2h^1;p 2/m 1 1;-p 2x,11:b;4;c2h^2;p 1 21/m 1;-p 2yb,11:b;4;c2h^2;p 21/m;-p 2yb,11:b*;4;c2h^2;p 1 21/m 1*;-p 2y1,11:c;4;c2h^2;p 1 1 21/m;-p 2c,11:c*;4;c2h^2;p 1 1 21/m*;-p 21,11:a;4;c2h^2;p 21/m 1 1;-p 2xa,11:a*;4;c2h^2;p 21/m 1 1*;-p 2x1,12:b1;8;c2h^3;c 1 2/m 1;-c 2y,12:b1;8;c2h^3;c 2/m;-c 2y,12:b2;8;c2h^3;a 1 2/m 1;-a 2y,12:b3;8;c2h^3;i 1 2/m 1;-i 2y,12:b3;8;c2h^3;i 2/m;-i 2y,12:c1;8;c2h^3;a 1 1 2/m;-a 2,12:c2;8;c2h^3;b 1 1 2/m;-b 2,12:c3;8;c2h^3;i 1 1 2/m;-i 2,12:a1;8;c2h^3;b 2/m 1 1;-b 2x,12:a2;8;c2h^3;c 2/m 1 1;-c 2x,12:a3;8;c2h^3;i 2/m 1 1;-i 2x,13:b1;4;c2h^4;p 1 2/c 1;-p 2yc,13:b1;4;c2h^4;p 2/c;-p 2yc,13:b2;4;c2h^4;p 1 2/n 1;-p 2yac,13:b2;4;c2h^4;p 2/n;-p 2yac,13:b3;4;c2h^4;p 1 2/a 1;-p 2ya,13:b3;4;c2h^4;p 2/a;-p 2ya,13:c1;4;c2h^4;p 1 1 2/a;-p 2a,13:c2;4;c2h^4;p 1 1 2/n;-p 2ab,13:c3;4;c2h^4;p 1 1 2/b;-p 2b,13:a1;4;c2h^4;p 2/b 1 1;-p 2xb,13:a2;4;c2h^4;p 2/n 1 1;-p 2xbc,13:a3;4;c2h^4;p 2/c 1 1;-p 2xc,14:b1;4;c2h^5;p 1 21/c 1;-p 2ybc,14:b1;4;c2h^5;p 21/c;-p 2ybc,14:b2;4;c2h^5;p 1 21/n 1;-p 2yn,14:b2;4;c2h^5;p 21/n;-p 2yn,14:b3;4;c2h^5;p 1 21/a 1;-p 2yab,14:b3;4;c2h^5;p 21/a;-p 2yab,14:c1;4;c2h^5;p 1 1 21/a;-p 2ac,14:c2;4;c2h^5;p 1 1 21/n;-p 2n,14:c3;4;c2h^5;p 1 1 21/b;-p 2bc,14:a1;4;c2h^5;p 21/b 1 1;-p 2xab,14:a2;4;c2h^5;p 21/n 1 1;-p 2xn,14:a3;4;c2h^5;p 21/c 1 1;-p 2xac,15:b1;8;c2h^6;c 1 2/c 1;-c 2yc,15:b1;8;c2h^6;c 2/c;-c 2yc,15:b2;8;c2h^6;a 1 2/n 1;-a 2yab,15:b3;8;c2h^6;i 1 2/a 1;-i 2ya,15:b3;8;c2h^6;i 2/a;-i 2ya,15:-b1;8;c2h^6;a 1 2/a 1;-a 2ya,15:-b2;8;c2h^6;c 1 2/n 1;-c 2yac,15:-b2;8;c2h^6;c 2/n;-c 2yac,15:-b3;8;c2h^6;i 1 2/c 1;-i 2yc,15:-b3;8;c2h^6;i 2/c;-i 2yc,15:c1;8;c2h^6;a 1 1 2/a;-a 2a,15:c2;8;c2h^6;b 1 1 2/n;-b 2ab,15:c3;8;c2h^6;i 1 1 2/b;-i 2b,15:-c1;8;c2h^6;b 1 1 2/b;-b 2b,15:-c2;8;c2h^6;a 1 1 2/n;-a 2ab,15:-c3;8;c2h^6;i 1 1 2/a;-i 2a,15:a1;8;c2h^6;b 2/b 1 1;-b 2xb,15:a2;8;c2h^6;c 2/n 1 1;-c 2xac,15:a3;8;c2h^6;i 2/c 1 1;-i 2xc,15:-a1;8;c2h^6;c 2/c 1 1;-c 2xc,15:-a2;8;c2h^6;b 2/n 1 1;-b 2xab,15:-a3;8;c2h^6;i 2/b 1 1;-i 2xb,16;4;d2^1;p 2 2 2;p 2 2,17;4;d2^2;p 2 2 21;p 2c 2,17*;4;d2^2;p 2 2 21*;p 21 2,17:cab;4;d2^2;p 21 2 2;p 2a 2a,17:bca;4;d2^2;p 2 21 2;p 2 2b,18;4;d2^3;p 21 21 2;p 2 2ab,18:cab;4;d2^3;p 2 21 21;p 2bc 2,18:bca;4;d2^3;p 21 2 21;p 2ac 2ac,19;4;d2^4;p 21 21 21;p 2ac 2ab,20;8;d2^5;c 2 2 21;c 2c 2,20*;8;d2^5;c 2 2 21*;c 21 2,20:cab;8;d2^5;a 21 2 2;a 2a 2a,20:cab*;8;d2^5;a 21 2 2*;a 2a 21,20:bca;8;d2^5;b 2 21 2;b 2 2b,21;8;d2^6;c 2 2 2;c 2 2,21:cab;8;d2^6;a 2 2 2;a 2 2,21:bca;8;d2^6;b 2 2 2;b 2 2,22;16;d2^7;f 2 2 2;f 2 2,23;8;d2^8;i 2 2 2;i 2 2,24;8;d2^9;i 21 21 21;i 2b 2c,25;4;c2v^1;p m m 2;p 2 -2,25:cab;4;c2v^1;p 2 m m;p -2 2,25:bca;4;c2v^1;p m 2 m;p -2 -2,26;4;c2v^2;p m c 21;p 2c -2,26*;4;c2v^2;p m c 21*;p 21 -2,26:ba-c;4;c2v^2;p c m 21;p 2c -2c,26:ba-c*;4;c2v^2;p c m 21*;p 21 -2c,26:cab;4;c2v^2;p 21 m a;p -2a 2a,26:-cba;4;c2v^2;p 21 a m;p -2 2a,26:bca;4;c2v^2;p b 21 m;p -2 -2b,26:a-cb;4;c2v^2;p m 21 b;p -2b -2,27;4;c2v^3;p c c 2;p 2 -2c,27:cab;4;c2v^3;p 2 a a;p -2a 2,27:bca;4;c2v^3;p b 2 b;p -2b -2b,28;4;c2v^4;p m a 2;p 2 -2a,28*;4;c2v^4;p m a 2*;p 2 -21,28:ba-c;4;c2v^4;p b m 2;p 2 -2b,28:cab;4;c2v^4;p 2 m b;p -2b 2,28:-cba;4;c2v^4;p 2 c m;p -2c 2,28:-cba*;4;c2v^4;p 2 c m*;p -21 2,28:bca;4;c2v^4;p c 2 m;p -2c -2c,28:a-cb;4;c2v^4;p m 2 a;p -2a -2a,29;4;c2v^5;p c a 21;p 2c -2ac,29:ba-c;4;c2v^5;p b c 21;p 2c -2b,29:cab;4;c2v^5;p 21 a b;p -2b 2a,29:-cba;4;c2v^5;p 21 c a;p -2ac 2a,29:bca;4;c2v^5;p c 21 b;p -2bc -2c,29:a-cb;4;c2v^5;p b 21 a;p -2a -2ab,30;4;c2v^6;p n c 2;p 2 -2bc,30:ba-c;4;c2v^6;p c n 2;p 2 -2ac,30:cab;4;c2v^6;p 2 n a;p -2ac 2,30:-cba;4;c2v^6;p 2 a n;p -2ab 2,30:bca;4;c2v^6;p b 2 n;p -2ab -2ab,30:a-cb;4;c2v^6;p n 2 b;p -2bc -2bc,31;4;c2v^7;p m n 21;p 2ac -2,31:ba-c;4;c2v^7;p n m 21;p 2bc -2bc,31:cab;4;c2v^7;p 21 m n;p -2ab 2ab,31:-cba;4;c2v^7;p 21 n m;p -2 2ac,31:bca;4;c2v^7;p n 21 m;p -2 -2bc,31:a-cb;4;c2v^7;p m 21 n;p -2ab -2,32;4;c2v^8;p b a 2;p 2 -2ab,32:cab;4;c2v^8;p 2 c b;p -2bc 2,32:bca;4;c2v^8;p c 2 a;p -2ac -2ac,33;4;c2v^9;p n a 21;p 2c -2n,33*;4;c2v^9;p n a 21*;p 21 -2n,33:ba-c;4;c2v^9;p b n 21;p 2c -2ab,33:ba-c*;4;c2v^9;p b n 21*;p 21 -2ab,33:cab;4;c2v^9;p 21 n b;p -2bc 2a,33:cab*;4;c2v^9;p 21 n b*;p -2bc 21,33:-cba;4;c2v^9;p 21 c n;p -2n 2a,33:-cba*;4;c2v^9;p 21 c n*;p -2n 21,33:bca;4;c2v^9;p c 21 n;p -2n -2ac,33:a-cb;4;c2v^9;p n 21 a;p -2ac -2n,34;4;c2v^10;p n n 2;p 2 -2n,34:cab;4;c2v^10;p 2 n n;p -2n 2,34:bca;4;c2v^10;p n 2 n;p -2n -2n,35;8;c2v^11;c m m 2;c 2 -2,35:cab;8;c2v^11;a 2 m m;a -2 2,35:bca;8;c2v^11;b m 2 m;b -2 -2,36;8;c2v^12;c m c 21;c 2c -2,36*;8;c2v^12;c m c 21*;c 21 -2,36:ba-c;8;c2v^12;c c m 21;c 2c -2c,36:ba-c*;8;c2v^12;c c m 21*;c 21 -2c,36:cab;8;c2v^12;a 21 m a;a -2a 2a,36:cab*;8;c2v^12;a 21 m a*;a -2a 21,36:-cba;8;c2v^12;a 21 a m;a -2 2a,36:-cba*;8;c2v^12;a 21 a m*;a -2 21,36:bca;8;c2v^12;b b 21 m;b -2 -2b,36:a-cb;8;c2v^12;b m 21 b;b -2b -2,37;8;c2v^13;c c c 2;c 2 -2c,37:cab;8;c2v^13;a 2 a a;a -2a 2,37:bca;8;c2v^13;b b 2 b;b -2b -2b,38;8;c2v^14;a m m 2;a 2 -2,38:ba-c;8;c2v^14;b m m 2;b 2 -2,38:cab;8;c2v^14;b 2 m m;b -2 2,38:-cba;8;c2v^14;c 2 m m;c -2 2,38:bca;8;c2v^14;c m 2 m;c -2 -2,38:a-cb;8;c2v^14;a m 2 m;a -2 -2,39;8;c2v^15;a e m 2;a 2 -2b,39;8;c2v^15;a b m 2;a 2 -2b,39:ba-c;8;c2v^15;b m a 2;b 2 -2a,39:cab;8;c2v^15;b 2 c m;b -2a 2,39:-cba;8;c2v^15;c 2 m b;c -2a 2,39:bca;8;c2v^15;c m 2 a;c -2a -2a,39:a-cb;8;c2v^15;a c 2 m;a -2b -2b,40;8;c2v^16;a m a 2;a 2 -2a,40:ba-c;8;c2v^16;b b m 2;b 2 -2b,40:cab;8;c2v^16;b 2 m b;b -2b 2,40:-cba;8;c2v^16;c 2 c m;c -2c 2,40:bca;8;c2v^16;c c 2 m;c -2c -2c,40:a-cb;8;c2v^16;a m 2 a;a -2a -2a,41;8;c2v^17;a e a 2;a 2 -2ab,41;8;c2v^17;a b a 2;a 2 -2ab;-b,41:ba-c;8;c2v^17;b b a 2;b 2 -2ab,41:cab;8;c2v^17;b 2 c b;b -2ab 2,41:-cba;8;c2v^17;c 2 c b;c -2ac 2,41:bca;8;c2v^17;c c 2 a;c -2ac -2ac,41:a-cb;8;c2v^17;a c 2 a;a -2ab -2ab,42;16;c2v^18;f m m 2;f 2 -2,42:cab;16;c2v^18;f 2 m m;f -2 2,42:bca;16;c2v^18;f m 2 m;f -2 -2,43;16;c2v^19;f d d 2;f 2 -2d,43:cab;16;c2v^19;f 2 d d;f -2d 2,43:bca;16;c2v^19;f d 2 d;f -2d -2d,44;8;c2v^20;i m m 2;i 2 -2,44:cab;8;c2v^20;i 2 m m;i -2 2,44:bca;8;c2v^20;i m 2 m;i -2 -2,45;8;c2v^21;i b a 2;i 2 -2c,45:cab;8;c2v^21;i 2 c b;i -2a 2,45:bca;8;c2v^21;i c 2 a;i -2b -2b,46;8;c2v^22;i m a 2;i 2 -2a,46:ba-c;8;c2v^22;i b m 2;i 2 -2b,46:cab;8;c2v^22;i 2 m b;i -2b 2,46:-cba;8;c2v^22;i 2 c m;i -2c 2,46:bca;8;c2v^22;i c 2 m;i -2c -2c,46:a-cb;8;c2v^22;i m 2 a;i -2a -2a,47;8;d2h^1;p m m m;-p 2 2,48:1;8;d2h^2;p n n n:1;p 2 2 -1n;-b,48:2;8;d2h^2;p n n n:2;-p 2ab 2bc,49;8;d2h^3;p c c m;-p 2 2c,49:cab;8;d2h^3;p m a a;-p 2a 2,49:bca;8;d2h^3;p b m b;-p 2b 2b,50:1;8;d2h^4;p b a n:1;p 2 2 -1ab;-b,50:2;8;d2h^4;p b a n:2;-p 2ab 2b,50:1cab;8;d2h^4;p n c b:1;p 2 2 -1bc,50:2cab;8;d2h^4;p n c b:2;-p 2b 2bc,50:1bca;8;d2h^4;p c n a:1;p 2 2 -1ac,50:2bca;8;d2h^4;p c n a:2;-p 2a 2c,51;8;d2h^5;p m m a;-p 2a 2a,51:ba-c;8;d2h^5;p m m b;-p 2b 2,51:cab;8;d2h^5;p b m m;-p 2 2b,51:-cba;8;d2h^5;p c m m;-p 2c 2c,51:bca;8;d2h^5;p m c m;-p 2c 2,51:a-cb;8;d2h^5;p m a m;-p 2 2a,52;8;d2h^6;p n n a;-p 2a 2bc,52:ba-c;8;d2h^6;p n n b;-p 2b 2n,52:cab;8;d2h^6;p b n n;-p 2n 2b,52:-cba;8;d2h^6;p c n n;-p 2ab 2c,52:bca;8;d2h^6;p n c n;-p 2ab 2n,52:a-cb;8;d2h^6;p n a n;-p 2n 2bc,53;8;d2h^7;p m n a;-p 2ac 2,53:ba-c;8;d2h^7;p n m b;-p 2bc 2bc,53:cab;8;d2h^7;p b m n;-p 2ab 2ab,53:-cba;8;d2h^7;p c n m;-p 2 2ac,53:bca;8;d2h^7;p n c m;-p 2 2bc,53:a-cb;8;d2h^7;p m a n;-p 2ab 2,54;8;d2h^8;p c c a;-p 2a 2ac,54:ba-c;8;d2h^8;p c c b;-p 2b 2c,54:cab;8;d2h^8;p b a a;-p 2a 2b,54:-cba;8;d2h^8;p c a a;-p 2ac 2c,54:bca;8;d2h^8;p b c b;-p 2bc 2b,54:a-cb;8;d2h^8;p b a b;-p 2b 2ab,55;8;d2h^9;p b a m;-p 2 2ab,55:cab;8;d2h^9;p m c b;-p 2bc 2,55:bca;8;d2h^9;p c m a;-p 2ac 2ac,56;8;d2h^10;p c c n;-p 2ab 2ac,56:cab;8;d2h^10;p n a a;-p 2ac 2bc,56:bca;8;d2h^10;p b n b;-p 2bc 2ab,57;8;d2h^11;p b c m;-p 2c 2b,57:ba-c;8;d2h^11;p c a m;-p 2c 2ac,57:cab;8;d2h^11;p m c a;-p 2ac 2a,57:-cba;8;d2h^11;p m a b;-p 2b 2a,57:bca;8;d2h^11;p b m a;-p 2a 2ab,57:a-cb;8;d2h^11;p c m b;-p 2bc 2c,58;8;d2h^12;p n n m;-p 2 2n,58:cab;8;d2h^12;p m n n;-p 2n 2,58:bca;8;d2h^12;p n m n;-p 2n 2n,59:1;8;d2h^13;p m m n:1;p 2 2ab -1ab;-b,59:2;8;d2h^13;p m m n:2;-p 2ab 2a,59:1cab;8;d2h^13;p n m m:1;p 2bc 2 -1bc,59:2cab;8;d2h^13;p n m m:2;-p 2c 2bc,59:1bca;8;d2h^13;p m n m:1;p 2ac 2ac -1ac,59:2bca;8;d2h^13;p m n m:2;-p 2c 2a,60;8;d2h^14;p b c n;-p 2n 2ab,60:ba-c;8;d2h^14;p c a n;-p 2n 2c,60:cab;8;d2h^14;p n c a;-p 2a 2n,60:-cba;8;d2h^14;p n a b;-p 2bc 2n,60:bca;8;d2h^14;p b n a;-p 2ac 2b,60:a-cb;8;d2h^14;p c n b;-p 2b 2ac,61;8;d2h^15;p b c a;-p 2ac 2ab,61:ba-c;8;d2h^15;p c a b;-p 2bc 2ac,62;8;d2h^16;p n m a;-p 2ac 2n,62:ba-c;8;d2h^16;p m n b;-p 2bc 2a,62:cab;8;d2h^16;p b n m;-p 2c 2ab,62:-cba;8;d2h^16;p c m n;-p 2n 2ac,62:bca;8;d2h^16;p m c n;-p 2n 2a,62:a-cb;8;d2h^16;p n a m;-p 2c 2n,63;16;d2h^17;c m c m;-c 2c 2,63:ba-c;16;d2h^17;c c m m;-c 2c 2c,63:cab;16;d2h^17;a m m a;-a 2a 2a,63:-cba;16;d2h^17;a m a m;-a 2 2a,63:bca;16;d2h^17;b b m m;-b 2 2b,63:a-cb;16;d2h^17;b m m b;-b 2b 2,64;16;d2h^18;c m c e;-c 2ac 2,64;16;d2h^18;c m c a;-c 2ac 2,64:ba-c;16;d2h^18;c c m b;-c 2ac 2ac,64:cab;16;d2h^18;a b m a;-a 2ab 2ab,64:-cba;16;d2h^18;a c a m;-a 2 2ab,64:bca;16;d2h^18;b b c m;-b 2 2ab,64:a-cb;16;d2h^18;b m a b;-b 2ab 2,65;16;d2h^19;c m m m;-c 2 2,65:cab;16;d2h^19;a m m m;-a 2 2,65:bca;16;d2h^19;b m m m;-b 2 2,66;16;d2h^20;c c c m;-c 2 2c,66:cab;16;d2h^20;a m a a;-a 2a 2,66:bca;16;d2h^20;b b m b;-b 2b 2b,67;16;d2h^21;c m m e;-c 2a 2,67;16;d2h^21;c m m a;-c 2a 2,67:ba-c;16;d2h^21;c m m b;-c 2a 2a,67:cab;16;d2h^21;a b m m;-a 2b 2b,67:-cba;16;d2h^21;a c m m;-a 2 2b,67:bca;16;d2h^21;b m c m;-b 2 2a,67:a-cb;16;d2h^21;b m a m;-b 2a 2,68:1;16;d2h^22;c c c e:1;c 2 2 -1ac;-b,68:1;16;d2h^22;c c c a:1;c 2 2 -1ac;-b,68:2;16;d2h^22;c c c e:2;-c 2a 2ac,68:2;16;d2h^22;c c c a:2;-c 2a 2ac,68:1ba-c;16;d2h^22;c c c b:1;c 2 2 -1ac,68:2ba-c;16;d2h^22;c c c b:2;-c 2a 2c,68:1cab;16;d2h^22;a b a a:1;a 2 2 -1ab,68:2cab;16;d2h^22;a b a a:2;-a 2a 2b,68:1-cba;16;d2h^22;a c a a:1;a 2 2 -1ab,68:2-cba;16;d2h^22;a c a a:2;-a 2ab 2b,68:1bca;16;d2h^22;b b c b:1;b 2 2 -1ab,68:2bca;16;d2h^22;b b c b:2;-b 2ab 2b,68:1a-cb;16;d2h^22;b b a b:1;b 2 2 -1ab,68:2a-cb;16;d2h^22;b b a b:2;-b 2b 2ab,69;32;d2h^23;f m m m;-f 2 2,70:1;32;d2h^24;f d d d:1;f 2 2 -1d;-b,70:2;32;d2h^24;f d d d:2;-f 2uv 2vw,71;16;d2h^25;i m m m;-i 2 2,72;16;d2h^26;i b a m;-i 2 2c,72:cab;16;d2h^26;i m c b;-i 2a 2,72:bca;16;d2h^26;i c m a;-i 2b 2b,73;16;d2h^27;i b c a;-i 2b 2c,73:ba-c;16;d2h^27;i c a b;-i 2a 2b,74;16;d2h^28;i m m a;-i 2b 2,74:ba-c;16;d2h^28;i m m b;-i 2a 2a,74:cab;16;d2h^28;i b m m;-i 2c 2c,74:-cba;16;d2h^28;i c m m;-i 2 2b,74:bca;16;d2h^28;i m c m;-i 2 2a,74:a-cb;16;d2h^28;i m a m;-i 2c 2,75;4;c4^1;p 4;p 4,76;4;c4^2;p 41;p 4w,76*;4;c4^2;p 41*;p 41,77;4;c4^3;p 42;p 4c,77*;4;c4^3;p 42*;p 42,78;4;c4^4;p 43;p 4cw,78*;4;c4^4;p 43*;p 43,79;8;c4^5;i 4;i 4,80;8;c4^6;i 41;i 4bw,81;4;s4^1;p -4;p -4,82;8;s4^2;i -4;i -4,83;8;c4h^1;p 4/m;-p 4,84;8;c4h^2;p 42/m;-p 4c,84*;8;c4h^2;p 42/m*;-p 42,85:1;8;c4h^3;p 4/n:1;p 4ab -1ab;-b,85:2;8;c4h^3;p 4/n:2;-p 4a,86:1;8;c4h^4;p 42/n:1;p 4n -1n;-b,86:2;8;c4h^4;p 42/n:2;-p 4bc,87;16;c4h^5;i 4/m;-i 4,88:1;16;c4h^6;i 41/a:1;i 4bw -1bw;-b,88:2;16;c4h^6;i 41/a:2;-i 4ad,89;8;d4^1;p 4 2 2;p 4 2,90;8;d4^2;p 4 21 2;p 4ab 2ab,91;8;d4^3;p 41 2 2;p 4w 2c,91*;8;d4^3;p 41 2 2*;p 41 2c,92;8;d4^4;p 41 21 2;p 4abw 2nw,93;8;d4^5;p 42 2 2;p 4c 2,93*;8;d4^5;p 42 2 2*;p 42 2,94;8;d4^6;p 42 21 2;p 4n 2n,95;8;d4^7;p 43 2 2;p 4cw 2c,95*;8;d4^7;p 43 2 2*;p 43 2c,96;8;d4^8;p 43 21 2;p 4nw 2abw,97;16;d4^9;i 4 2 2;i 4 2,98;16;d4^10;i 41 2 2;i 4bw 2bw,99;8;c4v^1;p 4 m m;p 4 -2,100;8;c4v^2;p 4 b m;p 4 -2ab,101;8;c4v^3;p 42 c m;p 4c -2c,101*;8;c4v^3;p 42 c m*;p 42 -2c,102;8;c4v^4;p 42 n m;p 4n -2n,103;8;c4v^5;p 4 c c;p 4 -2c,104;8;c4v^6;p 4 n c;p 4 -2n,105;8;c4v^7;p 42 m c;p 4c -2,105*;8;c4v^7;p 42 m c*;p 42 -2,106;8;c4v^8;p 42 b c;p 4c -2ab,106*;8;c4v^8;p 42 b c*;p 42 -2ab,107;16;c4v^9;i 4 m m;i 4 -2,108;16;c4v^10;i 4 c m;i 4 -2c,109;16;c4v^11;i 41 m d;i 4bw -2,110;16;c4v^12;i 41 c d;i 4bw -2c,111;8;d2d^1;p -4 2 m;p -4 2,112;8;d2d^2;p -4 2 c;p -4 2c,113;8;d2d^3;p -4 21 m;p -4 2ab,114;8;d2d^4;p -4 21 c;p -4 2n,115;8;d2d^5;p -4 m 2;p -4 -2,116;8;d2d^6;p -4 c 2;p -4 -2c,117;8;d2d^7;p -4 b 2;p -4 -2ab,118;8;d2d^8;p -4 n 2;p -4 -2n,119;16;d2d^9;i -4 m 2;i -4 -2,120;16;d2d^10;i -4 c 2;i -4 -2c,121;16;d2d^11;i -4 2 m;i -4 2,122;16;d2d^12;i -4 2 d;i -4 2bw,123;16;d4h^1;p 4/m m m;-p 4 2,124;16;d4h^2;p 4/m c c;-p 4 2c,125:1;16;d4h^3;p 4/n b m:1;p 4 2 -1ab;-b,125:2;16;d4h^3;p 4/n b m:2;-p 4a 2b,126:1;16;d4h^4;p 4/n n c:1;p 4 2 -1n;-b,126:2;16;d4h^4;p 4/n n c:2;-p 4a 2bc,127;16;d4h^5;p 4/m b m;-p 4 2ab,128;16;d4h^6;p 4/m n c;-p 4 2n,129:1;16;d4h^7;p 4/n m m:1;p 4ab 2ab -1ab;-b,129:2;16;d4h^7;p 4/n m m:2;-p 4a 2a,130:1;16;d4h^8;p 4/n c c:1;p 4ab 2n -1ab;-b,130:2;16;d4h^8;p 4/n c c:2;-p 4a 2ac,131;16;d4h^9;p 42/m m c;-p 4c 2,132;16;d4h^10;p 42/m c m;-p 4c 2c,133:1;16;d4h^11;p 42/n b c:1;p 4n 2c -1n;-b,133:2;16;d4h^11;p 42/n b c:2;-p 4ac 2b,134:1;16;d4h^12;p 42/n n m:1;p 4n 2 -1n;-b,134:2;16;d4h^12;p 42/n n m:2;-p 4ac 2bc,135;16;d4h^13;p 42/m b c;-p 4c 2ab,135*;16;d4h^13;p 42/m b c*;-p 42 2ab,136;16;d4h^14;p 42/m n m;-p 4n 2n,137:1;16;d4h^15;p 42/n m c:1;p 4n 2n -1n;-b,137:2;16;d4h^15;p 42/n m c:2;-p 4ac 2a,138:1;16;d4h^16;p 42/n c m:1;p 4n 2ab -1n;-b,138:2;16;d4h^16;p 42/n c m:2;-p 4ac 2ac,139;32;d4h^17;i 4/m m m;-i 4 2,140;32;d4h^18;i 4/m c m;-i 4 2c,141:1;32;d4h^19;i 41/a m d:1;i 4bw 2bw -1bw;-b,141:2;32;d4h^19;i 41/a m d:2;-i 4bd 2,142:1;32;d4h^20;i 41/a c d:1;i 4bw 2aw -1bw;-b,142:2;32;d4h^20;i 41/a c d:2;-i 4bd 2c,143;3;c3^1;p 3;p 3,144;3;c3^2;p 31;p 31,145;3;c3^3;p 32;p 32,146:h;9;c3^4;r 3:h;r 3,146:r;3;c3^4;r 3:r;p 3*,147;6;c3i^1;p -3;-p 3,148:h;18;c3i^2;r -3:h;-r 3,148:r;6;c3i^2;r -3:r;-p 3*,149;6;d3^1;p 3 1 2;p 3 2,150;6;d3^2;p 3 2 1;p 3 2",151;6;d3^3;p 31 1 2;p 31 2 (0 0 4),152;6;d3^4;p 31 2 1;p 31 2",153;6;d3^5;p 32 1 2;p 32 2 (0 0 2),154;6;d3^6;p 32 2 1;p 32 2",155:h;18;d3^7;r 3 2:h;r 3 2",155:r;6;d3^7;r 3 2:r;p 3* 2,156;6;c3v^1;p 3 m 1;p 3 -2",157;6;c3v^2;p 3 1 m;p 3 -2,158;6;c3v^3;p 3 c 1;p 3 -2"c,159;6;c3v^4;p 3 1 c;p 3 -2c,160:h;18;c3v^5;r 3 m:h;r 3 -2",160:r;6;c3v^5;r 3 m:r;p 3* -2,161:h;18;c3v^6;r 3 c:h;r 3 -2"c,161:r;6;c3v^6;r 3 c:r;p 3* -2n,162;12;d3d^1;p -3 1 m;-p 3 2,163;12;d3d^2;p -3 1 c;-p 3 2c,164;12;d3d^3;p -3 m 1;-p 3 2",165;12;d3d^4;p -3 c 1;-p 3 2"c,166:h;36;d3d^5;r -3 m:h;-r 3 2",166:r;12;d3d^5;r -3 m:r;-p 3* 2,167:h;36;d3d^6;r -3 c:h;-r 3 2"c,167:r;12;d3d^6;r -3 c:r;-p 3* 2n,168;6;c6^1;p 6;p 6,169;6;c6^2;p 61;p 61,170;6;c6^3;p 65;p 65,171;6;c6^4;p 62;p 62,172;6;c6^5;p 64;p 64,173;6;c6^6;p 63;p 6c,173*;6;c6^6;p 63*;p 63 ,174;6;c3h^1;p -6;p -6,175;12;c6h^1;p 6/m;-p 6,176;12;c6h^2;p 63/m;-p 6c,176*;12;c6h^2;p 63/m*;-p 63,177;12;d6^1;p 6 2 2;p 6 2,178;12;d6^2;p 61 2 2;p 61 2 (0 0 5),179;12;d6^3;p 65 2 2;p 65 2 (0 0 1),180;12;d6^4;p 62 2 2;p 62 2 (0 0 4),181;12;d6^5;p 64 2 2;p 64 2 (0 0 2),182;12;d6^6;p 63 2 2;p 6c 2c,182*;12;d6^6;p 63 2 2*;p 63 2c,183;12;c6v^1;p 6 m m;p 6 -2,184;12;c6v^2;p 6 c c;p 6 -2c,185;12;c6v^3;p 63 c m;p 6c -2,185*;12;c6v^3;p 63 c m*;p 63 -2,186;12;c6v^4;p 63 m c;p 6c -2c,186*;12;c6v^4;p 63 m c*;p 63 -2c,187;12;d3h^1;p -6 m 2;p -6 2,188;12;d3h^2;p -6 c 2;p -6c 2,189;12;d3h^3;p -6 2 m;p -6 -2,190;12;d3h^4;p -6 2 c;p -6c -2c,191;24;d6h^1;p 6/m m m;-p 6 2,192;24;d6h^2;p 6/m c c;-p 6 2c,193;24;d6h^3;p 63/m c m;-p 6c 2,193*;24;d6h^3;p 63/m c m*;-p 63 2,194;24;d6h^4;p 63/m m c;-p 6c 2c,194*;24;d6h^4;p 63/m m c*;-p 63 2c,195;12;t^1;p 2 3;p 2 2 3,196;48;t^2;f 2 3;f 2 2 3,197;24;t^3;i 2 3;i 2 2 3,198;12;t^4;p 21 3;p 2ac 2ab 3,199;24;t^5;i 21 3;i 2b 2c 3,200;24;th^1;p m -3;-p 2 2 3,201:1;24;th^2;p n -3:1;p 2 2 3 -1n;-b,201:2;24;th^2;p n -3:2;-p 2ab 2bc 3,202;96;th^3;f m -3;-f 2 2 3,203:1;96;th^4;f d -3:1;f 2 2 3 -1d;-b,203:2;96;th^4;f d -3:2;-f 2uv 2vw 3,204;48;th^5;i m -3;-i 2 2 3,205;24;th^6;p a -3;-p 2ac 2ab 3,206;48;th^7;i a -3;-i 2b 2c 3,207;24;o^1;p 4 3 2;p 4 2 3,208;24;o^2;p 42 3 2;p 4n 2 3,209;96;o^3;f 4 3 2;f 4 2 3,210;96;o^4;f 41 3 2;f 4d 2 3,211;48;o^5;i 4 3 2;i 4 2 3,212;24;o^6;p 43 3 2;p 4acd 2ab 3,213;24;o^7;p 41 3 2;p 4bd 2ab 3,214;48;o^8;i 41 3 2;i 4bd 2c 3,215;24;td^1;p -4 3 m;p -4 2 3,216;96;td^2;f -4 3 m;f -4 2 3,217;48;td^3;i -4 3 m;i -4 2 3,218;24;td^4;p -4 3 n;p -4n 2 3,219;96;td^5;f -4 3 c;f -4a 2 3,220;48;td^6;i -4 3 d;i -4bd 2c 3,221;48;oh^1;p m -3 m;-p 4 2 3,222:1;48;oh^2;p n -3 n:1;p 4 2 3 -1n;-b,222:2;48;oh^2;p n -3 n:2;-p 4a 2bc 3,223;48;oh^3;p m -3 n;-p 4n 2 3,224:1;48;oh^4;p n -3 m:1;p 4n 2 3 -1n;-b,224:2;48;oh^4;p n -3 m:2;-p 4bc 2bc 3,225;192;oh^5;f m -3 m;-f 4 2 3,226;192;oh^6;f m -3 c;-f 4a 2 3,227:1;192;oh^7;f d -3 m:1;f 4d 2 3 -1d;-b,227:2;192;oh^7;f d -3 m:2;-f 4vw 2vw 3,228:1;192;oh^8;f d -3 c:1;f 4d 2 3 -1ad;-b,228:2;192;oh^8;f d -3 c:2;-f 4ud 2vw 3,229;96;oh^9;i m -3 m;-i 4 2 3,230;96;oh^10;i a -3 d;-i 4bd 2c 3'.split(",")))});
x("JS");K(null,"JS.HallInfo",["JU.P3i","$.SB","JS.HallRotationTerm","$.HallTranslation","JU.Logger"],function(){c$=M(function(){this.primitiveHallSymbol=this.hallSymbol=null;this.latticeCode="\x00";this.latticeExtension=null;this.isCentrosymmetric=!1;this.nRotations=0;this.vectorCode=this.vector12ths=this.rotationTerms=null;A(this,arguments)},JS,"HallInfo");T(c$,function(){this.rotationTerms=Array(16)});F(c$,function(a){try{var b=this.hallSymbol=a.trim(),b=this.extractLatticeInfo(b);if(0!=JS.HallTranslation.getLatticeIndex(this.latticeCode)){this.latticeExtension=
JS.HallTranslation.getLatticeExtension(this.latticeCode,this.isCentrosymmetric);b=this.extractVectorInfo(b)+this.latticeExtension;JU.Logger.debugging&&JU.Logger.debug("Hallinfo: "+a+" "+b);a=0;var c="\x00";for(this.primitiveHallSymbol="P";0<b.length&&16>this.nRotations;){var b=this.extractRotationInfo(b,a,c),e=this.rotationTerms[this.nRotations-1];a=e.order;c=e.axisType;this.primitiveHallSymbol+=" "+e.primitiveCode}this.primitiveHallSymbol+=this.vectorCode}}catch(d){if(O(d,Exception))JU.Logger.error("Invalid Hall symbol "+
d),this.nRotations=0;else throw d;}},"~S");d(c$,"dumpInfo",function(){var a=new JU.SB;a.append("\nHall symbol: ").append(this.hallSymbol).append("\nprimitive Hall symbol: ").append(this.primitiveHallSymbol).append("\nlattice type: ").append(this.getLatticeDesignation());for(var b=0;b<this.nRotations;b++)a.append("\n\nrotation term ").appendI(b+1).append(this.rotationTerms[b].dumpInfo(this.vectorCode));return a.toString()});d(c$,"getLatticeDesignation",function(){return JS.HallTranslation.getLatticeDesignation2(this.latticeCode,
this.isCentrosymmetric)});d(c$,"extractLatticeInfo",function(a){var b=a.indexOf(" ");if(0>b)return"";var c=a.substring(0,b).toUpperCase();this.latticeCode=c.charAt(0);"-"==this.latticeCode&&(this.isCentrosymmetric=!0,this.latticeCode=c.charAt(1));return a.substring(b+1).trim()},"~S");d(c$,"extractVectorInfo",function(a){this.vector12ths=new JU.P3i;this.vectorCode="";var b=a.indexOf("("),c=a.indexOf(")",b);0<b&&c>b&&(c=a.substring(b+1,c),this.vectorCode=" ("+c+")",a=a.substring(0,b).trim(),b=c.indexOf(" "),
0<=b&&(this.vector12ths.x=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim(),b=c.indexOf(" "),0<=b&&(this.vector12ths.y=Integer.parseInt(c.substring(0,b)),c=c.substring(b+1).trim())),this.vector12ths.z=Integer.parseInt(c));return a},"~S");d(c$,"extractRotationInfo",function(a,b,c){var e=a.indexOf(" "),d;0<=e?(d=a.substring(0,e),a=a.substring(e+1).trim()):(d=a,a="");this.rotationTerms[this.nRotations]=new JS.HallRotationTerm(this,d,b,c);this.nRotations++;return a},"~S,~N,~S")});x("JS");K(["JU.M4"],
"JS.HallRotationTerm",["JU.SB","JS.HallRotation","$.HallTranslation","$.SymmetryOperation","JU.Logger"],function(){c$=M(function(){this.seitzMatrix12ths=this.translation=this.rotation=this.translationString=this.lookupCode=this.primitiveCode=this.inputCode=null;this.isImproper=!1;this.order=0;this.diagonalReferenceAxis=this.axisType="\x00";this.allPositive=!0;A(this,arguments)},JS,"HallRotationTerm");T(c$,function(){this.seitzMatrix12ths=new JU.M4});F(c$,function(a,b,c,e){this.inputCode=b;b+="   ";
"-"==b.charAt(0)&&(this.isImproper=!0,b=b.substring(1));this.primitiveCode="";this.order=b.charCodeAt(0)-48;this.axisType=this.diagonalReferenceAxis="\x00";var d=2,f;switch(f=b.charAt(1)){case "x":case "y":case "z":switch(b.charAt(2)){case "'":case '"':this.diagonalReferenceAxis=f,f=b.charAt(2),d++}case "*":this.axisType=f;break;case "'":case '"':this.axisType=f;switch(b.charAt(2)){case "x":case "y":case "z":this.diagonalReferenceAxis=b.charAt(2);d++;break;default:this.diagonalReferenceAxis=e}break;
default:this.axisType=1==this.order?"_":0==a.nRotations?"z":2==a.nRotations?"*":2==c||4==c?"x":"'",b=b.substring(0,1)+this.axisType+b.substring(1)}this.primitiveCode+="_"==this.axisType?"1":b.substring(0,2);"\x00"!=this.diagonalReferenceAxis&&(b=b.substring(0,1)+this.diagonalReferenceAxis+this.axisType+b.substring(d),this.primitiveCode+=this.diagonalReferenceAxis,d=3);this.lookupCode=b.substring(0,d);this.rotation=JS.HallRotation.lookup(this.lookupCode);if(null==this.rotation)JU.Logger.error("Rotation lookup could not find "+
this.inputCode+" ? "+this.lookupCode);else{this.translation=new JS.HallTranslation("\x00",null);this.translationString="";for(c=b.length;d<c;d++)e=b.charAt(d),e=JS.HallTranslation.getHallTranslation(e,this.order),null!=e&&(this.translationString+=""+e.translationCode,this.translation.rotationShift12ths+=e.rotationShift12ths,this.translation.vectorShift12ths.add(e.vectorShift12ths));this.primitiveCode=(this.isImproper?"-":"")+this.primitiveCode+this.translationString;this.seitzMatrix12ths.setM4(this.isImproper?
this.rotation.seitzMatrixInv:this.rotation.seitzMatrix);this.seitzMatrix12ths.m03=this.translation.vectorShift12ths.x;this.seitzMatrix12ths.m13=this.translation.vectorShift12ths.y;this.seitzMatrix12ths.m23=this.translation.vectorShift12ths.z;switch(this.axisType){case "x":this.seitzMatrix12ths.m03+=this.translation.rotationShift12ths;break;case "y":this.seitzMatrix12ths.m13+=this.translation.rotationShift12ths;break;case "z":this.seitzMatrix12ths.m23+=this.translation.rotationShift12ths}0<a.vectorCode.length&&
(d=JU.M4.newM4(null),c=JU.M4.newM4(null),a=a.vector12ths,d.m03=a.x,d.m13=a.y,d.m23=a.z,c.m03=-a.x,c.m13=-a.y,c.m23=-a.z,this.seitzMatrix12ths.mul2(d,this.seitzMatrix12ths),this.seitzMatrix12ths.mul(c));JU.Logger.debugging&&JU.Logger.debug("code = "+b+"; primitive code ="+this.primitiveCode+"\n Seitz Matrix(12ths):"+this.seitzMatrix12ths)}},"JS.HallInfo,~S,~N,~S");d(c$,"dumpInfo",function(a){var b=new JU.SB;b.append("\ninput code: ").append(this.inputCode).append("; primitive code: ").append(this.primitiveCode).append("\norder: ").appendI(this.order).append(this.isImproper?
" (improper axis)":"");"_"!=this.axisType&&(b.append("; axisType: ").appendC(this.axisType),"\x00"!=this.diagonalReferenceAxis&&b.appendC(this.diagonalReferenceAxis));0<this.translationString.length&&b.append("; translation: ").append(this.translationString);0<a.length&&b.append("; vector offset: ").append(a);null!=this.rotation&&b.append("\noperator: ").append(this.getXYZ(this.allPositive)).append("\nSeitz matrix:\n").append(JS.SymmetryOperation.dumpSeitz(this.seitzMatrix12ths,!1));return b.toString()},
"~S");d(c$,"getXYZ",function(a){return JS.SymmetryOperation.getXYZFromMatrix(this.seitzMatrix12ths,!0,a,!0)},"~B")});x("JS");K(["JU.M4"],"JS.HallRotation",null,function(){c$=M(function(){this.seitzMatrixInv=this.seitzMatrix=this.rotCode=null;A(this,arguments)},JS,"HallRotation");T(c$,function(){this.seitzMatrix=new JU.M4;this.seitzMatrixInv=new JU.M4});F(c$,function(a,b){this.rotCode=a;var c=t(16,0),e=t(16,0);c[15]=e[15]=1;for(var d=0,f=0;11>f;d++){var g=0;switch(b.charAt(d)){case " ":f++;continue;
case "+":case "1":g=1;break;case "-":g=-1}c[f]=g;e[f]=-g;f++}this.seitzMatrix.setA(c);this.seitzMatrixInv.setA(e)},"~S,~S");c$.lookup=d(c$,"lookup",function(a){for(var b=JS.HallRotation.getHallTerms().length;0<=--b;)if(JS.HallRotation.hallRotationTerms[b].rotCode.equals(a))return JS.HallRotation.hallRotationTerms[b];return null},"~S");c$.getHallTerms=d(c$,"getHallTerms",function(){return null==JS.HallRotation.hallRotationTerms?JS.HallRotation.hallRotationTerms=D(-1,[new JS.HallRotation("1_","+00 0+0 00+"),
new JS.HallRotation("2x","+00 0-0 00-"),new JS.HallRotation("2y","-00 0+0 00-"),new JS.HallRotation("2z","-00 0-0 00+"),new JS.HallRotation("2'","0-0 -00 00-"),new JS.HallRotation('2"',"0+0 +00 00-"),new JS.HallRotation("2x'","-00 00- 0-0"),new JS.HallRotation('2x"',"-00 00+ 0+0"),new JS.HallRotation("2y'","00- 0-0 -00"),new JS.HallRotation('2y"',"00+ 0-0 +00"),new JS.HallRotation("2z'","0-0 -00 00-"),new JS.HallRotation('2z"',"0+0 +00 00-"),new JS.HallRotation("3x","+00 00- 0+-"),new JS.HallRotation("3y",
"-0+ 0+0 -00"),new JS.HallRotation("3z","0-0 +-0 00+"),new JS.HallRotation("3*","00+ +00 0+0"),new JS.HallRotation("4x","+00 00- 0+0"),new JS.HallRotation("4y","00+ 0+0 -00"),new JS.HallRotation("4z","0-0 +00 00+"),new JS.HallRotation("6x","+00 0+- 0+0"),new JS.HallRotation("6y","00+ 0+0 -0+"),new JS.HallRotation("6z","+-0 +00 00+")]):JS.HallRotation.hallRotationTerms});G(c$,"hallRotationTerms",null)});x("JS");K(null,"JS.HallTranslation",["JU.P3i"],function(){c$=M(function(){this.translationCode=
"\x00";this.rotationShift12ths=this.rotationOrder=0;this.vectorShift12ths=null;A(this,arguments)},JS,"HallTranslation");F(c$,function(a,b){this.translationCode=a;if(null!=b){if(0<=b.z){this.vectorShift12ths=b;return}this.rotationOrder=b.x;this.rotationShift12ths=b.y}this.vectorShift12ths=new JU.P3i},"~S,JU.P3i");c$.getHallLatticeEquivalent=d(c$,"getHallLatticeEquivalent",function(a){var b=JS.HallTranslation.getLatticeCode(a);return(0<a?"-":"")+b+" 1"},"~N");c$.getLatticeIndex=d(c$,"getLatticeIndex",
function(a){for(var b=1,c=3;b<=JS.HallTranslation.nLatticeTypes;b++,c+=3)if(JS.HallTranslation.latticeTranslationData[c].charAt(0)==a)return b;return 0},"~S");c$.getLatticeCode=d(c$,"getLatticeCode",function(a){0>a&&(a=-a);return 0==a?"\x00":a>JS.HallTranslation.nLatticeTypes?JS.HallTranslation.getLatticeCode(JS.HallTranslation.getLatticeIndex(String.fromCharCode(a))):JS.HallTranslation.latticeTranslationData[3*a].charAt(0)},"~N");c$.getLatticeDesignation=d(c$,"getLatticeDesignation",function(a){var b=
0<a;0>a&&(a=-a);return 0==a||a>JS.HallTranslation.nLatticeTypes?"":(b?"-":"")+JS.HallTranslation.getLatticeCode(a)+": "+(b?"centrosymmetric ":"")+JS.HallTranslation.latticeTranslationData[3*a+1]},"~N");c$.getLatticeDesignation2=d(c$,"getLatticeDesignation2",function(a,b){var c=JS.HallTranslation.getLatticeIndex(a);b||(c=-c);return JS.HallTranslation.getLatticeDesignation(c)},"~S,~B");c$.getLatticeExtension=d(c$,"getLatticeExtension",function(a,b){for(var c=1,e=3;c<=JS.HallTranslation.nLatticeTypes;c++,
e+=3)if(JS.HallTranslation.latticeTranslationData[e].charAt(0)==a)return JS.HallTranslation.latticeTranslationData[e+2]+(b?" -1":"");return""},"~S,~B");c$.getHallTerms=d(c$,"getHallTerms",function(){return null==JS.HallTranslation.hallTranslationTerms?JS.HallTranslation.hallTranslationTerms=D(-1,[new JS.HallTranslation("a",JU.P3i.new3(6,0,0)),new JS.HallTranslation("b",JU.P3i.new3(0,6,0)),new JS.HallTranslation("c",JU.P3i.new3(0,0,6)),new JS.HallTranslation("n",JU.P3i.new3(6,6,6)),new JS.HallTranslation("u",
JU.P3i.new3(3,0,0)),new JS.HallTranslation("v",JU.P3i.new3(0,3,0)),new JS.HallTranslation("w",JU.P3i.new3(0,0,3)),new JS.HallTranslation("d",JU.P3i.new3(3,3,3)),new JS.HallTranslation("1",JU.P3i.new3(2,6,-1)),new JS.HallTranslation("1",JU.P3i.new3(3,4,-1)),new JS.HallTranslation("2",JU.P3i.new3(3,8,-1)),new JS.HallTranslation("1",JU.P3i.new3(4,3,-1)),new JS.HallTranslation("3",JU.P3i.new3(4,9,-1)),new JS.HallTranslation("1",JU.P3i.new3(6,2,-1)),new JS.HallTranslation("2",JU.P3i.new3(6,4,-1)),new JS.HallTranslation("4",
JU.P3i.new3(6,8,-1)),new JS.HallTranslation("5",JU.P3i.new3(6,10,-1)),new JS.HallTranslation("r",JU.P3i.new3(4,8,8)),new JS.HallTranslation("s",JU.P3i.new3(8,8,4)),new JS.HallTranslation("t",JU.P3i.new3(8,4,8))]):JS.HallTranslation.hallTranslationTerms});c$.getHallTranslation=d(c$,"getHallTranslation",function(a,b){for(var c=null,e=JS.HallTranslation.getHallTerms().length;0<=--e;){var d=JS.HallTranslation.hallTranslationTerms[e];if(d.translationCode==a&&(0==d.rotationOrder||d.rotationOrder==b)){c=
new JS.HallTranslation(a,null);c.translationCode=a;c.rotationShift12ths=d.rotationShift12ths;c.vectorShift12ths=d.vectorShift12ths;break}}return c},"~S,~N");G(c$,"latticeTranslationData",D(-1,"\x00;unknown;;P;primitive;;I;body-centered; 1n;R;rhombohedral; 1r 1r;F;face-centered; 1ab 1bc 1ac;A;A-centered; 1bc;B;B-centered; 1ac;C;C-centered; 1ab;S;rhombohedral(S); 1s 1s;T;rhombohedral(T); 1t 1t".split(";")));c$.nLatticeTypes=c$.prototype.nLatticeTypes=v(JS.HallTranslation.latticeTranslationData.length/
3)-1;G(c$,"hallTranslationTerms",null)});x("JS");K(["JU.M4"],"JS.SymmetryOperation","java.lang.Boolean $.Float java.util.Hashtable JU.Matrix $.P3 $.PT $.SB $.V3 JU.Logger $.Parser".split(" "),function(){c$=M(function(){this.xyz=this.xyzOriginal=null;this.doNormalize=!0;this.isFinalized=!1;this.opId=0;this.myLabels=this.centering=null;this.modDim=0;this.rsvs=this.linearRotTrans=null;this.isBio=!1;this.sigma=null;this.index=0;this.subsystemCode=null;this.timeReversal=0;this.isCenteringOp=this.unCentered=
!1;this.magOp=3.4028235E38;this.info=null;A(this,arguments)},JS,"SymmetryOperation",JU.M4);d(c$,"setSigma",function(a,b){this.subsystemCode=a;this.sigma=b},"~S,JU.Matrix");ha(c$,function(a,b,c,e,d){this.doNormalize=d;null==a?this.opId=e:(this.xyzOriginal=a.xyzOriginal,this.xyz=a.xyz,this.opId=a.opId,this.modDim=a.modDim,this.myLabels=a.myLabels,this.index=a.index,this.linearRotTrans=a.linearRotTrans,this.sigma=a.sigma,this.subsystemCode=a.subsystemCode,this.timeReversal=a.timeReversal,this.setMatrix(!1),
a.isFinalized||this.doFinalize(),d&&null==this.sigma&&JS.SymmetryOperation.setOffset(this,b,c,e))},"JS.SymmetryOperation,~A,~N,~N,~B");d(c$,"setGamma",function(a){for(var b=3+this.modDim,c=(this.rsvs=new JU.Matrix(null,b+1,b+1)).getArray(),e=aa(b,0),d=0,f=0;f<b;f++){for(var g=0;g<b;g++)c[f][g]=this.linearRotTrans[d++];e[f]=(a?-1:1)*this.linearRotTrans[d++]}c[b][b]=1;a&&(this.rsvs=this.rsvs.inverse());for(f=0;f<b;f++)c[f][b]=e[f];c=this.rsvs.getSubmatrix(0,0,3,3).getArray();for(f=0;3>f;f++)for(g=0;4>
g;g++)this.setElement(f,g,3>g?c[f][g]:e[f]);this.setElement(3,3,1)},"~B");d(c$,"doFinalize",function(){JS.SymmetryOperation.div12(this);if(0<this.modDim)for(var a=this.rsvs.getArray(),b=a.length-1;0<=--b;)a[b][3+this.modDim]/=12;this.isFinalized=!0});c$.div12=d(c$,"div12",function(a){a.m03/=12;a.m13/=12;a.m23/=12;return a},"JU.M4");d(c$,"getXyz",function(a){return a&&0==this.modDim||null==this.xyzOriginal?this.xyz:this.xyzOriginal},"~B");c$.newPoint=d(c$,"newPoint",function(a,b,c,e,d,f){a.rotTrans2(b,
c);c.add3(e,d,f)},"JU.M4,JU.P3,JU.P3,~N,~N,~N");d(c$,"dumpInfo",function(){return"\n"+this.xyz+"\ninternal matrix representation:\n"+this.toString()});c$.dumpSeitz=d(c$,"dumpSeitz",function(a,b){for(var c=new JU.SB,e=t(4,0),d=0;3>d;d++){a.getRow(d,e);c.append("[\t");for(var f=0;3>f;f++)c.appendI(q(e[f])).append("\t");f=e[3];f!=q(f)&&(f*=12);c.append(JS.SymmetryOperation.twelfthsOf(b?(q(f)+12)%12:q(f))).append("\t]\n")}return c.toString()},"JU.M4,~B");d(c$,"setMatrixFromXYZ",function(a,b,c){if(null==
a)return!1;this.xyzOriginal=a;a=a.toLowerCase();this.setModDim(b);var e=a.startsWith("!");e&&(a=a.substring(1));if(0==a.indexOf("xyz matrix:"))return this.xyz=a,JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans),this.setFromMatrix(null,e);if(0==a.indexOf("[[")){a=a.$replace("["," ").$replace("]"," ").$replace(","," ");JU.Parser.parseStringInfestedFloatArray(a,null,this.linearRotTrans);for(b=this.linearRotTrans.length;0<=--b;)if(Float.isNaN(this.linearRotTrans[b]))return!1;this.setMatrix(e);
this.isFinalized=!0;this.xyz=(this.isBio=0<=a.indexOf("bio"))?this.toString():JS.SymmetryOperation.getXYZFromMatrix(this,!1,!1,!1);return!0}if(0==b&&0<=a.indexOf("x4"))for(b=14;4<=--b;)if(0<=a.indexOf("x"+b)){this.setModDim(b-3);break}b=null;a.endsWith("m")?(this.timeReversal=0<=a.indexOf("-m")?-1:1,c=!0):0<=a.indexOf("mz)")&&(c=a.indexOf("("),b=a.substring(c+1,a.length-1),a=a.substring(0,c),c=!1);c=JS.SymmetryOperation.getMatrixFromString(this,a,this.linearRotTrans,c);if(null==c)return!1;if(null!=
b){var d=1==JU.M4.newA16(this.linearRotTrans).determinant3();this.timeReversal=0>a.indexOf("-x")==0>b.indexOf("-mx")==d?1:-1}this.setMatrix(e);this.xyz=e?JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1):c;0!=this.timeReversal&&(this.xyz+=1==this.timeReversal?",m":",-m");JU.Logger.debugging&&JU.Logger.debug(""+this);return!0},"~S,~N,~B");d(c$,"setModDim",function(a){this.modDim=a;0<a&&(this.myLabels=JS.SymmetryOperation.labelsXn);this.linearRotTrans=t((a+4)*(a+4),0)},"~N");d(c$,"setMatrix",function(a){16<
this.linearRotTrans.length?this.setGamma(a):(this.setA(this.linearRotTrans),a&&(a=JU.P3.new3(this.m03,this.m13,this.m23),this.invert(),this.rotate(a),a.scale(-1),this.setTranslation(a)))},"~B");d(c$,"setFromMatrix",function(a,b){var c=0,e=0;this.myLabels=0==this.modDim?JS.SymmetryOperation.labelsXYZ:JS.SymmetryOperation.labelsXn;for(var d=0,f=3+this.modDim,g=0;d<f;g++){if(Float.isNaN(this.linearRotTrans[g]))return!1;c=this.linearRotTrans[g];1E-5>Math.abs(c)&&(c=0);0==(g+1)%(f+1)&&(null!=a&&(c/=12,
e<a.length&&(c+=a[e++])),c=JS.SymmetryOperation.normalizeTwelfths((0>c?-1:1)*Math.abs(12*c)/12,this.doNormalize),d++);this.linearRotTrans[g]=c}this.linearRotTrans[this.linearRotTrans.length-1]=1;this.setMatrix(b);this.isFinalized=null==a;this.xyz=JS.SymmetryOperation.getXYZFromMatrix(this,!0,!1,!1);return!0},"~A,~B");c$.getMatrixFromXYZ=d(c$,"getMatrixFromXYZ",function(a){var b=t(16,0);a=JS.SymmetryOperation.getMatrixFromString(null,a,b,!1);return null==a?null:JS.SymmetryOperation.div12(JU.M4.newA16(b))},
"~S");c$.getMatrixFromString=d(c$,"getMatrixFromString",function(a,b,c,e){var d=!1,f=!1,g=!1,p=null==a?0:a.modDim,j=4+p,k=null!=a&&a.doNormalize,n=0<p?3:0;c[c.length-1]=1;var l=b.indexOf(";")+1;0!=l&&(e=!0,l==b.length&&(b+="0,0,0"));var m=-1;a=null==a||0==p?null:a.myLabels;null==a&&(a=JS.SymmetryOperation.labelsXYZ);b=b.toLowerCase()+",";b=b.$replace("(",",");0<p&&(b=JS.SymmetryOperation.replaceXn(b,p+3));for(var t=0,s=0,u=0,v,r=0,x=0,y=1,A="",D="",z=0;z<b.length;z++){switch(v=b.charAt(z)){case ";":break;
case "'":case " ":case "{":case "}":case "!":continue;case "-":g=!0;continue;case "+":g=!1;continue;case "/":x=0;d=!0;continue;case "x":case "y":case "z":case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":s=u*j;d="x"<=v?v.charCodeAt(0)-120:v.charCodeAt(0)-97+n;t=s+d;g=g?-1:1;e&&0!=r?(c[t]=r,g=q(r),r=0):c[t]=g;A+=JS.SymmetryOperation.plusMinus(A,g,a[d]);break;case ",":if(0!=l){if(0<l){m=z;z=l-1;l=-z;x=r=0;continue}l=z+1;z=m}r=JS.SymmetryOperation.normalizeTwelfths(r,k);c[s+j-1]=
r;A+=JS.SymmetryOperation.xyzFraction12(r,!1,!0);D+=(""===D?"":",")+A;if(u==j-2)return D;r=0;A="";if(2<u++&&0==p)return JU.Logger.warn("Symmetry Operation? "+b),null;break;case ".":f=!0;y=1;continue;case "0":if(!f&&(d||!e))continue;default:var B=v.charCodeAt(0)-48;if(0<=B&&9>=B){if(f){y/=10;0>r&&(g=!0);r+=y*B*(g?-1:1);continue}if(d){if(1==B){x=1;continue}1==x&&(B+=10*x);0==r?c[t]/=B:r/=B}else r=10*r+(g?-1:1)*B}else JU.Logger.warn("symmetry character?"+v)}f=d=g=!1}return null},"JS.SymmetryOperation,~S,~A,~B");
c$.replaceXn=d(c$,"replaceXn",function(a,b){for(var c=b;0<=--c;)a=JU.PT.rep(a,JS.SymmetryOperation.labelsXn[c],JS.SymmetryOperation.labelsXnSub[c]);return a},"~S,~N");c$.xyzFraction12=d(c$,"xyzFraction12",function(a,b,c){if(b)for(;0>a;)a+=12;else if(c){for(;6<a;)a-=12;for(;-6>a;)a+=12}b=JS.SymmetryOperation.twelfthsOf(a);return"0"==b.charAt(0)?"":0<a?"+"+b:b},"~N,~B,~B");c$.twelfthsOf=d(c$,"twelfthsOf",function(a){var b="";0>a&&(a=-a,b="-");var c=12,e=Math.round(a);if(0.01<Math.abs(e-a)){a/=12;for(c=
3;20>c;c++){var d=a*c,e=Math.round(d);if(0.01>Math.abs(e-d))break}if(20==c)return b+a}else{if(12==e)return b+"1";if(12>e)return b+JS.SymmetryOperation.twelfths[e%12];switch(e%12){case 0:return""+v(e/12);case 2:case 10:c=6;break;case 3:case 9:c=4;break;case 4:case 8:c=3;break;case 6:c=2}e=v(e*c/12)}return b+e+"/"+c},"~N");c$.fortyEighthsOf=d(c$,"fortyEighthsOf",function(a){var b="";0>a&&(a=-a,b="-");var c=12,e=Math.round(a);if(0.01<Math.abs(e-a)){a/=48;for(c=5;20>c;c++){var d=a*c,e=Math.round(d);if(0.01>
Math.abs(e-d))break}if(20==c)return b+a}else{if(48==e)return b+"1";if(48>e)return b+JS.SymmetryOperation.twelfths[e%48];switch(e%48){case 0:return""+v(e/48);case 2:case 10:c=6;break;case 3:case 9:c=4;break;case 4:case 8:c=3;break;case 6:c=2}e=v(e*c/12)}return b+e+"/"+c},"~N");c$.plusMinus=d(c$,"plusMinus",function(a,b,c){return 0==b?"":(0>b?"-":0==a.length?"":"+")+(1==b||-1==b?"":""+q(Math.abs(b)))+c},"~S,~N,~S");c$.normalizeTwelfths=d(c$,"normalizeTwelfths",function(a,b){a*=12;if(b){for(;6<a;)a-=
12;for(;-6>=a;)a+=12}return a},"~N,~B");c$.getXYZFromMatrix=d(c$,"getXYZFromMatrix",function(a,b,c,e){var d="",f=y(a,JS.SymmetryOperation)?a:null;if(null!=f&&0<f.modDim)return JS.SymmetryOperation.getXYZFromRsVs(f.rsvs.getRotation(),f.rsvs.getTranslation(),b);for(var f=t(4,0),g=0;3>g;g++){var p=3>g?0:3;a.getRow(g,f);for(var j="",k=0;3>k;k++)0!=f[k]&&(j+=JS.SymmetryOperation.plusMinus(j,f[k],JS.SymmetryOperation.labelsXYZ[k+p]));j+=JS.SymmetryOperation.xyzFraction12(b?f[3]:12*f[3],c,e);d+=","+j}return d.substring(1)},
"JU.M4,~B,~B,~B");c$.setOffset=d(c$,"setOffset",function(a,b,c,e){if(0!=e){var d=0,f=0,g=0;null==JS.SymmetryOperation.atomTest&&(JS.SymmetryOperation.atomTest=new JU.P3);for(var p=c+e;c<p;c++)JS.SymmetryOperation.newPoint(a,b[c],JS.SymmetryOperation.atomTest,0,0,0),d+=JS.SymmetryOperation.atomTest.x,f+=JS.SymmetryOperation.atomTest.y,g+=JS.SymmetryOperation.atomTest.z;d/=e;f/=e;for(g/=e;-0.001>d||1.001<=d;)a.m03+=0>d?1:-1,d+=0>d?1:-1;for(;-0.001>f||1.001<=f;)a.m13+=0>f?1:-1,f+=0>f?1:-1;for(;-0.001>
g||1.001<=g;)a.m23+=0>g?1:-1,g+=0>g?1:-1}},"JU.M4,~A,~N,~N");d(c$,"rotateAxes",function(a,b,c,d){var h=Array(3);this.getRotationScale(d);for(var f=a.length;0<=--f;)c.setT(a[f]),b.toFractional(c,!0),d.rotate(c),b.toCartesian(c,!0),h[f]=JU.V3.newV(c);return h},"~A,JS.UnitCell,JU.P3,JU.M3");c$.fcoord=d(c$,"fcoord",function(a){return JS.SymmetryOperation.fc(a.x)+" "+JS.SymmetryOperation.fc(a.y)+" "+JS.SymmetryOperation.fc(a.z)},"JU.T3");c$.fc=d(c$,"fc",function(a){var b=Math.abs(a);a=0>a?"-":"";b=q(JS.SymmetryOperation.approxF(24*
b));return b/24==q(b/24)?a+v(b/24):0!=b%8?a+JS.SymmetryOperation.twelfthsOf(b>>1):0==b?"0":24==b?a+"1":a+v(b/8)+"/3"},"~N");c$.approxF=d(c$,"approxF",function(a){return JU.PT.approx(a,100)},"~N");c$.getXYZFromRsVs=d(c$,"getXYZFromRsVs",function(a,b,c){a=a.getArray();b=b.getArray();for(var d=a.length,h="",f=0;f<d;f++){for(var h=h+",",g=0;g<d;g++){var p=a[f][g];0!=p&&(h+=(0>p?"-":h.endsWith(",")?"":"+")+(1==Math.abs(p)?"":""+v(Math.abs(p)))+"x"+(g+1))}h+=JS.SymmetryOperation.xyzFraction12(v(b[f][0]*
(c?1:12)),!1,!0)}return JU.PT.rep(h.substring(1),",+",",")},"JU.Matrix,JU.Matrix,~B");d(c$,"toString",function(){return null==this.rsvs?$(this,JS.SymmetryOperation,"toString",[]):$(this,JS.SymmetryOperation,"toString",[])+" "+this.rsvs.toString()});d(c$,"getMagneticOp",function(){return 3.4028235E38==this.magOp?this.magOp=this.determinant3()*this.timeReversal:this.magOp});d(c$,"setTimeReversal",function(a){this.timeReversal=a;0<=this.xyz.indexOf("m")&&(this.xyz=this.xyz.substring(0,this.xyz.indexOf("m")));
0!=a&&(this.xyz+=1==a?",m":",-m")},"~N");d(c$,"getCentering",function(){this.isFinalized||this.doFinalize();null==this.centering&&!this.unCentered&&(0==this.modDim&&1==this.m00&&1==this.m11&&1==this.m22&&0==this.m01&&0==this.m02&&0==this.m10&&0==this.m12&&0==this.m20&&0==this.m21&&(0!=this.m03||0!=this.m13||0!=this.m23)?(this.isCenteringOp=!0,this.centering=JU.V3.new3(this.m03,this.m13,this.m23)):(this.unCentered=!0,this.centering=null));return this.centering});d(c$,"fixMagneticXYZ",function(a,b,
c){if(0==this.timeReversal)return b;var d=b.indexOf("m"),d=d-v((3-this.timeReversal)/2);b=0>d?b:b.substring(0,d);if(!c)return b+(0<this.timeReversal?" +1":" -1");a=JU.M4.newM4(a);a.m03=a.m13=a.m23=0;0>this.getMagneticOp()&&a.scale(-1);return b+="("+JU.PT.rep(JU.PT.rep(JU.PT.rep(JS.SymmetryOperation.getXYZFromMatrix(a,!1,!1,!1),"x","mx"),"y","my"),"z","mz")+")"},"JU.M4,~S,~B");d(c$,"getInfo",function(){null==this.info&&(this.info=new java.util.Hashtable,this.info.put("xyz",this.xyz),null!=this.centering&&
this.info.put("centering",this.centering),this.info.put("index",Integer.$valueOf(this.index)),this.info.put("isCenteringOp",Boolean.$valueOf(this.isCenteringOp)),null!=this.linearRotTrans&&this.info.put("linearRotTrans",this.linearRotTrans),this.info.put("modulationDimension",Integer.$valueOf(this.modDim)),this.info.put("matrix",JU.M4.newM4(this)),3.4028235E38!=this.magOp&&this.info.put("magOp",Float.$valueOf(this.magOp)),this.info.put("id",Integer.$valueOf(this.opId)),this.info.put("timeReversal",
Integer.$valueOf(this.timeReversal)),null!=this.xyzOriginal&&this.info.put("xyzOriginal",this.xyzOriginal));return this.info});G(c$,"atomTest",null,"twelfths",D(-1,"0 1/12 1/6 1/4 1/3 5/12 1/2 7/12 2/3 3/4 5/6 11/12".split(" ")),"fortyeigths",D(-1,"0 1/48 1/24 1/16 1/12 5/48 1/8 7/48 1/6 3/16 5/24 11/48 1/4 13/48 7/24 5/16 1/3 17/48 3/8 19/48 5/12 7/16 11/24 23/48 1/2 25/48 13/24 9/16 7/12 29/48 15/24 31/48 2/3 11/12 17/16 35/48 3/4 37/48 19/24 13/16 5/6 41/48 7/8 43/48 11/12 15/16 23/24 47/48".split(" ")));
c$.labelsXYZ=c$.prototype.labelsXYZ=D(-1,["x","y","z"]);c$.labelsXn=c$.prototype.labelsXn=D(-1,"x1 x2 x3 x4 x5 x6 x7 x8 x9 x10 x11 x12 x13".split(" "));c$.labelsXnSub=c$.prototype.labelsXnSub=D(-1,"xyzabcdefghij".split(""))});x("JS");K(null,"JS.SymmetryInfo",["JU.PT","JU.SimpleUnitCell"],function(){c$=M(function(){this.isMultiCell=this.coordinatesAreFractional=!1;this.cellRange=this.infoStr=this.symmetryOperations=this.sgName=null;this.latticeType="P";this.intlTableNo=null;A(this,arguments)},JS,"SymmetryInfo");
F(c$,function(){});d(c$,"setSymmetryInfo",function(a,b){this.cellRange=a.get("unitCellRange");this.sgName=a.get("spaceGroup");if(null==this.sgName||""===this.sgName)this.sgName="spacegroup unspecified";this.infoStr="Spacegroup: "+this.sgName;if(null==(this.latticeType=a.get("latticeType")))this.latticeType="P";this.intlTableNo=a.get("intlTableNo");var c=a.containsKey("symmetryCount")?a.get("symmetryCount").intValue():0;this.symmetryOperations=a.remove("symmetryOps");if(null!=this.symmetryOperations){for(var d=
"",h="\nNumber of symmetry operations: "+(0==c?1:c)+"\nSymmetry Operations:",f=0;f<c;f++){var g=this.symmetryOperations[f],h=h+("\n"+g.fixMagneticXYZ(g,g.xyz,!0));g.isCenteringOp&&(d+=" ("+JU.PT.rep(JU.PT.replaceAllCharacters(g.xyz,"xyz","0"),"0+","")+")")}0<d.length&&(this.infoStr+="\nCentering: "+d);this.infoStr+=h;this.infoStr+="\n"}null==b&&(b=a.get("unitCellParams"));if(!JU.SimpleUnitCell.isValid(b))return null;this.isMultiCell=(this.coordinatesAreFractional=a.containsKey("coordinatesAreFractional")?
a.get("coordinatesAreFractional").booleanValue():!1)&&null!=this.symmetryOperations;return b},"java.util.Map,~A")});x("JS");K(["JU.SimpleUnitCell","JU.P3","JV.JC"],"JS.UnitCell","java.lang.Double $.Float java.util.Hashtable JU.M3 $.M4 $.P4 $.PT $.Quat $.T4 $.V3 J.api.Interface JS.Symmetry JU.BoxInfo $.Escape".split(" "),function(){c$=M(function(){this.fractionalOffset=this.vertices=null;this.allFractionalRelative=!1;this.moreInfo=this.unitCellMultiplier=this.cartesianOffset=null;this.name="";A(this,
arguments)},JS,"UnitCell",JU.SimpleUnitCell,Cloneable);T(c$,function(){this.cartesianOffset=new JU.P3});c$.fromOABC=d(c$,"fromOABC",function(a,b){var c=new JS.UnitCell;3==a.length&&(a=D(-1,[new JU.P3,a[0],a[1],a[2]]));var d=t(-1,[-1,0,0,0,0,0,a[1].x,a[1].y,a[1].z,a[2].x,a[2].y,a[2].z,a[3].x,a[3].y,a[3].z]);c.init(d);c.allFractionalRelative=b;c.initUnitcellVertices();c.setCartesianOffset(a[0]);return c},"~A,~B");c$.fromParams=d(c$,"fromParams",function(a,b){var c=new JS.UnitCell;c.init(a);c.initUnitcellVertices();
c.allFractionalRelative=b;return c},"~A,~B");d(c$,"initOrientation",function(a){if(null!=a){var b=new JU.M4;b.setToM3(a);this.matrixFractionalToCartesian.mul2(b,this.matrixFractionalToCartesian);this.matrixCartesianToFractional.setM4(this.matrixFractionalToCartesian).invert();this.initUnitcellVertices()}},"JU.M3");d(c$,"toUnitCell",function(a,b){null!=this.matrixCartesianToFractional&&(null==b?(this.matrixCartesianToFractional.rotTrans(a),this.unitize(a),this.matrixFractionalToCartesian.rotTrans(a)):
(this.matrixCtoFNoOffset.rotTrans(a),this.unitize(a),a.add(b),this.matrixFtoCNoOffset.rotTrans(a)))},"JU.T3,JU.T3");d(c$,"unitize",function(a){switch(this.dimension){case 3:a.z=JS.UnitCell.toFractionalX(a.z);case 2:a.y=JS.UnitCell.toFractionalX(a.y);case 1:a.x=JS.UnitCell.toFractionalX(a.x)}},"JU.T3");d(c$,"reset",function(){this.unitCellMultiplier=null;this.setOffset(JU.P3.new3(0,0,0))});d(c$,"setOffset",function(a){if(null!=a){var b=y(a,JU.T4)?a:null,c=null!=b&&999999<b.w;if(null!=b?0>=b.w||c:100<=
a.x||100<=a.y)if(this.unitCellMultiplier=0==a.z&&a.x==a.y&&!c?null:c?JU.P4.newPt(b):JU.P3.newP(a),null==b||0==b.w||c)return;if(this.hasOffset()||0<a.lengthSquared())this.fractionalOffset=new JU.P3,this.fractionalOffset.setT(a);this.matrixCartesianToFractional.m03=-a.x;this.matrixCartesianToFractional.m13=-a.y;this.matrixCartesianToFractional.m23=-a.z;this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=0;this.matrixFractionalToCartesian.m13=0;this.matrixFractionalToCartesian.m23=0;this.matrixFractionalToCartesian.rotTrans(this.cartesianOffset);
this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian))}},"JU.T3");d(c$,"setCartesianOffset",function(a){this.cartesianOffset.setT(a);this.matrixFractionalToCartesian.m03=this.cartesianOffset.x;this.matrixFractionalToCartesian.m13=
this.cartesianOffset.y;this.matrixFractionalToCartesian.m23=this.cartesianOffset.z;a=this.hasOffset();this.fractionalOffset=new JU.P3;this.fractionalOffset.setT(this.cartesianOffset);this.matrixCartesianToFractional.m03=0;this.matrixCartesianToFractional.m13=0;this.matrixCartesianToFractional.m23=0;this.matrixCartesianToFractional.rotTrans(this.fractionalOffset);this.matrixCartesianToFractional.m03=-this.fractionalOffset.x;this.matrixCartesianToFractional.m13=-this.fractionalOffset.y;this.matrixCartesianToFractional.m23=
-this.fractionalOffset.z;this.allFractionalRelative&&(this.matrixCtoFNoOffset.setM4(this.matrixCartesianToFractional),this.matrixFtoCNoOffset.setM4(this.matrixFractionalToCartesian));!a&&0==this.fractionalOffset.lengthSquared()&&(this.fractionalOffset=null)},"JU.T3");d(c$,"getInfo",function(){var a=new java.util.Hashtable;a.put("params",this.unitCellParams);a.put("vectors",this.getUnitCellVectors());a.put("volume",Double.$valueOf(this.volume));a.put("matFtoC",this.matrixFractionalToCartesian);a.put("matCtoF",
this.matrixCartesianToFractional);return a});d(c$,"dumpInfo",function(a){return"a="+this.a+", b="+this.b+", c="+this.c+", alpha="+this.alpha+", beta="+this.beta+", gamma="+this.gamma+"\n"+JU.Escape.eAP(this.getUnitCellVectors())+"\nvolume="+this.volume+(a?"\nfractional to cartesian: "+this.matrixFractionalToCartesian+"\ncartesian to fractional: "+this.matrixCartesianToFractional:"")},"~B");d(c$,"getVertices",function(){return this.vertices});d(c$,"getCartesianOffset",function(){return this.cartesianOffset});
d(c$,"getFractionalOffset",function(){return this.fractionalOffset});d(c$,"getTensor",function(a,b){var c=J.api.Interface.getUtil("Tensor",a,"file");if(0==b[0]&&0==b[1]&&0==b[2]){var d=b[7],h=t(-1,[d,d,d]);return c.setFromEigenVectors(JS.UnitCell.unitVectors,h,"iso","Uiso="+d,null)}c.parBorU=b;var d=aa(6,0),f=q(b[6]);if(12==f)d[0]=19.739208802178716*b[0],d[1]=19.739208802178716*b[1],d[2]=19.739208802178716*b[2],d[3]=39.47841760435743*b[3],d[4]=39.47841760435743*b[4],d[5]=39.47841760435743*b[5],b[7]=
(b[0]+b[1]+b[3])/3;else{var h=4==f||5==f||8==f||9==f,g=2-f%2,p=8==f||9==f||10==f?19.739208802178716:4==f||5==f?0.25:2==f||3==f?Math.log(2):1,f=b[0]*p*(h?this.a_*this.a_:1),j=b[1]*p*(h?this.b_*this.b_:1),k=b[2]*p*(h?this.c_*this.c_:1),n=b[3]*p*(h?this.a_*this.b_:1)*g,l=b[4]*p*(h?this.a_*this.c_:1)*g,h=b[5]*p*(h?this.b_*this.c_:1)*g;b[7]=Math.pow(f/19.739208802178716/this.a_/this.a_*j/19.739208802178716/this.b_/this.b_*k/19.739208802178716/this.c_/this.c_,0.3333);d[0]=this.a*this.a*f+this.b*this.b*
this.cosGamma*this.cosGamma*j+this.c*this.c*this.cosBeta*this.cosBeta*k+this.a*this.b*this.cosGamma*n+this.b*this.c*this.cosGamma*this.cosBeta*h+this.a*this.c*this.cosBeta*l;d[1]=this.b*this.b*this.sinGamma*this.sinGamma*j+this.c*this.c*this.cA_*this.cA_*k+this.b*this.c*this.cA_*this.sinGamma*h;d[2]=this.c*this.c*this.cB_*this.cB_*k;d[3]=2*this.b*this.b*this.cosGamma*this.sinGamma*j+2*this.c*this.c*this.cA_*this.cosBeta*k+this.a*this.b*this.sinGamma*n+this.b*this.c*(this.cA_*this.cosGamma+this.sinGamma*
this.cosBeta)*h+this.a*this.c*this.cA_*l;d[4]=2*this.c*this.c*this.cB_*this.cosBeta*k+this.b*this.c*this.cosGamma*h+this.a*this.c*this.cB_*l;d[5]=2*this.c*this.c*this.cA_*this.cB_*k+this.b*this.c*this.cB_*this.sinGamma*h}return c.setFromThermalEquation(d,JU.Escape.eAF(b))},"JV.Viewer,~A");d(c$,"getCanonicalCopy",function(a,b){var c=Array(8),d=null,h=null;b&&null!=this.unitCellMultiplier&&(d=new JU.P3,h=new JU.P3,JU.SimpleUnitCell.ijkToPoint3f(q(this.unitCellMultiplier.x),d,0,0),JU.SimpleUnitCell.ijkToPoint3f(q(this.unitCellMultiplier.y),
h,0,0),h.sub(d));for(var f=0;8>f;f++){var g=c[f]=JU.P3.newP(JU.BoxInfo.unitCubePoints[f]);null!=d&&(a*=0==this.unitCellMultiplier.z?1:this.unitCellMultiplier.z,c[f].add3(d.x+h.x*g.x,d.y+h.y*g.y,d.z+h.z*g.z));this.matrixFractionalToCartesian.rotTrans(g);b||g.sub(this.cartesianOffset)}return JU.BoxInfo.getCanonicalCopy(c,a)},"~N,~B");c$.toFractionalX=d(c$,"toFractionalX",function(a){a-=Math.floor(a);if(0.9999<a||1E-4>a)a=0;return a},"~N");d(c$,"initUnitcellVertices",function(){if(null!=this.matrixFractionalToCartesian){this.matrixCtoFNoOffset=
JU.M4.newM4(this.matrixCartesianToFractional);this.matrixFtoCNoOffset=JU.M4.newM4(this.matrixFractionalToCartesian);this.vertices=Array(8);for(var a=8;0<=--a;)this.vertices[a]=this.matrixFractionalToCartesian.rotTrans2(JU.BoxInfo.unitCubePoints[a],new JU.P3)}});d(c$,"checkDistance",function(a,b,c,d,g,f,q,p){a=JU.P3.newP(a);this.toCartesian(a,!0);for(var j=-g;j<=g;j++)for(var k=-f;k<=f;k++)for(var n=-q;n<=q;n++){p.set(b.x+j,b.y+k,b.z+n);this.toCartesian(p,!0);var l=a.distance(p);if(0<d?Math.abs(l-
c)<=d:l<=c&&0.1<l)return p.set(j,k,n),!0}return!1},"JU.P3,JU.P3,~N,~N,~N,~N,~N,JU.P3");d(c$,"getUnitCellMultiplier",function(){return this.unitCellMultiplier});d(c$,"getUnitCellVectors",function(){var a=this.matrixFractionalToCartesian;return D(-1,[JU.P3.newP(this.cartesianOffset),JU.P3.new3(this.fix(a.m00),this.fix(a.m10),this.fix(a.m20)),JU.P3.new3(this.fix(a.m01),this.fix(a.m11),this.fix(a.m21)),JU.P3.new3(this.fix(a.m02),this.fix(a.m12),this.fix(a.m22))])});d(c$,"fix",function(a){return 0.001>
Math.abs(a)?0:a},"~N");d(c$,"isSameAs",function(a){if(a.unitCellParams.length!=this.unitCellParams.length)return!1;for(var b=this.unitCellParams.length;0<=--b;)if(this.unitCellParams[b]!=a.unitCellParams[b]&&(!Float.isNaN(this.unitCellParams[b])||!Float.isNaN(a.unitCellParams[b])))return!1;return null==this.fractionalOffset?!a.hasOffset():null==a.fractionalOffset?!this.hasOffset():0==this.fractionalOffset.distanceSquared(a.fractionalOffset)},"JS.UnitCell");d(c$,"hasOffset",function(){return null!=
this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()});d(c$,"getState",function(){var a="";null!=this.fractionalOffset&&0!=this.fractionalOffset.lengthSquared()&&(a+="  unitcell offset "+JU.Escape.eP(this.fractionalOffset)+";\n");null!=this.unitCellMultiplier&&(a+="  unitcell range "+JU.SimpleUnitCell.escapeMultiplier(this.unitCellMultiplier)+";\n");return a});d(c$,"getQuaternionRotation",function(a){var b=JU.V3.newVsub(this.vertices[4],this.vertices[0]),c=JU.V3.newVsub(this.vertices[2],
this.vertices[0]),d=JU.V3.newVsub(this.vertices[1],this.vertices[0]),g=new JU.V3,f=new JU.V3,q="-"==a.charAt(0)?-1:1;0>q&&(a=a.substring(1));var p=0;2==a.length&&(p=a.charCodeAt(1)-48,a=a.substring(0,1));var j=0==p%2;switch("abc".indexOf(a)){default:a=b;b=d;0<p&&0<q==j&&(b=c,a.scale(-1));break;case 1:a=c;0<p&&0<q==j&&(b=d,a.scale(-1));break;case 2:a=d,0<p&&(p=5-p,0<q!=j&&(b=c,a.scale(-1)))}switch(p){case 2:a.scale(-1);b.scale(-1);break;case 3:b.scale(-1);break;case 4:a.scale(-1)}g.cross(a,b);f.cross(g,
a);return JU.Quat.getQuaternionFrame(null,f,g).inv()},"~S");d(c$,"getV0abc",function(a){if(y(a,Array))return a;var b=!1,c=Array(4),d=c[0]=JU.V3.new3(0,0,0);c[1]=JU.V3.new3(1,0,0);c[2]=JU.V3.new3(0,1,0);c[3]=JU.V3.new3(0,0,1);var g=new JU.M3;if(y(a,String)){var f="0,0,0";if(0==a.indexOf("a="))return JU.SimpleUnitCell.setOabc(a,null,c);b=a.indexOf(";");0<=b&&(f=a.substring(b+1),a=a.substring(0,b));a+=";0,0,0";(b=a.startsWith("!"))&&(a=a.substring(1));var q=new JS.Symmetry;q.setSpaceGroup(!1);a=q.addSpaceGroupOperation("="+
a,0);if(0>a)return null;a=q.getSpaceGroupOperation(a);a.doFinalize();if(null!=f){f=JU.PT.split(f,",");q=t(3,0);if(3==f.length)for(var p=0;3>p;p++){var j=f[p],k=j.indexOf("/");q[p]=0<=k?JU.PT.parseFloat(j.substring(0,k))/JU.PT.parseFloat(j.substring(k+1)):JU.PT.parseFloat(j)}f=JU.P3.new3(q[0],q[1],q[2]);a.setTranslation(f)}}else if(y(a,JU.M3))a=JU.M4.newMV(a,new JU.P3);else if(!y(a,JU.M4)){a=a[0];a.getRotationScale(g);this.toCartesian(d,!1);a.rotTrans(d);for(a=1;4>a;a++)this.toCartesian(c[a],!0),g.rotate(c[a]);
return c}a.getRotationScale(g);a.getTranslation(d);b?(g.invert(),g.transpose(),g.rotate(d),d.scale(-1)):g.transpose();this.toCartesian(d,!1);for(a=1;4>a;a++)g.rotate(c[a]),this.toCartesian(c[a],!0);return c},"~O");d(c$,"toFromPrimitive",function(a,b,c,d){var g=c.length-3,f=null;if("r"==b||null==d){switch(b){default:return!1;case "r":return JU.SimpleUnitCell.getReciprocal(c,c,1),!0;case "P":a=!0;f=JU.M3.newA9(t(-1,[1,0,0,0,1,0,0,0,1]));break;case "A":f=JU.M3.newA9(t(-1,[1,0,0,0,0.5,0.5,0,-0.5,0.5]));
break;case "B":f=JU.M3.newA9(t(-1,[0.5,0,0.5,0,1,0,-0.5,0,0.5]));break;case "C":f=JU.M3.newA9(t(-1,[0.5,0.5,0,-0.5,0.5,0,0,0,1]));break;case "R":f=JU.M3.newA9(t(-1,[0.6666667,-0.33333334,-0.33333334,0.33333334,0.33333334,-0.6666667,0.33333334,0.33333334,0.33333334]));break;case "I":f=JU.M3.newA9(t(-1,[-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5]));break;case "F":f=JU.M3.newA9(t(-1,[0,0.5,0.5,0.5,0,0.5,0.5,0.5,0]))}a||f.invert()}else f=JU.M3.newM3(d),a&&f.invert();for(a=c.length;--a>=g;)b=c[a],this.toFractional(b,
!1),f.rotate(b),this.toCartesian(b,!1);return!0},"~B,~S,~A,JU.M3");d(c$,"getConventionalUnitCell",function(a,b){var c=this.getUnitCellVectors();(!a.equals("P")||null!=b)&&this.toFromPrimitive(!1,a.charAt(0),c,b);return c},"~S,JU.M3");c$.cloneUnitCell=d(c$,"cloneUnitCell",function(a){var b=null;try{b=a.clone()}catch(c){if(!O(c,CloneNotSupportedException))throw c;}return b},"JS.UnitCell");G(c$,"twoP2",19.739208802178716);c$.unitVectors=c$.prototype.unitVectors=D(-1,[JV.JC.axisX,JV.JC.axisY,JV.JC.axisZ])})})(Clazz,
Clazz.getClassName,Clazz.newLongArray,Clazz.doubleToByte,Clazz.doubleToInt,Clazz.doubleToLong,Clazz.declarePackage,Clazz.instanceOf,Clazz.load,Clazz.instantialize,Clazz.decorateAsClass,Clazz.floatToInt,Clazz.floatToLong,Clazz.makeConstructor,Clazz.defineEnumConstant,Clazz.exceptionOf,Clazz.newIntArray,Clazz.defineStatics,Clazz.newFloatArray,Clazz.declareType,Clazz.prepareFields,Clazz.superConstructor,Clazz.newByteArray,Clazz.declareInterface,Clazz.p0p,Clazz.pu$h,Clazz.newShortArray,Clazz.innerTypeInstance,
Clazz.isClassDefined,Clazz.prepareCallback,Clazz.newArray,Clazz.castNullAs,Clazz.floatToShort,Clazz.superCall,Clazz.decorateAsType,Clazz.newBooleanArray,Clazz.newCharArray,Clazz.implementOf,Clazz.newDoubleArray,Clazz.overrideConstructor,Clazz.clone,Clazz.doubleToShort,Clazz.getInheritedLevel,Clazz.getParamsType,Clazz.isAF,Clazz.isAB,Clazz.isAI,Clazz.isAS,Clazz.isASS,Clazz.isAP,Clazz.isAFloat,Clazz.isAII,Clazz.isAFF,Clazz.isAFFF,Clazz.tryToSearchAndExecute,Clazz.getStackTrace,Clazz.inheritArgs,Clazz.alert,
Clazz.defineMethod,Clazz.overrideMethod,Clazz.declareAnonymous,Clazz.cloneFinals);
