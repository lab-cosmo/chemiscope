
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "examples/1-base.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_examples_1-base.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_examples_1-base.py:


Simple chemiscope input
=======================

This example demonstrates the basic usage of the ``chemiscope`` package, reading
structures and properties from structures stored as
`ASE <https://wiki.fysik.dtu.dk/ase>`_  objects, and
preparing a chemiscope file to visualize them using :py:func:`chemiscope.show`. First,
import dependencies:

.. GENERATED FROM PYTHON SOURCE LINES 14-23

.. code-block:: Python


    import glob
    import os

    import ase.io

    import chemiscope









.. GENERATED FROM PYTHON SOURCE LINES 24-25

Load structures from an extended xyz file:

.. GENERATED FROM PYTHON SOURCE LINES 26-29

.. code-block:: Python


    structures = ase.io.read("data/showcase.xyz", ":")








.. GENERATED FROM PYTHON SOURCE LINES 30-33

A chemiscope widget can be used to visualize structures and properties.
This generates a Chemiscope object that is rendered to an interactive
widget when executed in a Jupyter notebook.

.. GENERATED FROM PYTHON SOURCE LINES 34-54

.. code-block:: Python


    chemiscope.show(
        structures=structures,
        # quickly extract properties from the ASE structures. If you are sharing the
        # resulting dataset, don't forget to also include metadata such as units and
        # description
        properties=chemiscope.extract_properties(
            structures, only=["dipole_ccsd", "ccsd_pol"]
        ),
        # it's always good to set some metadata to explain what the dataset - title is bare
        # minimum
        metadata=dict(name="Dipole and polarizability"),
        # it is possible to set all visualization parameters with a dictionary format.
        # this is a shortcut for the most basic ones
        settings=chemiscope.quick_settings(
            x="ccsd_pol[1]", y="ccsd_pol[2]", map_color="dipole_ccsd[1]"
        ),
    )




.. chemiscope:: _datasets/fig_1-base_001.json.gz
            :mode: default
            :warning_timeout: 2000
        


.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 55-59

For sharing with collaborators, or when one does not want to use an interactive
notebook, one can also write a JSON (or compressed JSON) file that contains all
information about structures and properties, and can be viewed at
`chemiscope.org <https://chemiscope.org>`_

.. GENERATED FROM PYTHON SOURCE LINES 60-75

.. code-block:: Python


    # Save as a file that can be viewed at chemiscope.org

    chemiscope.write_input(
        "showcase.json.gz",
        structures=structures,
        properties=chemiscope.extract_properties(
            structures, only=["dipole_ccsd", "ccsd_pol"]
        ),
        metadata=dict(name="Dipole and polarizability"),
        settings=chemiscope.quick_settings(
            x="ccsd_pol[1]", y="ccsd_pol[2]", map_color="dipole_ccsd[1]"
        ),
    )








.. GENERATED FROM PYTHON SOURCE LINES 76-78

In a notebook it is also possible to load a `.json` file and create an interactive
widget from it. This is another way to share datasets with collaborators.

.. GENERATED FROM PYTHON SOURCE LINES 79-82

.. code-block:: Python


    chemiscope.show_input("showcase.json.gz")



.. chemiscope:: _datasets/fig_1-base_002.json.gz
            :mode: default
            :warning_timeout: 2000
        


.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">

    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 83-88

When working with large datasets, it is also possible to save separately the structure
data, and have chemiscope load them on demand. This can be done with a couple of
utility functions. Note that you will need to share the structure files alongside the
main dataset file, and that it will not be possible to use the standalone viewer
at `chemiscope.org`, as it requires all data to be included in the JSON file.

.. GENERATED FROM PYTHON SOURCE LINES 89-115

.. code-block:: Python


    # This will write the external structures as separate files `structure-*.json`
    external_structures = chemiscope.write_external_structures(
        structures, prefix="structure"
    )

    # We also use this to demonstrate the 'structure' mode of chemiscope
    chemiscope.show(
        structures=external_structures,
        mode="structure",
    )

    # The dataset file is smaller and will take up less browser memory when loaded
    chemiscope.write_input(
        "showcase-nostructures.json.gz",
        structures=external_structures,
    )

    print("\nCompressed dataset files:")
    for f in sorted(glob.glob("showcase*.json.gz")):
        size = os.path.getsize(f)
        print(f"  {f}  ({size} bytes)")

    print("External structure files:")
    for f in sorted(glob.glob("structure-*.json.gz")):
        print("  ", f)




.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    Compressed dataset files:
      showcase-nostructures.json.gz  (256 bytes)
      showcase.json.gz  (12581 bytes)
    External structure files:
       structure-0.json.gz
       structure-1.json.gz
       structure-10.json.gz
       structure-11.json.gz
       structure-12.json.gz
       structure-13.json.gz
       structure-14.json.gz
       structure-15.json.gz
       structure-16.json.gz
       structure-17.json.gz
       structure-18.json.gz
       structure-19.json.gz
       structure-2.json.gz
       structure-20.json.gz
       structure-21.json.gz
       structure-22.json.gz
       structure-23.json.gz
       structure-24.json.gz
       structure-25.json.gz
       structure-26.json.gz
       structure-27.json.gz
       structure-28.json.gz
       structure-3.json.gz
       structure-4.json.gz
       structure-5.json.gz
       structure-6.json.gz
       structure-7.json.gz
       structure-8.json.gz
       structure-9.json.gz





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.092 seconds)


.. _sphx_glr_download_examples_1-base.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 1-base.ipynb <1-base.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 1-base.py <1-base.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: 1-base.zip <1-base.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
